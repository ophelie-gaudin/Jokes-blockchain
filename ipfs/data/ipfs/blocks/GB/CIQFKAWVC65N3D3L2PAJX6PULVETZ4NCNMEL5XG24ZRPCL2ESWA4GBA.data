(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[163],{4823:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(o){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));return t(new n,r)}}},4053:(e,t,n)=>{var r=n(2285);e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof r||"object"!==typeof r.versions||!r.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},3163:(e,t,n)=>{"use strict";n.d(t,{create:()=>al});var r={};n.r(r),n.d(r,{code:()=>Le,decode:()=>ze,decodeOptions:()=>Re,encode:()=>Fe,encodeOptions:()=>_e,name:()=>Oe,toByteView:()=>xe});var o={};n.r(o),n.d(o,{code:()=>kn,decode:()=>Cn,encode:()=>An,format:()=>Tn,name:()=>En,parse:()=>In,stringify:()=>Tn});var s={};n.r(s),n.d(s,{code:()=>er,createLink:()=>Qn,createNode:()=>Xn,decode:()=>nr,encode:()=>tr,name:()=>Yn,prepare:()=>Jn,validate:()=>Zn});var i={};n.r(i),n.d(i,{code:()=>Ns,decode:()=>_s,encode:()=>Us,name:()=>Ps,toGeneral:()=>xs});var a=n(2831);const c=["string","number","bigint","symbol"],u=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function l(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(c.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(u.includes(t))return t;return}(e);return n||"Object"}class f{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}f.uint=new f(0,"uint",!0),f.negint=new f(1,"negint",!0),f.bytes=new f(2,"bytes",!0),f.string=new f(3,"string",!0),f.array=new f(4,"array",!1),f.map=new f(5,"map",!1),f.tag=new f(6,"tag",!1),f.float=new f(7,"float",!0),f.false=new f(7,"false",!0),f.true=new f(7,"true",!0),f.null=new f(7,"null",!0),f.undefined=new f(7,"undefined",!0),f.break=new f(7,"break",!0);class d{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const h=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,p=new TextDecoder,g=new TextEncoder;function y(e){return h&&globalThis.Buffer.isBuffer(e)}function w(e){return e instanceof Uint8Array?y(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const m=h?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):T(e,t,n):(e,t,n)=>n-t>64?p.decode(e.subarray(t,n)):T(e,t,n),b=h?e=>e.length>64?globalThis.Buffer.from(e):C(e):e=>e.length>64?g.encode(e):C(e),v=e=>Uint8Array.from(e),E=h?(e,t,n)=>y(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),k=h?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),w(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},A=h?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function C(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function T(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,c;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128===(192&n)&&(c=(31&o)<<6|63&n,c>127&&(s=c));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(c=(15&o)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return function(e){const t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}(r)}const $=4096;class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=A(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=E(n,0,this.cursor)}else e=k(this.chunks,this.cursor);return t&&this.reset(),e}}const S="CBOR decode error:",P="CBOR encode error:",N=[];function j(e,t,n){if(e.length-t<n)throw new Error(`${S} not enough data for type`)}N[23]=1,N[24]=2,N[25]=3,N[26]=5,N[27]=9;const B=[24,256,65536,4294967296,BigInt("18446744073709551616")];function x(e,t,n){j(e,t,1);const r=e[t];if(!0===n.strict&&r<B[0])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return r}function U(e,t,n){j(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<B[1])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return r}function _(e,t,n){j(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<B[2])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return r}function D(e,t,n){j(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<B[3])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error(`${S} integers outside of the safe integer range are not supported`)}function R(e,t){return O(e,0,t.value)}function O(e,t,n){if(n<B[0]){const r=Number(n);e.push([t|r])}else if(n<B[1]){const r=Number(n);e.push([24|t,r])}else if(n<B[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<B[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<B[4]))throw new Error(`${S} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}R.encodedSize=function(e){return O.encodedSize(e.value)},O.encodedSize=function(e){return e<B[0]?1:e<B[1]?2:e<B[2]?3:e<B[3]?5:9},R.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const L=BigInt(-1),F=BigInt(1);function z(e,t){const n=t.value,r="bigint"===typeof n?n*L-F:-1*n-1;O(e,t.type.majorEncoded,r)}function M(e,t,n,r){j(e,t,n+r);const o=E(e,t+n,t+n+r);return new d(f.bytes,o,n+r)}function H(e,t,n,r){return M(e,t,1,n)}function V(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===f.string?b(e.value):e.value),e.encodedBytes}function G(e,t){const n=V(t);O(e,t.type.majorEncoded,n.length),e.push(n)}function W(e,t,n,r,o){const s=n+r;j(e,t,s);const i=new d(f.string,m(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=E(e,t+n,t+s)),i}function K(e,t,n,r){return W(e,t,1,n,r)}z.encodedSize=function(e){const t=e.value,n="bigint"===typeof t?t*L-F:-1*t-1;return n<B[0]?1:n<B[1]?2:n<B[2]?3:n<B[3]?5:9},z.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},G.encodedSize=function(e){const t=V(e);return O.encodedSize(t.length)+t.length},G.compareTokens=function(e,t){return n=V(e),r=V(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(y(e)&&y(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const q=G;function J(e,t,n,r){return new d(f.array,r,n)}function Z(e,t,n,r){return J(0,0,1,n)}function X(e,t){O(e,f.array.majorEncoded,t.value)}function Q(e,t,n,r){return new d(f.map,r,n)}function Y(e,t,n,r){return Q(0,0,1,n)}function ee(e,t){O(e,f.map.majorEncoded,t.value)}function te(e,t,n,r){return new d(f.tag,n,1)}function ne(e,t){O(e,f.tag.majorEncoded,t.value)}X.compareTokens=R.compareTokens,X.encodedSize=function(e){return O.encodedSize(e.value)},ee.compareTokens=R.compareTokens,ee.encodedSize=function(e){return O.encodedSize(e.value)},ne.compareTokens=R.compareTokens,ne.encodedSize=function(e){return O.encodedSize(e.value)};function re(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${S} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${S} Infinity values are not supported`)}return new d(f.float,e,t)}function oe(e,t,n){const r=t.value;if(!1===r)e.push([20|f.float.majorEncoded]);else if(!0===r)e.push([21|f.float.majorEncoded]);else if(null===r)e.push([22|f.float.majorEncoded]);else if(void 0===r)e.push([23|f.float.majorEncoded]);else{let t,s=!1;n&&!0===n.float64||(ce(r),t=ue(ae,1),r===t||Number.isNaN(r)?(ae[0]=249,e.push(ae.slice(0,3)),s=!0):(le(r),t=fe(ae,1),r===t&&(ae[0]=250,e.push(ae.slice(0,5)),s=!0))),s||(o=r,ie.setFloat64(0,o,!1),t=de(ae,1),ae[0]=251,e.push(ae.slice(0,9)))}var o}oe.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){ce(n);let e=ue(ae,1);if(n===e||Number.isNaN(n))return 3;if(le(n),e=fe(ae,1),n===e)return 5}return 9};const se=new ArrayBuffer(9),ie=new DataView(se,1),ae=new Uint8Array(se,0);function ce(e){if(e===1/0)ie.setUint16(0,31744,!1);else if(e===-1/0)ie.setUint16(0,64512,!1);else if(Number.isNaN(e))ie.setUint16(0,32256,!1);else{ie.setFloat32(0,e);const t=ie.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)ie.setUint16(0,31744,!1);else if(0===n)ie.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?ie.setUint16(0,0):e<-14?ie.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):ie.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function ue(e,t){if(e.length-t<2)throw new Error(`${S} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function le(e){ie.setFloat32(0,e,!1)}function fe(e,t){if(e.length-t<4)throw new Error(`${S} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function de(e,t){if(e.length-t<8)throw new Error(`${S} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function he(e,t,n){throw new Error(`${S} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function pe(e){return()=>{throw new Error(`${S} ${e}`)}}oe.compareTokens=R.compareTokens;const ge=[];for(let cl=0;cl<=23;cl++)ge[cl]=he;ge[24]=function(e,t,n,r){return new d(f.uint,x(e,t+1,r),2)},ge[25]=function(e,t,n,r){return new d(f.uint,U(e,t+1,r),3)},ge[26]=function(e,t,n,r){return new d(f.uint,_(e,t+1,r),5)},ge[27]=function(e,t,n,r){return new d(f.uint,D(e,t+1,r),9)},ge[28]=he,ge[29]=he,ge[30]=he,ge[31]=he;for(let cl=32;cl<=55;cl++)ge[cl]=he;ge[56]=function(e,t,n,r){return new d(f.negint,-1-x(e,t+1,r),2)},ge[57]=function(e,t,n,r){return new d(f.negint,-1-U(e,t+1,r),3)},ge[58]=function(e,t,n,r){return new d(f.negint,-1-_(e,t+1,r),5)},ge[59]=function(e,t,n,r){const o=D(e,t+1,r);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new d(f.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${S} integers outside of the safe integer range are not supported`);return new d(f.negint,L-BigInt(o),9)},ge[60]=he,ge[61]=he,ge[62]=he,ge[63]=he;for(let cl=64;cl<=87;cl++)ge[cl]=H;ge[88]=function(e,t,n,r){return M(e,t,2,x(e,t+1,r))},ge[89]=function(e,t,n,r){return M(e,t,3,U(e,t+1,r))},ge[90]=function(e,t,n,r){return M(e,t,5,_(e,t+1,r))},ge[91]=function(e,t,n,r){const o=D(e,t+1,r);if("bigint"===typeof o)throw new Error(`${S} 64-bit integer bytes lengths not supported`);return M(e,t,9,o)},ge[92]=he,ge[93]=he,ge[94]=he,ge[95]=pe("indefinite length bytes/strings are not supported");for(let cl=96;cl<=119;cl++)ge[cl]=K;ge[120]=function(e,t,n,r){return W(e,t,2,x(e,t+1,r),r)},ge[121]=function(e,t,n,r){return W(e,t,3,U(e,t+1,r),r)},ge[122]=function(e,t,n,r){return W(e,t,5,_(e,t+1,r),r)},ge[123]=function(e,t,n,r){const o=D(e,t+1,r);if("bigint"===typeof o)throw new Error(`${S} 64-bit integer string lengths not supported`);return W(e,t,9,o,r)},ge[124]=he,ge[125]=he,ge[126]=he,ge[127]=pe("indefinite length bytes/strings are not supported");for(let cl=128;cl<=151;cl++)ge[cl]=Z;ge[152]=function(e,t,n,r){return J(0,0,2,x(e,t+1,r))},ge[153]=function(e,t,n,r){return J(0,0,3,U(e,t+1,r))},ge[154]=function(e,t,n,r){return J(0,0,5,_(e,t+1,r))},ge[155]=function(e,t,n,r){const o=D(e,t+1,r);if("bigint"===typeof o)throw new Error(`${S} 64-bit integer array lengths not supported`);return J(0,0,9,o)},ge[156]=he,ge[157]=he,ge[158]=he,ge[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${S} indefinite length items not allowed`);return J(0,0,1,1/0)};for(let cl=160;cl<=183;cl++)ge[cl]=Y;ge[184]=function(e,t,n,r){return Q(0,0,2,x(e,t+1,r))},ge[185]=function(e,t,n,r){return Q(0,0,3,U(e,t+1,r))},ge[186]=function(e,t,n,r){return Q(0,0,5,_(e,t+1,r))},ge[187]=function(e,t,n,r){const o=D(e,t+1,r);if("bigint"===typeof o)throw new Error(`${S} 64-bit integer map lengths not supported`);return Q(0,0,9,o)},ge[188]=he,ge[189]=he,ge[190]=he,ge[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${S} indefinite length items not allowed`);return Q(0,0,1,1/0)};for(let cl=192;cl<=215;cl++)ge[cl]=te;ge[216]=function(e,t,n,r){return new d(f.tag,x(e,t+1,r),2)},ge[217]=function(e,t,n,r){return new d(f.tag,U(e,t+1,r),3)},ge[218]=function(e,t,n,r){return new d(f.tag,_(e,t+1,r),5)},ge[219]=function(e,t,n,r){return new d(f.tag,D(e,t+1,r),9)},ge[220]=he,ge[221]=he,ge[222]=he,ge[223]=he;for(let cl=224;cl<=243;cl++)ge[cl]=pe("simple values are not supported");ge[244]=he,ge[245]=he,ge[246]=he,ge[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${S} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new d(f.null,null,1):new d(f.undefined,void 0,1)},ge[248]=pe("simple values are not supported"),ge[249]=function(e,t,n,r){return re(ue(e,t+1),3,r)},ge[250]=function(e,t,n,r){return re(fe(e,t+1),5,r)},ge[251]=function(e,t,n,r){return re(de(e,t+1),9,r)},ge[252]=he,ge[253]=he,ge[254]=he,ge[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${S} indefinite length items not allowed`);return new d(f.break,void 0,1)};const ye=[];for(let cl=0;cl<24;cl++)ye[cl]=new d(f.uint,cl,1);for(let cl=-1;cl>=-24;cl--)ye[31-cl]=new d(f.negint,cl,1);ye[64]=new d(f.bytes,new Uint8Array(0),1),ye[96]=new d(f.string,"",1),ye[128]=new d(f.array,0,1),ye[160]=new d(f.map,0,1),ye[244]=new d(f.false,!1,1),ye[245]=new d(f.true,!0,1),ye[246]=new d(f.null,null,1);const we={float64:!1,mapSorter:function(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,s=me[o].compareTokens(n,r);0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return s},quickEncodeToken:function(e){switch(e.type){case f.false:return v([244]);case f.true:return v([245]);case f.null:return v([246]);case f.bytes:return e.value.length?void 0:v([64]);case f.string:return""===e.value?v([96]):void 0;case f.array:return 0===e.value?v([128]):void 0;case f.map:return 0===e.value?v([160]):void 0;case f.uint:return e.value<24?v([Number(e.value)]):void 0;case f.negint:if(e.value>=-24)return v([31-Number(e.value)])}}};const me=function(){const e=[];return e[f.uint.major]=R,e[f.negint.major]=z,e[f.bytes.major]=G,e[f.string.major]=q,e[f.array.major]=X,e[f.map.major]=ee,e[f.tag.major]=ne,e[f.float.major]=oe,e}(),be=new I;class ve{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${P} object contains circular references`);return new ve(t,e)}}const Ee={null:new d(f.null,null),undefined:new d(f.undefined,void 0),true:new d(f.true,!0),false:new d(f.false,!1),emptyArray:new d(f.array,0),emptyMap:new d(f.map,0)},ke={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new d(e>=0?f.uint:f.negint,e):new d(f.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new d(f.uint,e):new d(f.negint,e),Uint8Array:(e,t,n,r)=>new d(f.bytes,e),string:(e,t,n,r)=>new d(f.string,e),boolean:(e,t,n,r)=>e?Ee.true:Ee.false,null:(e,t,n,r)=>Ee.null,undefined:(e,t,n,r)=>Ee.undefined,ArrayBuffer:(e,t,n,r)=>new d(f.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new d(f.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Ee.emptyArray,new d(f.break)]:Ee.emptyArray;r=ve.createCheck(r,e);const o=[];let s=0;for(const i of e)o[s++]=Ae(i,n,r);return n.addBreakTokens?[new d(f.array,e.length),o,new d(f.break)]:[new d(f.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[Ee.emptyMap,new d(f.break)]:Ee.emptyMap;r=ve.createCheck(r,e);const a=[];let c=0;for(const u of s)a[c++]=[Ae(u,n,r),Ae(o?e.get(u):e[u],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new d(f.map,i),a,new d(f.break)]:[new d(f.map,i),a]}};ke.Map=ke.Object,ke.Buffer=ke.Uint8Array;for(const cl of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ke[`${cl}Array`]=ke.DataView;function Ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=l(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||ke[r];if("function"===typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=ke[r];if(!s)throw new Error(`${P} unsupported type: ${r}`);return s(e,r,t,n)}function Ce(e,t,n,r){if(Array.isArray(t))for(const o of t)Ce(e,o,n,r);else n[t.type.major](e,t,r)}function Te(e,t,n){const r=Ae(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const o=t[r.type.major];if(o.encodedSize){const e=o.encodedSize(r,n),t=new I(e);if(o(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return w(t.chunks[0])}}return be.reset(),Ce(be,r,t,n),be.toBytes(!0)}const $e={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Ie{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=ye[e];if(void 0===t){const n=ge[e];if(!n)throw new Error(`${S} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this._pos,r,this.options)}return this._pos+=t.encodedLength,t}}const Se=Symbol.for("DONE"),Pe=Symbol.for("BREAK");function Ne(e,t){if(e.done())return Se;const n=e.next();if(n.type===f.break)return Pe;if(n.type.terminal)return n.value;if(n.type===f.array)return function(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=Ne(t,n);if(s===Pe){if(e.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed array`)}if(s===Se)throw new Error(`${S} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}(n,e,t);if(n.type===f.map)return function(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=Ne(t,n);if(a===Pe){if(e.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed map`)}if(a===Se)throw new Error(`${S} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${S} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`${S} found repeat map key "${a}"`);const c=Ne(t,n);if(c===Se)throw new Error(`${S} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,c):o[a]=c}return r?s:o}(n,e,t);if(n.type===f.tag){if(t.tags&&"function"===typeof t.tags[n.value]){const r=Ne(e,t);return t.tags[n.value](r)}throw new Error(`${S} tag not supported (${n.value})`)}throw new Error("unsupported")}function je(e,t){const[n,r]=function(e,t){if(!(e instanceof Uint8Array))throw new Error(`${S} data to decode must be a Uint8Array`);const n=(t=Object.assign({},$e,t)).tokenizer||new Ie(e,t),r=Ne(n,t);if(r===Se)throw new Error(`${S} did not find any content to decode`);if(r===Pe)throw new Error(`${S} got unexpected break`);return[r,e.subarray(n.pos())]}(e,t);if(r.length>0)throw new Error(`${S} too many terminals, data makes no sense`);return n}var Be=n(6053);function xe(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const Ue={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=Be.TO.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new d(f.tag,42),new d(f.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},_e={...Ue,typeEncoders:{...Ue.typeEncoders}};const De={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};De.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Be.TO.decode(e.subarray(1))};const Re={...De,tags:De.tags.slice()},Oe="dag-cbor",Le=113,Fe=e=>{return t=e,n=Ue,n=Object.assign({},we,n),Te(t,me,n);var t,n},ze=e=>je(xe(e),De),Me=["string","number","bigint","symbol"],He=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ve(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(Me.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(He.includes(t))return t;return}(e);return n||"Object"}class Ge{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Ge.uint=new Ge(0,"uint",!0),Ge.negint=new Ge(1,"negint",!0),Ge.bytes=new Ge(2,"bytes",!0),Ge.string=new Ge(3,"string",!0),Ge.array=new Ge(4,"array",!1),Ge.map=new Ge(5,"map",!1),Ge.tag=new Ge(6,"tag",!1),Ge.float=new Ge(7,"float",!0),Ge.false=new Ge(7,"false",!0),Ge.true=new Ge(7,"true",!0),Ge.null=new Ge(7,"null",!0),Ge.undefined=new Ge(7,"undefined",!0),Ge.break=new Ge(7,"break",!0);class We{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ke=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,qe=new TextDecoder,Je=new TextEncoder;function Ze(e){return Ke&&globalThis.Buffer.isBuffer(e)}function Xe(e){return e instanceof Uint8Array?Ze(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const Qe=Ke?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):ot(e,t,n):(e,t,n)=>n-t>64?qe.decode(e.subarray(t,n)):ot(e,t,n),Ye=Ke?e=>e.length>64?globalThis.Buffer.from(e):rt(e):e=>e.length>64?Je.encode(e):rt(e),et=Ke?(e,t,n)=>Ze(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),tt=Ke?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),Xe(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},nt=Ke?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function rt(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function ot(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,c;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128===(192&n)&&(c=(31&o)<<6|63&n,c>127&&(s=c));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(c=(15&o)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return it(r)}const st=4096;function it(e){const t=e.length;if(t<=st)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=st));return n}class at{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=nt(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=et(n,0,this.cursor)}else e=tt(this.chunks,this.cursor);return t&&this.reset(),e}}const ct="CBOR decode error:",ut="CBOR encode error:",lt=[];function ft(e,t,n){if(e.length-t<n)throw new Error(`${ct} not enough data for type`)}lt[23]=1,lt[24]=2,lt[25]=3,lt[26]=5,lt[27]=9;const dt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ht(e,t,n){ft(e,t,1);const r=e[t];if(!0===n.strict&&r<dt[0])throw new Error(`${ct} integer encoded in more bytes than necessary (strict decode)`);return r}function pt(e,t,n){ft(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<dt[1])throw new Error(`${ct} integer encoded in more bytes than necessary (strict decode)`);return r}function gt(e,t,n){ft(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<dt[2])throw new Error(`${ct} integer encoded in more bytes than necessary (strict decode)`);return r}function yt(e,t,n){ft(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<dt[3])throw new Error(`${ct} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error(`${ct} integers outside of the safe integer range are not supported`)}function wt(e,t){return mt(e,0,t.value)}function mt(e,t,n){if(n<dt[0]){const r=Number(n);e.push([t|r])}else if(n<dt[1]){const r=Number(n);e.push([24|t,r])}else if(n<dt[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<dt[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<dt[4]))throw new Error(`${ct} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}wt.encodedSize=function(e){return mt.encodedSize(e.value)},mt.encodedSize=function(e){return e<dt[0]?1:e<dt[1]?2:e<dt[2]?3:e<dt[3]?5:9},wt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const bt=BigInt(-1),vt=BigInt(1);function Et(e,t){const n=t.value,r="bigint"===typeof n?n*bt-vt:-1*n-1;mt(e,t.type.majorEncoded,r)}function kt(e,t,n,r){ft(e,t,n+r);const o=et(e,t+n,t+n+r);return new We(Ge.bytes,o,n+r)}function At(e,t,n,r){return kt(e,t,1,n)}function Ct(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Ge.string?Ye(e.value):e.value),e.encodedBytes}function Tt(e,t){const n=Ct(t);mt(e,t.type.majorEncoded,n.length),e.push(n)}function $t(e,t,n,r,o){const s=n+r;ft(e,t,s);const i=new We(Ge.string,Qe(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=et(e,t+n,t+s)),i}function It(e,t,n,r){return $t(e,t,1,n,r)}Et.encodedSize=function(e){const t=e.value,n="bigint"===typeof t?t*bt-vt:-1*t-1;return n<dt[0]?1:n<dt[1]?2:n<dt[2]?3:n<dt[3]?5:9},Et.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},Tt.encodedSize=function(e){const t=Ct(e);return mt.encodedSize(t.length)+t.length},Tt.compareTokens=function(e,t){return n=Ct(e),r=Ct(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(Ze(e)&&Ze(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const St=Tt;function Pt(e,t,n,r){return new We(Ge.array,r,n)}function Nt(e,t,n,r){return Pt(0,0,1,n)}function jt(e,t){mt(e,Ge.array.majorEncoded,t.value)}function Bt(e,t,n,r){return new We(Ge.map,r,n)}function xt(e,t,n,r){return Bt(0,0,1,n)}function Ut(e,t){mt(e,Ge.map.majorEncoded,t.value)}function _t(e,t,n,r){return new We(Ge.tag,n,1)}function Dt(e,t){mt(e,Ge.tag.majorEncoded,t.value)}jt.compareTokens=wt.compareTokens,jt.encodedSize=function(e){return mt.encodedSize(e.value)},Ut.compareTokens=wt.compareTokens,Ut.encodedSize=function(e){return mt.encodedSize(e.value)},Dt.compareTokens=wt.compareTokens,Dt.encodedSize=function(e){return mt.encodedSize(e.value)};function Rt(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${ct} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${ct} Infinity values are not supported`)}return new We(Ge.float,e,t)}function Ot(e,t,n){const r=t.value;if(!1===r)e.push([20|Ge.float.majorEncoded]);else if(!0===r)e.push([21|Ge.float.majorEncoded]);else if(null===r)e.push([22|Ge.float.majorEncoded]);else if(void 0===r)e.push([23|Ge.float.majorEncoded]);else{let t,s=!1;n&&!0===n.float64||(Mt(r),t=Ht(zt,1),r===t||Number.isNaN(r)?(zt[0]=249,e.push(zt.slice(0,3)),s=!0):(Vt(r),t=Gt(zt,1),r===t&&(zt[0]=250,e.push(zt.slice(0,5)),s=!0))),s||(o=r,Ft.setFloat64(0,o,!1),t=Wt(zt,1),zt[0]=251,e.push(zt.slice(0,9)))}var o}Ot.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){Mt(n);let e=Ht(zt,1);if(n===e||Number.isNaN(n))return 3;if(Vt(n),e=Gt(zt,1),n===e)return 5}return 9};const Lt=new ArrayBuffer(9),Ft=new DataView(Lt,1),zt=new Uint8Array(Lt,0);function Mt(e){if(e===1/0)Ft.setUint16(0,31744,!1);else if(e===-1/0)Ft.setUint16(0,64512,!1);else if(Number.isNaN(e))Ft.setUint16(0,32256,!1);else{Ft.setFloat32(0,e);const t=Ft.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Ft.setUint16(0,31744,!1);else if(0===n)Ft.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Ft.setUint16(0,0):e<-14?Ft.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Ft.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function Ht(e,t){if(e.length-t<2)throw new Error(`${ct} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function Vt(e){Ft.setFloat32(0,e,!1)}function Gt(e,t){if(e.length-t<4)throw new Error(`${ct} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Wt(e,t){if(e.length-t<8)throw new Error(`${ct} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Kt(e,t,n){throw new Error(`${ct} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function qt(e){return()=>{throw new Error(`${ct} ${e}`)}}Ot.compareTokens=wt.compareTokens;const Jt=[];for(let cl=0;cl<=23;cl++)Jt[cl]=Kt;Jt[24]=function(e,t,n,r){return new We(Ge.uint,ht(e,t+1,r),2)},Jt[25]=function(e,t,n,r){return new We(Ge.uint,pt(e,t+1,r),3)},Jt[26]=function(e,t,n,r){return new We(Ge.uint,gt(e,t+1,r),5)},Jt[27]=function(e,t,n,r){return new We(Ge.uint,yt(e,t+1,r),9)},Jt[28]=Kt,Jt[29]=Kt,Jt[30]=Kt,Jt[31]=Kt;for(let cl=32;cl<=55;cl++)Jt[cl]=Kt;Jt[56]=function(e,t,n,r){return new We(Ge.negint,-1-ht(e,t+1,r),2)},Jt[57]=function(e,t,n,r){return new We(Ge.negint,-1-pt(e,t+1,r),3)},Jt[58]=function(e,t,n,r){return new We(Ge.negint,-1-gt(e,t+1,r),5)},Jt[59]=function(e,t,n,r){const o=yt(e,t+1,r);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new We(Ge.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${ct} integers outside of the safe integer range are not supported`);return new We(Ge.negint,bt-BigInt(o),9)},Jt[60]=Kt,Jt[61]=Kt,Jt[62]=Kt,Jt[63]=Kt;for(let cl=64;cl<=87;cl++)Jt[cl]=At;Jt[88]=function(e,t,n,r){return kt(e,t,2,ht(e,t+1,r))},Jt[89]=function(e,t,n,r){return kt(e,t,3,pt(e,t+1,r))},Jt[90]=function(e,t,n,r){return kt(e,t,5,gt(e,t+1,r))},Jt[91]=function(e,t,n,r){const o=yt(e,t+1,r);if("bigint"===typeof o)throw new Error(`${ct} 64-bit integer bytes lengths not supported`);return kt(e,t,9,o)},Jt[92]=Kt,Jt[93]=Kt,Jt[94]=Kt,Jt[95]=qt("indefinite length bytes/strings are not supported");for(let cl=96;cl<=119;cl++)Jt[cl]=It;Jt[120]=function(e,t,n,r){return $t(e,t,2,ht(e,t+1,r),r)},Jt[121]=function(e,t,n,r){return $t(e,t,3,pt(e,t+1,r),r)},Jt[122]=function(e,t,n,r){return $t(e,t,5,gt(e,t+1,r),r)},Jt[123]=function(e,t,n,r){const o=yt(e,t+1,r);if("bigint"===typeof o)throw new Error(`${ct} 64-bit integer string lengths not supported`);return $t(e,t,9,o,r)},Jt[124]=Kt,Jt[125]=Kt,Jt[126]=Kt,Jt[127]=qt("indefinite length bytes/strings are not supported");for(let cl=128;cl<=151;cl++)Jt[cl]=Nt;Jt[152]=function(e,t,n,r){return Pt(0,0,2,ht(e,t+1,r))},Jt[153]=function(e,t,n,r){return Pt(0,0,3,pt(e,t+1,r))},Jt[154]=function(e,t,n,r){return Pt(0,0,5,gt(e,t+1,r))},Jt[155]=function(e,t,n,r){const o=yt(e,t+1,r);if("bigint"===typeof o)throw new Error(`${ct} 64-bit integer array lengths not supported`);return Pt(0,0,9,o)},Jt[156]=Kt,Jt[157]=Kt,Jt[158]=Kt,Jt[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${ct} indefinite length items not allowed`);return Pt(0,0,1,1/0)};for(let cl=160;cl<=183;cl++)Jt[cl]=xt;Jt[184]=function(e,t,n,r){return Bt(0,0,2,ht(e,t+1,r))},Jt[185]=function(e,t,n,r){return Bt(0,0,3,pt(e,t+1,r))},Jt[186]=function(e,t,n,r){return Bt(0,0,5,gt(e,t+1,r))},Jt[187]=function(e,t,n,r){const o=yt(e,t+1,r);if("bigint"===typeof o)throw new Error(`${ct} 64-bit integer map lengths not supported`);return Bt(0,0,9,o)},Jt[188]=Kt,Jt[189]=Kt,Jt[190]=Kt,Jt[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${ct} indefinite length items not allowed`);return Bt(0,0,1,1/0)};for(let cl=192;cl<=215;cl++)Jt[cl]=_t;Jt[216]=function(e,t,n,r){return new We(Ge.tag,ht(e,t+1,r),2)},Jt[217]=function(e,t,n,r){return new We(Ge.tag,pt(e,t+1,r),3)},Jt[218]=function(e,t,n,r){return new We(Ge.tag,gt(e,t+1,r),5)},Jt[219]=function(e,t,n,r){return new We(Ge.tag,yt(e,t+1,r),9)},Jt[220]=Kt,Jt[221]=Kt,Jt[222]=Kt,Jt[223]=Kt;for(let cl=224;cl<=243;cl++)Jt[cl]=qt("simple values are not supported");Jt[244]=Kt,Jt[245]=Kt,Jt[246]=Kt,Jt[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${ct} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new We(Ge.null,null,1):new We(Ge.undefined,void 0,1)},Jt[248]=qt("simple values are not supported"),Jt[249]=function(e,t,n,r){return Rt(Ht(e,t+1),3,r)},Jt[250]=function(e,t,n,r){return Rt(Gt(e,t+1),5,r)},Jt[251]=function(e,t,n,r){return Rt(Wt(e,t+1),9,r)},Jt[252]=Kt,Jt[253]=Kt,Jt[254]=Kt,Jt[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${ct} indefinite length items not allowed`);return new We(Ge.break,void 0,1)};const Zt=[];for(let cl=0;cl<24;cl++)Zt[cl]=new We(Ge.uint,cl,1);for(let cl=-1;cl>=-24;cl--)Zt[31-cl]=new We(Ge.negint,cl,1);Zt[64]=new We(Ge.bytes,new Uint8Array(0),1),Zt[96]=new We(Ge.string,"",1),Zt[128]=new We(Ge.array,0,1),Zt[160]=new We(Ge.map,0,1),Zt[244]=new We(Ge.false,!1,1),Zt[245]=new We(Ge.true,!0,1),Zt[246]=new We(Ge.null,null,1);!function(){const e=[];e[Ge.uint.major]=wt,e[Ge.negint.major]=Et,e[Ge.bytes.major]=Tt,e[Ge.string.major]=St,e[Ge.array.major]=jt,e[Ge.map.major]=Ut,e[Ge.tag.major]=Dt,e[Ge.float.major]=Ot}();const Xt=new at;class Qt{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${ut} object contains circular references`);return new Qt(t,e)}}const Yt={null:new We(Ge.null,null),undefined:new We(Ge.undefined,void 0),true:new We(Ge.true,!0),false:new We(Ge.false,!1),emptyArray:new We(Ge.array,0),emptyMap:new We(Ge.map,0)},en={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new We(e>=0?Ge.uint:Ge.negint,e):new We(Ge.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new We(Ge.uint,e):new We(Ge.negint,e),Uint8Array:(e,t,n,r)=>new We(Ge.bytes,e),string:(e,t,n,r)=>new We(Ge.string,e),boolean:(e,t,n,r)=>e?Yt.true:Yt.false,null:(e,t,n,r)=>Yt.null,undefined:(e,t,n,r)=>Yt.undefined,ArrayBuffer:(e,t,n,r)=>new We(Ge.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new We(Ge.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Yt.emptyArray,new We(Ge.break)]:Yt.emptyArray;r=Qt.createCheck(r,e);const o=[];let s=0;for(const i of e)o[s++]=tn(i,n,r);return n.addBreakTokens?[new We(Ge.array,e.length),o,new We(Ge.break)]:[new We(Ge.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[Yt.emptyMap,new We(Ge.break)]:Yt.emptyMap;r=Qt.createCheck(r,e);const a=[];let c=0;for(const u of s)a[c++]=[tn(u,n,r),tn(o?e.get(u):e[u],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new We(Ge.map,i),a,new We(Ge.break)]:[new We(Ge.map,i),a]}};en.Map=en.Object,en.Buffer=en.Uint8Array;for(const cl of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))en[`${cl}Array`]=en.DataView;function tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=Ve(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||en[r];if("function"===typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=en[r];if(!s)throw new Error(`${ut} unsupported type: ${r}`);return s(e,r,t,n)}function nn(e,t,n,r){if(Array.isArray(t))for(const o of t)nn(e,o,n,r);else n[t.type.major](e,t,r)}function rn(e,t,n){const r=tn(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const o=t[r.type.major];if(o.encodedSize){const e=o.encodedSize(r,n),t=new at(e);if(o(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return Xe(t.chunks[0])}}return Xt.reset(),nn(Xt,r,t,n),Xt.toBytes(!0)}const on={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class sn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=Zt[e];if(void 0===t){const n=Jt[e];if(!n)throw new Error(`${ct} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this._pos,r,this.options)}return this._pos+=t.encodedLength,t}}const an=Symbol.for("DONE"),cn=Symbol.for("BREAK");function un(e,t){if(e.done())return an;const n=e.next();if(n.type===Ge.break)return cn;if(n.type.terminal)return n.value;if(n.type===Ge.array)return function(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=un(t,n);if(s===cn){if(e.value===1/0)break;throw new Error(`${ct} got unexpected break to lengthed array`)}if(s===an)throw new Error(`${ct} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}(n,e,t);if(n.type===Ge.map)return function(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=un(t,n);if(a===cn){if(e.value===1/0)break;throw new Error(`${ct} got unexpected break to lengthed map`)}if(a===an)throw new Error(`${ct} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${ct} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`${ct} found repeat map key "${a}"`);const c=un(t,n);if(c===an)throw new Error(`${ct} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,c):o[a]=c}return r?s:o}(n,e,t);if(n.type===Ge.tag){if(t.tags&&"function"===typeof t.tags[n.value]){const r=un(e,t);return t.tags[n.value](r)}throw new Error(`${ct} tag not supported (${n.value})`)}throw new Error("unsupported")}function ln(e,t){const[n,r]=function(e,t){if(!(e instanceof Uint8Array))throw new Error(`${ct} data to decode must be a Uint8Array`);const n=(t=Object.assign({},on,t)).tokenizer||new sn(e,t),r=un(n,t);if(r===an)throw new Error(`${ct} did not find any content to decode`);if(r===cn)throw new Error(`${ct} got unexpected break`);return[r,e.subarray(n.pos())]}(e,t);if(r.length>0)throw new Error(`${ct} too many terminals, data makes no sense`);return n}class fn extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Ge.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Ge.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Ge.uint.major](e,t){this.prefix(e);const n=String(t.value),r=[];for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);e.push(r)}[Ge.negint.major](e,t){this[Ge.uint.major](e,t)}[Ge.bytes.major](e,t){throw new Error(`${ut} unsupported type: Uint8Array`)}[Ge.string.major](e,t){this.prefix(e);const n=Ye(JSON.stringify(t.value));e.push(n.length>32?Xe(n):n)}[Ge.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Ge.array,elements:0}),e.push([91])}[Ge.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Ge.map,elements:0}),e.push([123])}[Ge.tag.major](e,t){}[Ge.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Ge.array)e.push([93]);else{if(t.type!==Ge.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${ut} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const n=String(t.value),r=[];let o=!1;for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s),o||46!==r[s]&&101!==r[s]&&69!==r[s]||(o=!0);o||(r.push(46),r.push(48)),e.push(r)}}const dn={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${ut} complex map keys are not supported`);const n=e[0],r=t[0];if(n.type!==Ge.string||r.type!==Ge.string)throw new Error(`${ut} non-string map keys are not supported`);if(n<r)return-1;if(n>r)return 1;throw new Error(`${ut} unexpected duplicate map keys, this is not supported`)}};class hn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${ct} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${ct} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let t=!1,n=!1;const r=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this._pos++}};if(45===this.ch()&&(t=!0,this._pos++),48===this.ch()){if(this._pos++,46!==this.ch())return new We(Ge.uint,0,this._pos-e);this._pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${ct} unexpected token at position ${this._pos}`);if(!this.done()&&46===this.ch()){if(n)throw new Error(`${ct} unexpected token at position ${this._pos}`);n=!0,this._pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this._pos++,this.done()||43!==this.ch()&&45!==this.ch()||this._pos++,r([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),s=parseFloat(o);return n?new We(Ge.float,s,this._pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new We(s>=0?Ge.uint:Ge.negint,s,this._pos-e):new We(s>=0?Ge.uint:Ge.negint,BigInt(o),this._pos-e)}parseString(){if(34!==this.ch())throw new Error(`${ct} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,s=0;o<this.data.length&&s<65536;o++,s++){const e=this.data[o];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new We(Ge.string,e,s)}}const e=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${ct} unexpected end of unicode escape sequence at position ${this._pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${ct} unexpected unicode escape character at position ${this._pos}`);t=t-65+10}e=16*e+t,this._pos++}return e},r=()=>{const e=this.ch();let n,r,o,s,i=null,a=e>239?4:e>223?3:e>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${ct} unexpected unicode sequence at position ${this._pos}`);switch(a){case 1:e<128&&(i=e);break;case 2:n=this.data[this._pos+1],128===(192&n)&&(s=(31&e)<<6|63&n,s>127&&(i=s));break;case 3:n=this.data[this._pos+1],r=this.data[this._pos+2],128===(192&n)&&128===(192&r)&&(s=(15&e)<<12|(63&n)<<6|63&r,s>2047&&(s<55296||s>57343)&&(i=s));break;case 4:n=this.data[this._pos+1],r=this.data[this._pos+2],o=this.data[this._pos+3],128===(192&n)&&128===(192&r)&&128===(192&o)&&(s=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&o,s>65535&&s<1114112&&(i=s))}null===i?(i=65533,a=1):i>65535&&(i-=65536,t.push(i>>>10&1023|55296),i=56320|1023&i),t.push(i),this._pos+=a};for(;!this.done();){const o=this.ch();let s;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${ct} unexpected string termination at position ${this._pos}`);switch(s=this.ch(),this._pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${ct} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new We(Ge.string,it(t),this._pos-e);default:if(o<32)throw new Error(`${ct} invalid control character at position ${this._pos}`);o<128?(t.push(o),this._pos++):r()}}throw new Error(`${ct} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new We(Ge.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new We(Ge.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new We(Ge.null,null,4);case 102:return this.expect([102,97,108,115,101]),new We(Ge.false,!1,5);case 116:return this.expect([116,114,117,101]),new We(Ge.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${ct} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this._pos++,this.skipWhitespace(),new We(Ge.break,void 0,1);if(44!==this.ch())throw new Error(`${ct} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this._pos++,this.skipWhitespace(),new We(Ge.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new We(Ge.break,void 0,1);if(44!==this.ch())throw new Error(`${ct} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this._pos++,this.skipWhitespace(),new We(Ge.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${ct} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${ct} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}var pn=n(2877),gn=n(2469);function yn(e){const t=gn.base64.encode(e).slice(1);return[new We(Ge.map,1/0,1),new We(Ge.string,"/",1),new We(Ge.map,1/0,1),new We(Ge.string,"bytes",5),new We(Ge.string,t,t.length),new We(Ge.break,void 0,1),new We(Ge.break,void 0,1)]}function wn(e){return yn(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}const mn={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=pn.TO.asCID(e);if(!t)return null;const n=t.toString();return[new We(Ge.map,1/0,1),new We(Ge.string,"/",1),new We(Ge.string,n,n.length),new We(Ge.break,void 0,1)]},Buffer:yn,Uint8Array:yn,Int8Array:wn,Uint16Array:wn,Int16Array:wn,Uint32Array:wn,Int32Array:wn,Float32Array:wn,Float64Array:wn,Uint8ClampedArray:wn,BigInt64Array:wn,BigUint64Array:wn,DataView:wn,ArrayBuffer:function(e){return yn(new Uint8Array(e))},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class bn extends hn{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Ge.map){const e=this._next();if(e.type===Ge.string&&"/"===e.value){const e=this._next();if(e.type===Ge.string){if(this._next().type!==Ge.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new We(Ge.tag,42,0)}if(e.type===Ge.map){const e=this._next();if(e.type===Ge.string&&"bytes"===e.value){const e=this._next();if(e.type===Ge.string){for(let e=0;e<2;e++){if(this._next().type!==Ge.break)throw new Error("Invalid encoded Bytes form")}const t=gn.base64.decode(`m${e.value}`);return new We(Ge.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const vn={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};vn.tags[42]=pn.TO.parse;const En="dag-json",kn=297,An=e=>{return t=e,n=mn,n=Object.assign({},dn,n),rn(t,new fn,n);var t,n},Cn=e=>{const t=function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e);return function(e,t){return ln(e,t=Object.assign({tokenizer:new hn(e,t)},t))}(t,Object.assign(vn,{tokenizer:new bn(t,vn)}))},Tn=e=>$n.decode(An(e)),$n=new TextDecoder,In=e=>Cn(Sn.encode(e)),Sn=new TextEncoder,Pn=new TextDecoder;function Nn(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(n+=r<28?(127&o)<<r:(127&o)*2**r,o<128)break}return[n,t]}function jn(e,t){let n;[n,t]=Nn(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function Bn(e,t){let n;return[n,t]=Nn(e,t),[7&n,n>>3,t]}function xn(e){const t={},n=e.length;let r=0;for(;r<n;){let n,o;if([n,o,r]=Bn(e,r),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=jn(e,r)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,r]=jn(e,r),t.Name=Pn.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[t.Tsize,r]=Nn(e,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const Un=new TextEncoder,_n=2**32,Dn=2**31;function Rn(e,t){let n=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");n=Fn(t,n,e.Tsize)-1,t[n]=24}if("string"===typeof e.Name){const r=Un.encode(e.Name);n-=r.length,t.set(r,n),n=Fn(t,n,r.length)-1,t[n]=18}return e.Hash&&(n-=e.Hash.length,t.set(e.Hash,n),n=Fn(t,n,e.Hash.length)-1,t[n]=10),t.length-n}function On(e){const t=function(e){let t=0;if(e.Data){const n=e.Data.length;t+=1+n+zn(n)}if(e.Links)for(const n of e.Links){const e=Ln(n);t+=1+e+zn(e)}return t}(e),n=new Uint8Array(t);let r=t;if(e.Data&&(r-=e.Data.length,n.set(e.Data,r),r=Fn(n,r,e.Data.length)-1,n[r]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const t=Rn(e.Links[o],n.subarray(0,r));r-=t,r=Fn(n,r,t)-1,n[r]=18}return n}function Ln(e){let t=0;if(e.Hash){const n=e.Hash.length;t+=1+n+zn(n)}if("string"===typeof e.Name){const n=Un.encode(e.Name).length;t+=1+n+zn(n)}return"number"===typeof e.Tsize&&(t+=1+zn(e.Tsize)),t}function Fn(e,t,n){const r=t-=zn(n);for(;n>=Dn;)e[t++]=127&n|128,n/=128;for(;n>=128;)e[t++]=127&n|128,n>>>=7;return e[t]=n,r}function zn(e){return e%2===0&&e++,Math.floor((function(e){let t=0;e>=_n&&(e=Math.floor(e/_n),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+Mn[e]}(e)+6)/7)}const Mn=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Hn=["Data","Links"],Vn=["Hash","Name","Tsize"],Gn=new TextEncoder;function Wn(e,t){if(e===t)return 0;const n=e.Name?Gn.encode(e.Name):[],r=t.Name?Gn.encode(t.Name):[];let o=n.length,s=r.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(n[i]!==r[i]){o=n[i],s=r[i];break}return o<s?-1:s<o?1:0}function Kn(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function qn(e){if("object"===typeof e.asCID){const t=Be.TO.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let r=Be.TO.asCID(e.Hash);try{r||("string"===typeof e.Hash?r=Be.TO.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=Be.TO.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(t.Name=e.Name),"number"===typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Jn(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Gn.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(qn),t.Links.sort(Wn)}else t.Links=[];return t}function Zn(e){if(!e||"object"!==typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Kn(e,Hn))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const n=e.Links[t];if(!n||"object"!==typeof n||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Kn(n,Vn))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==n.Hash||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!==typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize){if("number"!==typeof n.Tsize||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===Wn(n,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Xn(e){return Jn({Data:e,Links:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]})}function Qn(e,t,n){return qn({Hash:n,Name:e,Tsize:t})}const Yn="dag-pb",er=112;function tr(e){Zn(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),On(t)}function nr(e){const t=function(e){const t=e.length;let n,r,o=0,s=!1;for(;o<t;){let t,i;if([t,i,o]=Bn(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===i){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,o]=jn(e,o),n&&(s=!0)}else{if(2!==i)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${i}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;n||(n=[]),[t,o]=jn(e,o),n.push(xn(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return r&&(i.Data=r),i.Links=n||[],i}(function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e)),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map((e=>{const t={};try{t.Hash=Be.TO.decode(e.Hash)}catch(n){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),n}new Uint8Array(0);function rr(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var or=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var f=0,d=s-1;(0!==l||f<o)&&-1!==d;d--,f++)l+=a*i[d]>>>0,i[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var h=s-o;h!==s&&0===i[h];)h++;for(var p=new Uint8Array(r+(s-h)),g=r;h!==s;)p[g++]=i[h++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*l+1>>>0,u=new Uint8Array(i);o!==s;){for(var f=t[o],d=0,h=i-1;(0!==f||d<r)&&-1!==h;h--,d++)f+=256*u[h]>>>0,u[h]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=d,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}};const sr=or;class ir{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ar{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ur(this,e)}}class cr{decoders;constructor(e){this.decoders=e}or(e){return ur(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(null!=n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function ur(e,t){return new cr({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class lr{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new ir(e,t,n),this.decoder=new ar(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function fr({name:e,prefix:t,encode:n,decode:r}){return new lr(e,t,n,r)}function dr({name:e,prefix:t,alphabet:n}){const{encode:r,decode:o}=sr(n,e);return fr({prefix:t,name:e,encode:r,decode:e=>rr(o(e))})}function hr({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return fr({prefix:t,name:e,encode:e=>function(e,t,n){const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(0!==i&&(s+=t[o&a<<n-i]),r)for(;0!==(s.length*n&7);)s+="=";return s}(e,r,n),decode:t=>function(e,t,n,r){const o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=o[e[l]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return i}(t,r,n,e)})}hr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const pr=hr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});hr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function gr(e){return pr.encode(e).slice(1)}function yr(e){return pr.decode(`u${e}`)}const wr=hr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mr=(hr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));dr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var br=function e(t,n,r){n=n||[];var o=r=r||0;for(;t>=kr;)n[r++]=255&t|vr,t/=128;for(;t&Er;)n[r++]=255&t|vr,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},vr=128,Er=-128,kr=Math.pow(2,31);var Ar=function e(t,n){var r,o=0,s=0,i=n=n||0,a=t.length;do{if(i>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],o+=s<28?(r&Tr)<<s:(r&Tr)*Math.pow(2,s),s+=7}while(r>=Cr);return e.bytes=i-n,o},Cr=128,Tr=127;var $r=Math.pow(2,7),Ir=Math.pow(2,14),Sr=Math.pow(2,21),Pr=Math.pow(2,28),Nr=Math.pow(2,35),jr=Math.pow(2,42),Br=Math.pow(2,49),xr=Math.pow(2,56),Ur=Math.pow(2,63);const _r={encode:br,decode:Ar,encodingLength:function(e){return e<$r?1:e<Ir?2:e<Sr?3:e<Pr?4:e<Nr?5:e<jr?6:e<Br?7:e<xr?8:e<Ur?9:10}};function Dr(e,t=0){return[_r.decode(e,t),_r.decode.bytes]}function Rr(e,t,n=0){return _r.encode(e,t,n),t}function Or(e){return _r.encodingLength(e)}class Lr{code;size;digest;bytes;constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}function Fr(e,t){const{bytes:n,version:r}=e;return 0===r?function(e,t,n){const{prefix:r}=n;if(r!==mr.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o}(n,Mr(e),t??mr.encoder):function(e,t,n){const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o}(n,Mr(e),t??wr.encoder)}const zr=new WeakMap;function Mr(e){const t=zr.get(e);if(null==t){const t=new Map;return zr.set(e,t),t}return t}class Hr{code;version;multihash;bytes;"/";constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Vr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Gr)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Hr.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=function(e,t){const n=t.byteLength,r=Or(e),o=r+Or(n),s=new Uint8Array(o+n);return Rr(e,s,0),Rr(n,s,r),s.set(t,o),new Lr(e,n,t,s)}(e,t);return Hr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Hr.equals(this,e)}static equals(e,t){const n=t;return null!=n&&e.code===n.code&&e.version===n.version&&function(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e.bytes,n.bytes)}}(e.multihash,n.multihash)}toString(e){return Fr(this,e)}toJSON(){return{"/":Fr(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Hr)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new Hr(e,n,r,o??Wr(e,n,r.bytes))}if(!0===t[Kr]){const{version:e,multihash:n,code:r}=t,o=function(e){const t=rr(e),[n,r]=Dr(t),[o,s]=Dr(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Lr(n,o,i,t)}(n);return Hr.create(e,r,o)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Vr)throw new Error(`Version 0 CID must use dag-pb (code: ${Vr}) block encoding`);return new Hr(e,t,n,n.bytes);case 1:{const r=Wr(e,t,n.bytes);return new Hr(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Hr.create(0,Vr,e)}static createV1(e,t){return Hr.create(1,e,t)}static decode(e){const[t,n]=Hr.decodeFirst(e);if(0!==n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Hr.inspectBytes(e),n=t.size-t.multihashSize,r=rr(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),s=new Lr(t.multihashCode,t.digestSize,o,r);return[0===t.version?Hr.createV0(s):Hr.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=Dr(e.subarray(t));return t+=r,n};let r=n(),o=Vr;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=t,i=n(),a=n(),c=t+a;return{version:r,codec:o,multihashCode:i,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[n,r]=function(e,t){switch(e[0]){case"Q":{const n=t??mr;return[mr.prefix,n.decode(`${mr.prefix}${e}`)]}case mr.prefix:{const n=t??mr;return[mr.prefix,n.decode(e)]}case wr.prefix:{const n=t??wr;return[wr.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),o=Hr.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Mr(o).set(n,e),o}}const Vr=112,Gr=18;function Wr(e,t,n){const r=Or(e),o=r+Or(t),s=new Uint8Array(o+n.byteLength);return Rr(e,s,0),Rr(t,s,r),s.set(n,o),s}const Kr=Symbol.for("@ipld/js-cid/CID");function qr(e){const t={signature:yr(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=yr(e.protected)),t}function Jr(e){const t={signature:gr(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=gr(e.protected)),t}function Zr(e){const t={payload:gr(e.payload),signatures:e.signatures.map(Jr)};try{return t.pld=Xr((n=e.payload,JSON.parse((new TextDecoder).decode(n)))),t}catch(r){try{return t.link=Hr.decode(new Uint8Array(e.payload)),t}catch(r){throw new Error("Invalid payload, must be either JSON or CID")}}var n}function Xr(e){if("string"===typeof e){if(e.startsWith("ipfs://"))return Hr.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Xr);if(function(e){return"object"===typeof e&&null!==e}(e)){const t={};for(const n in e)t[n]=Xr(e[n]);return t}}return e}function Qr(e){const t={};return e.encrypted_key&&(t.encrypted_key=yr(e.encrypted_key)),e.header&&(t.header=e.header),t}function Yr(e){const t={};return e.encrypted_key&&(t.encrypted_key=gr(e.encrypted_key)),e.header&&(t.header=e.header),t}const eo=["string","number","bigint","symbol"],to=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function no(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(eo.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(to.includes(t))return t;return}(e);return n||"Object"}class ro{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}ro.uint=new ro(0,"uint",!0),ro.negint=new ro(1,"negint",!0),ro.bytes=new ro(2,"bytes",!0),ro.string=new ro(3,"string",!0),ro.array=new ro(4,"array",!1),ro.map=new ro(5,"map",!1),ro.tag=new ro(6,"tag",!1),ro.float=new ro(7,"float",!0),ro.false=new ro(7,"false",!0),ro.true=new ro(7,"true",!0),ro.null=new ro(7,"null",!0),ro.undefined=new ro(7,"undefined",!0),ro.break=new ro(7,"break",!0);class oo{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const so=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,io=new TextDecoder,ao=new TextEncoder;function co(e){return so&&globalThis.Buffer.isBuffer(e)}function uo(e){return e instanceof Uint8Array?co(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const lo=so?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):mo(e,t,n):(e,t,n)=>n-t>64?io.decode(e.subarray(t,n)):mo(e,t,n),fo=so?e=>e.length>64?globalThis.Buffer.from(e):wo(e):e=>e.length>64?ao.encode(e):wo(e),ho=e=>Uint8Array.from(e),po=so?(e,t,n)=>co(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),go=so?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),uo(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},yo=so?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function wo(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function mo(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,c;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128===(192&n)&&(c=(31&o)<<6|63&n,c>127&&(s=c));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(c=(15&o)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return function(e){const t=e.length;if(t<=bo)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=bo));return n}(r)}const bo=4096;class vo{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=yo(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=po(n,0,this.cursor)}else t=go(this.chunks,this.cursor);return e&&this.reset(),t}}const Eo="CBOR decode error:",ko="CBOR encode error:",Ao=[];function Co(e,t,n){if(e.length-t<n)throw new Error(`${Eo} not enough data for type`)}Ao[23]=1,Ao[24]=2,Ao[25]=3,Ao[26]=5,Ao[27]=9;const To=[24,256,65536,4294967296,BigInt("18446744073709551616")];function $o(e,t,n){Co(e,t,1);const r=e[t];if(!0===n.strict&&r<To[0])throw new Error(`${Eo} integer encoded in more bytes than necessary (strict decode)`);return r}function Io(e,t,n){Co(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<To[1])throw new Error(`${Eo} integer encoded in more bytes than necessary (strict decode)`);return r}function So(e,t,n){Co(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<To[2])throw new Error(`${Eo} integer encoded in more bytes than necessary (strict decode)`);return r}function Po(e,t,n){Co(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<To[3])throw new Error(`${Eo} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error(`${Eo} integers outside of the safe integer range are not supported`)}function No(e,t){return jo(e,0,t.value)}function jo(e,t,n){if(n<To[0]){const r=Number(n);e.push([t|r])}else if(n<To[1]){const r=Number(n);e.push([24|t,r])}else if(n<To[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<To[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<To[4]))throw new Error(`${Eo} encountered BigInt larger than allowable range`);{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}No.encodedSize=function(e){return jo.encodedSize(e.value)},jo.encodedSize=function(e){return e<To[0]?1:e<To[1]?2:e<To[2]?3:e<To[3]?5:9},No.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const Bo=BigInt(-1),xo=BigInt(1);function Uo(e,t){const n=t.value,r="bigint"===typeof n?n*Bo-xo:-1*n-1;jo(e,t.type.majorEncoded,r)}function _o(e,t,n,r){Co(e,t,n+r);const o=po(e,t+n,t+n+r);return new oo(ro.bytes,o,n+r)}function Do(e,t,n,r){return _o(e,t,1,n)}function Ro(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===ro.string?fo(e.value):e.value),e.encodedBytes}function Oo(e,t){const n=Ro(t);jo(e,t.type.majorEncoded,n.length),e.push(n)}function Lo(e,t,n,r,o){const s=n+r;Co(e,t,s);const i=new oo(ro.string,lo(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=po(e,t+n,t+s)),i}function Fo(e,t,n,r){return Lo(e,t,1,n,r)}Uo.encodedSize=function(e){const t=e.value,n="bigint"===typeof t?t*Bo-xo:-1*t-1;return n<To[0]?1:n<To[1]?2:n<To[2]?3:n<To[3]?5:9},Uo.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},Oo.encodedSize=function(e){const t=Ro(e);return jo.encodedSize(t.length)+t.length},Oo.compareTokens=function(e,t){return n=Ro(e),r=Ro(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(co(e)&&co(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const zo=Oo;function Mo(e,t,n,r){return new oo(ro.array,r,n)}function Ho(e,t,n,r){return Mo(0,0,1,n)}function Vo(e,t){jo(e,ro.array.majorEncoded,t.value)}function Go(e,t,n,r){return new oo(ro.map,r,n)}function Wo(e,t,n,r){return Go(0,0,1,n)}function Ko(e,t){jo(e,ro.map.majorEncoded,t.value)}function qo(e,t,n,r){return new oo(ro.tag,n,1)}function Jo(e,t){jo(e,ro.tag.majorEncoded,t.value)}Vo.compareTokens=No.compareTokens,Vo.encodedSize=function(e){return jo.encodedSize(e.value)},Ko.compareTokens=No.compareTokens,Ko.encodedSize=function(e){return jo.encodedSize(e.value)},Jo.compareTokens=No.compareTokens,Jo.encodedSize=function(e){return jo.encodedSize(e.value)};function Zo(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${Eo} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${Eo} Infinity values are not supported`)}return new oo(ro.float,e,t)}function Xo(e,t,n){const r=t.value;if(!1===r)e.push([20|ro.float.majorEncoded]);else if(!0===r)e.push([21|ro.float.majorEncoded]);else if(null===r)e.push([22|ro.float.majorEncoded]);else if(void 0===r)e.push([23|ro.float.majorEncoded]);else{let t,s=!1;n&&!0===n.float64||(ts(r),t=ns(es,1),r===t||Number.isNaN(r)?(es[0]=249,e.push(es.slice(0,3)),s=!0):(rs(r),t=os(es,1),r===t&&(es[0]=250,e.push(es.slice(0,5)),s=!0))),s||(o=r,Yo.setFloat64(0,o,!1),t=ss(es,1),es[0]=251,e.push(es.slice(0,9)))}var o}Xo.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){ts(n);let e=ns(es,1);if(n===e||Number.isNaN(n))return 3;if(rs(n),e=os(es,1),n===e)return 5}return 9};const Qo=new ArrayBuffer(9),Yo=new DataView(Qo,1),es=new Uint8Array(Qo,0);function ts(e){if(e===1/0)Yo.setUint16(0,31744,!1);else if(e===-1/0)Yo.setUint16(0,64512,!1);else if(Number.isNaN(e))Yo.setUint16(0,32256,!1);else{Yo.setFloat32(0,e);const t=Yo.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Yo.setUint16(0,31744,!1);else if(0===n)Yo.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Yo.setUint16(0,0):e<-14?Yo.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Yo.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function ns(e,t){if(e.length-t<2)throw new Error(`${Eo} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function rs(e){Yo.setFloat32(0,e,!1)}function os(e,t){if(e.length-t<4)throw new Error(`${Eo} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function ss(e,t){if(e.length-t<8)throw new Error(`${Eo} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function is(e,t,n){throw new Error(`${Eo} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function as(e){return()=>{throw new Error(`${Eo} ${e}`)}}Xo.compareTokens=No.compareTokens;const cs=[];for(let cl=0;cl<=23;cl++)cs[cl]=is;cs[24]=function(e,t,n,r){return new oo(ro.uint,$o(e,t+1,r),2)},cs[25]=function(e,t,n,r){return new oo(ro.uint,Io(e,t+1,r),3)},cs[26]=function(e,t,n,r){return new oo(ro.uint,So(e,t+1,r),5)},cs[27]=function(e,t,n,r){return new oo(ro.uint,Po(e,t+1,r),9)},cs[28]=is,cs[29]=is,cs[30]=is,cs[31]=is;for(let cl=32;cl<=55;cl++)cs[cl]=is;cs[56]=function(e,t,n,r){return new oo(ro.negint,-1-$o(e,t+1,r),2)},cs[57]=function(e,t,n,r){return new oo(ro.negint,-1-Io(e,t+1,r),3)},cs[58]=function(e,t,n,r){return new oo(ro.negint,-1-So(e,t+1,r),5)},cs[59]=function(e,t,n,r){const o=Po(e,t+1,r);if("bigint"!==typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new oo(ro.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${Eo} integers outside of the safe integer range are not supported`);return new oo(ro.negint,Bo-BigInt(o),9)},cs[60]=is,cs[61]=is,cs[62]=is,cs[63]=is;for(let cl=64;cl<=87;cl++)cs[cl]=Do;cs[88]=function(e,t,n,r){return _o(e,t,2,$o(e,t+1,r))},cs[89]=function(e,t,n,r){return _o(e,t,3,Io(e,t+1,r))},cs[90]=function(e,t,n,r){return _o(e,t,5,So(e,t+1,r))},cs[91]=function(e,t,n,r){const o=Po(e,t+1,r);if("bigint"===typeof o)throw new Error(`${Eo} 64-bit integer bytes lengths not supported`);return _o(e,t,9,o)},cs[92]=is,cs[93]=is,cs[94]=is,cs[95]=as("indefinite length bytes/strings are not supported");for(let cl=96;cl<=119;cl++)cs[cl]=Fo;cs[120]=function(e,t,n,r){return Lo(e,t,2,$o(e,t+1,r),r)},cs[121]=function(e,t,n,r){return Lo(e,t,3,Io(e,t+1,r),r)},cs[122]=function(e,t,n,r){return Lo(e,t,5,So(e,t+1,r),r)},cs[123]=function(e,t,n,r){const o=Po(e,t+1,r);if("bigint"===typeof o)throw new Error(`${Eo} 64-bit integer string lengths not supported`);return Lo(e,t,9,o,r)},cs[124]=is,cs[125]=is,cs[126]=is,cs[127]=as("indefinite length bytes/strings are not supported");for(let cl=128;cl<=151;cl++)cs[cl]=Ho;cs[152]=function(e,t,n,r){return Mo(0,0,2,$o(e,t+1,r))},cs[153]=function(e,t,n,r){return Mo(0,0,3,Io(e,t+1,r))},cs[154]=function(e,t,n,r){return Mo(0,0,5,So(e,t+1,r))},cs[155]=function(e,t,n,r){const o=Po(e,t+1,r);if("bigint"===typeof o)throw new Error(`${Eo} 64-bit integer array lengths not supported`);return Mo(0,0,9,o)},cs[156]=is,cs[157]=is,cs[158]=is,cs[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Eo} indefinite length items not allowed`);return Mo(0,0,1,1/0)};for(let cl=160;cl<=183;cl++)cs[cl]=Wo;cs[184]=function(e,t,n,r){return Go(0,0,2,$o(e,t+1,r))},cs[185]=function(e,t,n,r){return Go(0,0,3,Io(e,t+1,r))},cs[186]=function(e,t,n,r){return Go(0,0,5,So(e,t+1,r))},cs[187]=function(e,t,n,r){const o=Po(e,t+1,r);if("bigint"===typeof o)throw new Error(`${Eo} 64-bit integer map lengths not supported`);return Go(0,0,9,o)},cs[188]=is,cs[189]=is,cs[190]=is,cs[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Eo} indefinite length items not allowed`);return Go(0,0,1,1/0)};for(let cl=192;cl<=215;cl++)cs[cl]=qo;cs[216]=function(e,t,n,r){return new oo(ro.tag,$o(e,t+1,r),2)},cs[217]=function(e,t,n,r){return new oo(ro.tag,Io(e,t+1,r),3)},cs[218]=function(e,t,n,r){return new oo(ro.tag,So(e,t+1,r),5)},cs[219]=function(e,t,n,r){return new oo(ro.tag,Po(e,t+1,r),9)},cs[220]=is,cs[221]=is,cs[222]=is,cs[223]=is;for(let cl=224;cl<=243;cl++)cs[cl]=as("simple values are not supported");cs[244]=is,cs[245]=is,cs[246]=is,cs[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${Eo} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new oo(ro.null,null,1):new oo(ro.undefined,void 0,1)},cs[248]=as("simple values are not supported"),cs[249]=function(e,t,n,r){return Zo(ns(e,t+1),3,r)},cs[250]=function(e,t,n,r){return Zo(os(e,t+1),5,r)},cs[251]=function(e,t,n,r){return Zo(ss(e,t+1),9,r)},cs[252]=is,cs[253]=is,cs[254]=is,cs[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${Eo} indefinite length items not allowed`);return new oo(ro.break,void 0,1)};const us=[];for(let cl=0;cl<24;cl++)us[cl]=new oo(ro.uint,cl,1);for(let cl=-1;cl>=-24;cl--)us[31-cl]=new oo(ro.negint,cl,1);us[64]=new oo(ro.bytes,new Uint8Array(0),1),us[96]=new oo(ro.string,"",1),us[128]=new oo(ro.array,0,1),us[160]=new oo(ro.map,0,1),us[244]=new oo(ro.false,!1,1),us[245]=new oo(ro.true,!0,1),us[246]=new oo(ro.null,null,1);const ls={float64:!1,mapSorter:function(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,s=fs[o].compareTokens(n,r);0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return s},quickEncodeToken:function(e){switch(e.type){case ro.false:return ho([244]);case ro.true:return ho([245]);case ro.null:return ho([246]);case ro.bytes:return e.value.length?void 0:ho([64]);case ro.string:return""===e.value?ho([96]):void 0;case ro.array:return 0===e.value?ho([128]):void 0;case ro.map:return 0===e.value?ho([160]):void 0;case ro.uint:return e.value<24?ho([Number(e.value)]):void 0;case ro.negint:if(e.value>=-24)return ho([31-Number(e.value)])}}};const fs=function(){const e=[];return e[ro.uint.major]=No,e[ro.negint.major]=Uo,e[ro.bytes.major]=Oo,e[ro.string.major]=zo,e[ro.array.major]=Vo,e[ro.map.major]=Ko,e[ro.tag.major]=Jo,e[ro.float.major]=Xo,e}(),ds=new vo;class hs{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${ko} object contains circular references`);return new hs(t,e)}}const ps={null:new oo(ro.null,null),undefined:new oo(ro.undefined,void 0),true:new oo(ro.true,!0),false:new oo(ro.false,!1),emptyArray:new oo(ro.array,0),emptyMap:new oo(ro.map,0)},gs={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new oo(e>=0?ro.uint:ro.negint,e):new oo(ro.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new oo(ro.uint,e):new oo(ro.negint,e),Uint8Array:(e,t,n,r)=>new oo(ro.bytes,e),string:(e,t,n,r)=>new oo(ro.string,e),boolean:(e,t,n,r)=>e?ps.true:ps.false,null:(e,t,n,r)=>ps.null,undefined:(e,t,n,r)=>ps.undefined,ArrayBuffer:(e,t,n,r)=>new oo(ro.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new oo(ro.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[ps.emptyArray,new oo(ro.break)]:ps.emptyArray;r=hs.createCheck(r,e);const o=[];let s=0;for(const i of e)o[s++]=ys(i,n,r);return n.addBreakTokens?[new oo(ro.array,e.length),o,new oo(ro.break)]:[new oo(ro.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[ps.emptyMap,new oo(ro.break)]:ps.emptyMap;r=hs.createCheck(r,e);const a=[];let c=0;for(const u of s)a[c++]=[ys(u,n,r),ys(o?e.get(u):e[u],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new oo(ro.map,i),a,new oo(ro.break)]:[new oo(ro.map,i),a]}};gs.Map=gs.Object,gs.Buffer=gs.Uint8Array;for(const cl of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))gs[`${cl}Array`]=gs.DataView;function ys(e,t={},n){const r=no(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||gs[r];if("function"===typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=gs[r];if(!s)throw new Error(`${ko} unsupported type: ${r}`);return s(e,r,t,n)}function ws(e,t,n,r){if(Array.isArray(t))for(const o of t)ws(e,o,n,r);else n[t.type.major](e,t,r)}function ms(e,t,n){const r=ys(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const o=t[r.type.major];if(o.encodedSize){const e=o.encodedSize(r,n),t=new vo(e);if(o(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return uo(t.chunks[0])}}return ds.reset(),ws(ds,r,t,n),ds.toBytes(!0)}const bs={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class vs{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=us[e];if(void 0===t){const n=cs[e];if(!n)throw new Error(`${Eo} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this._pos,r,this.options)}return this._pos+=t.encodedLength,t}}const Es=Symbol.for("DONE"),ks=Symbol.for("BREAK");function As(e,t){if(e.done())return Es;const n=e.next();if(n.type===ro.break)return ks;if(n.type.terminal)return n.value;if(n.type===ro.array)return function(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=As(t,n);if(s===ks){if(e.value===1/0)break;throw new Error(`${Eo} got unexpected break to lengthed array`)}if(s===Es)throw new Error(`${Eo} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}(n,e,t);if(n.type===ro.map)return function(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=As(t,n);if(a===ks){if(e.value===1/0)break;throw new Error(`${Eo} got unexpected break to lengthed map`)}if(a===Es)throw new Error(`${Eo} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${Eo} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`${Eo} found repeat map key "${a}"`);const c=As(t,n);if(c===Es)throw new Error(`${Eo} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,c):o[a]=c}return r?s:o}(n,e,t);if(n.type===ro.tag){if(t.tags&&"function"===typeof t.tags[n.value]){const r=As(e,t);return t.tags[n.value](r)}throw new Error(`${Eo} tag not supported (${n.value})`)}throw new Error("unsupported")}function Cs(e,t){const[n,r]=function(e,t){if(!(e instanceof Uint8Array))throw new Error(`${Eo} data to decode must be a Uint8Array`);const n=(t=Object.assign({},bs,t)).tokenizer||new vs(e,t),r=As(n,t);if(r===Es)throw new Error(`${Eo} did not find any content to decode`);if(r===ks)throw new Error(`${Eo} got unexpected break`);return[r,e.subarray(n.pos())]}(e,t);if(r.length>0)throw new Error(`${Eo} too many terminals, data makes no sense`);return n}const Ts={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=Hr.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new oo(ro.tag,42),new oo(ro.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const $s={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};$s.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Hr.decode(e.subarray(1))};$s.tags.slice();const Is=e=>{return t=e,n=Ts,n=Object.assign({},ls,n),ms(t,fs,n);var t,n},Ss=e=>Cs(function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e),$s),Ps="dag-jose",Ns=133;function js(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function Bs(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function xs(e){if("string"===typeof e){const t=e.split(".");if(3===t.length)return function(e){const[t,n,r]=e;return{payload:n,signatures:[{protected:t,signature:r}],link:Hr.decode(yr(n))}}(t);if(5===t.length)return function(e){const[t,n,r,o,s]=e,i={ciphertext:o,iv:r,protected:t,tag:s};return n&&(i.recipients=[{encrypted_key:n}]),i}(t);throw new Error("Not a valid JOSE string")}if(js(e)||Bs(e))return e;throw new Error("Not a valid unencoded JOSE object")}function Us(e){let t;if("string"===typeof e&&(e=xs(e)),js(e))t={payload:yr((n=e).payload),signatures:n.signatures.map(qr)};else{if(!Bs(e))throw new Error("Not a valid JOSE object");t=function(e){const t={ciphertext:yr(e.ciphertext),protected:yr(e.protected),iv:yr(e.iv),tag:yr(e.tag)};return e.aad&&(t.aad=yr(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Qr)),e.unprotected&&(t.unprotected=e.unprotected),t}(e)}var n;return new Uint8Array(Is(t))}function _s(e){let t;try{t=Ss(e)}catch(r){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(n=t)&&n.payload instanceof Uint8Array&&"signatures"in n&&Array.isArray(n.signatures))return Zr(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return function(e){const t={ciphertext:gr(e.ciphertext),protected:gr(e.protected),iv:gr(e.iv),tag:gr(e.tag)};return e.aad&&(t.aad=gr(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Yr)),e.unprotected&&(t.unprotected=e.unprotected),t}(t);throw new Error("Not a valid DAG-JOSE object");var n}var Ds=n(1046),Rs=n(2970);function Os(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)}for(const o of e){if(!0===o?.aborted){n();break}null!=o?.addEventListener&&o.addEventListener("abort",n)}const r=t.signal;return r.clear=function(){for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)},r}var Ls=n(4053),Fs=n.n(Ls);const zs="object"===typeof window&&"object"===typeof document&&9===document.nodeType,Ms=Fs()(),Hs=zs&&!Ms,Vs=Ms&&zs,Gs="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!Ms,Ws="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;"undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&navigator.product;function Ks(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}()}catch(t){return Promise.reject(t)}}var qs=n(4823),Js=n.n(qs);const Zs=function(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}};const Xs=function(e,t){let n=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)yield t(r,n++)}();const r=Zs(e),{value:o,done:s}=r.next();if(!0===s)return function*(){}();const i=t(o,n++);if("function"===typeof i.then)return async function*(){yield await i;for await(const e of r)yield t(e,n++)}();const a=t;return function*(){yield i;for(const e of r)yield a(e,n++)}()};Error;class Qs extends Error{code;props;constructor(e,t,n){super(e),this.code=t,this.name=n?.name??"CodeError",this.props=n??{}}}AggregateError;Error;Error;Error;function Ys(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function ei(e){return null!=e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function ti(e){return"object"===typeof e&&(null!=e.path||null!=e.content)}function ni(e){return"function"===typeof e?.getReader}function ri(e){if(null!=e)return"string"===typeof e&&(e=parseInt(e,8)),4095&e}function oi(e){if(null!=e){var t;if(t=e,Object.prototype.hasOwnProperty.call(t,"secs")&&(e={secs:e.secs,nsecs:e.nsecs}),function(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),function(e){return Array.isArray(e)}(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const t=e.getTime(),n=Math.floor(t/1e3);e={secs:BigInt(n),nsecs:1e3*(t-1e3*n)}}if("bigint"===typeof e){const t=e/BigInt(1e9),n=e-t*BigInt(1e9);e={secs:t,nsecs:Number(n)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw new Qs("mtime-nsecs must be within the range [0,999999999]","ERR_INVALID_MTIME_NSECS");return e}}}async function si(e,t){const{path:n,mode:r,mtime:o,content:s}=e,i={path:n??"",mode:ri(r),mtime:oi(o)};return null!=s?i.content=await t(s):null==n&&(i.content=await t(e)),i}const ii=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const t=[];for(const n of e)t.push(n);return t};async function ai(e){if(Ys(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(ei(e))return e;if(ni(e)&&(e=Ks(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Zs(e),{value:n,done:r}=await t.peek();if(!0===r)return ci(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await ii(t))]);if(Ys(n)||"string"===typeof n||n instanceof String)return ci(t)}throw new Qs(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT")}async function ci(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}function ui(e){return async function*(e,t){if("string"===typeof e||e instanceof String||Ys(e)||ei(e)||null!=e._readableState)throw Js()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(ni(e)&&(e=Ks(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Zs(e),{value:r,done:o}=await n.peek();if(!0===o)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw Js()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(null!=r._readableState)return void(yield*Xs(n,(async e=>si({content:e},t))));if(Ys(r))return void(yield si({content:n},t));if(ti(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||ni(r)||ei(r))return void(yield*Xs(n,(async e=>si(e,t))))}if(ti(e))throw Js()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw Js()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}(e,ai)}function li(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function fi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],o=new FormData;let s=0,i=0;for await(const{content:a,path:c,mode:u,mtime:l}of ui(e)){let e="";s>0&&(e=`-${s}`);let t=(null!=a?"file":"dir")+e;const n=[];if(null!==u&&void 0!==u&&n.push(`mode=${li(u)}`),null!=l){const{secs:e,nsecs:t}=l;n.push(`mtime=${e}`),null!=t&&n.push(`mtime-nsecs=${t}`)}if(n.length>0&&(t=`${t}?${n.join("&")}`),null!=a){o.set(t,a,null!=c?encodeURIComponent(c):void 0);const e=i+a.size;r.push({name:c,start:i,end:e}),i=e}else{if(null==c)throw new Error("path or content or both must be set");o.set(t,new File([""],encodeURIComponent(c),{type:"application/x-directory"}))}s++}return{total:i,parts:r,headers:n,body:o}}async function di(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:`-----------------------------${function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t}()}`,o=fi;return Vs&&(o=fi),o(e,t,n,r)}function hi(e){if(null==e)return e;const t=/^[A-Z]+$/;return Object.keys(e).reduce(((n,r)=>(t.test(r)?n[r.toLowerCase()]=e[r]:t.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=e[r]:n[r]=e[r],n)),{})}function pi(){let{arg:e,searchParams:t,hashAlg:n,mtime:r,mode:o,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=t&&(s={...s,...t}),null!=n&&(s.hash=n),null!=r&&(r=oi(r),s.mtime=r.secs,s.mtimeNsecs=r.nsecs),null!=o&&(s.mode=li(o)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const i=new URLSearchParams(s);return e.forEach((e=>{i.append("arg",e)})),i}function gi(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,o=Os([r.signal,n.signal]);try{const{headers:s,body:i,total:a,parts:c}=await di(t,r,n.headers),[u,l]="function"===typeof n.progress?yi(a,n.progress,c):[void 0,void 0],f=await e.post("add",{searchParams:pi({"stream-channels":!0,...n,progress:Boolean(u)}),onUploadProgress:l,signal:o,headers:s,body:i});for await(let e of f.ndjson())e=hi(e),void 0!==e.hash?yield mi(e):null!=u&&u(e.bytes??0,e.name)}finally{o.clear()}}()}catch(n){return Promise.reject(n)}}}const yi=(e,t,n)=>null!=n?[void 0,wi(e,n,t)]:[t,void 0],wi=(e,t,n)=>{let r=0;const o=t.length;return s=>{let{loaded:i,total:a}=s;const c=Math.floor(i/a*e);for(;r<o;){const{start:e,end:o,name:s}=t[r];if(c<o){n(c-e,s);break}n(o-e,s),r+=1}}};function mi(e){let{name:t,hash:n,size:r,mode:o,mtime:s,mtimeNsecs:i}=e;const a={path:t,cid:Be.TO.parse(n),size:parseInt(r)};return null!=o&&(a.mode=parseInt(o,8)),null!=s&&(a.mtime={secs:s,nsecs:i??0}),a}const bi=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{let t;for await(const n of e)t=n;return t})();let t;for(const n of e)t=n;return t};async function vi(e,t){const{path:n,mode:r,mtime:o,content:s}=e,i={path:n??"",mode:ri(r),mtime:oi(o)};return null!=s?i.content=await t(s):null==n&&(i.content=await t(e)),i}function Ei(e){return async function*(e,t){if(null===e||void 0===e)throw Js()(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield vi(e.toString(),t);else if(Ys(e)||ei(e))yield vi(e,t);else{if(ni(e)&&(e=Ks(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Zs(e),{value:r,done:o}=await n.peek();if(!0===o)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Ys(r)||"string"===typeof r||r instanceof String)return void(yield vi(n,t));throw Js()(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!ti(e))throw Js()(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield vi(e,t)}}(e,ai)}const ki=Symbol.for("@libp2p/peer-id");var Ai=n(1454),Ci=n(5716),Ti=n(1517);function $i(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function Ii(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Si=Ii("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Pi=Ii("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Ni={utf8:Si,"utf-8":Si,hex:Ds.Fo.base16,latin1:Pi,ascii:Pi,binary:Pi,...Ds.Fo};function ji(e,t="utf8"){const n=Ni[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}function Bi(e,t="utf8"){const n=Ni[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}const xi=Symbol.for("nodejs.util.inspect.custom"),Ui=Object.values(Ds.Fo).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),Ds.Fo.identity.decoder);class _i{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[ki]=!0;toString(){return null==this.string&&(this.string=Ai.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Be.TO.createV1(114,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(null==e)return!1;if(e instanceof Uint8Array)return $i(this.multihash.bytes,e);if("string"===typeof e)return zi(e).equals(this);if(null!=e?.multihash?.bytes)return $i(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[xi](){return`PeerId(${this.toString()})`}}class Di extends _i{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class Ri extends _i{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}}class Oi extends _i{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}}const Li=2336;class Fi{type="url";multihash;privateKey;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=Rs.identity.digest(ji(this.url))}[xi](){return`PeerId(${this.url})`}[ki]=!0;toString(){return this.toCID().toString()}toCID(){return Be.TO.createV1(Li,this.multihash)}toBytes(){return this.toCID().bytes}equals(e){return null!=e&&(e instanceof Uint8Array&&(e=Bi(e)),e.toString()===this.toString())}}function zi(e,t){if(t=t??Ui,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=Ci.D4(Ai.base58btc.decode(`z${e}`));return e.startsWith("12D")?new Ri({multihash:t}):e.startsWith("16U")?new Oi({multihash:t}):new Di({multihash:t})}return function(e){try{const t=Ci.D4(e);if(t.code===Rs.identity.code){if(36===t.digest.length)return new Ri({multihash:t});if(37===t.digest.length)return new Oi({multihash:t})}if(t.code===Ti.sha256.code)return new Di({multihash:t})}catch{return function(e){if(null==e?.multihash||null==e.version||1===e.version&&114!==e.code&&e.code!==Li)throw new Error("Supplied PeerID CID is invalid");if(e.code===Li){const t=Bi(e.multihash.digest);return new Fi(new URL(t))}const t=e.multihash;if(t.code===Ti.sha256.code)return new Di({multihash:e.multihash});if(t.code===Rs.identity.code){if(36===t.digest.length)return new Ri({multihash:e.multihash});if(37===t.digest.length)return new Oi({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Be.TO.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Ui.decode(e))}function Mi(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bitswap/stat",{searchParams:pi(t),signal:t.signal,headers:t.headers});return function(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map((e=>Be.TO.parse(e["/"]))),peers:(e.Peers??[]).map((e=>zi(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}(await n.json())}}function Hi(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:pi({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map((e=>Be.TO.parse(e["/"])))}}function Vi(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()).Keys??[]).map((e=>Be.TO.parse(e["/"])))}}function Gi(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/get",{signal:n.signal,searchParams:pi({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}}function Wi(e){return async function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new AbortController,s=Os([o.signal,r.signal]);let i;try{const t=await e.post("block/put",{signal:s,searchParams:pi(r),...await di([n],o,r.headers)});i=await t.json()}catch(a){if("dag-pb"===r.format)return await t(n,{...r,format:"protobuf"});if("dag-cbor"===r.format)return await t(n,{...r,format:"cbor"});throw a}finally{s.clear()}return Be.TO.parse(i.Key)}}function Ki(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){Array.isArray(t)||(t=[t]);const r=await e.post("block/rm",{signal:n.signal,searchParams:pi({arg:t.map((e=>e.toString())),"stream-channels":!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield qi(e)}()}catch(n){return Promise.reject(n)}}}function qi(e){const t={cid:Be.TO.parse(e.Hash)};return null!=e.Error&&(t.error=new Error(e.Error)),t}function Ji(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/stat",{signal:n.signal,searchParams:pi({arg:t.toString(),...n}),headers:n.headers}),o=await r.json();return{cid:Be.TO.parse(o.Key),size:o.Size}}}function Zi(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/add",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((e=>(0,a.HZ)(e)))}}}function Xi(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:pi(t),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,a.HZ)(e)))}}}function Qi(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/rm",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((e=>(0,a.HZ)(e)))}}}function Yi(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("config/show",{signal:t.signal,searchParams:pi({...t}),headers:t.headers});return await n.json()}}function ea(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t)throw new Error("key argument is required");const r=await e.post("config",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers});return(await r.json()).Value}}function ta(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("config/profile/apply",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),o=await r.json();return{original:o.OldCfg,updated:o.NewCfg}}}function na(e){return{apply:ta(e)}}function ra(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new AbortController,o=Os([r.signal,n.signal]);try{const s=await e.post("config/replace",{signal:o,searchParams:pi(n),...await di([ji(JSON.stringify(t))],r,n.headers)});await s.text()}finally{o.clear()}}}function oa(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof t)throw new Error("Invalid key type");const o={...r,...sa(t,n)},s=await e.post("config",{signal:r.signal,searchParams:pi(o),headers:r.headers});await s.text()}}function sa(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function ia(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dag/export",{signal:n.signal,searchParams:pi({arg:t.toString()}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}}const aa=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e)return t})();for(const t of e)return t};async function*ca(e,t,n,r,o){const s=async e=>{const t=await n.getCodec(e.code),s=await r(e,o);return t.decode(s)},i=t.split("/").filter(Boolean);let a=await s(e),c=e;for(;i.length>0;){const e=i.shift();if(null==e)throw Js()(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,e))throw Js()(new Error(`no link named "${e}" under ${c}`),"ERR_NO_LINK");a=a[e],yield{value:a,remainderPath:i.join("/")};const n=Be.TO.asCID(a);null!=n&&(c=n,a=await s(a))}yield{value:a,remainderPath:""}}function ua(e,t){const n=Gi(e);return async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=r.path){const o=!0===r.localResolve?await aa(ca(e,r.path,t,n,r)):await bi(ca(e,r.path,t,n,r));if(null==o)throw Js()(new Error("Not found"),"ERR_NOT_FOUND");return o}const o=await t.getCodec(e.code),s=await n(e,r);return{value:o.decode(s),remainderPath:""}}}function la(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,o=Os([r.signal,n.signal]);try{const{headers:s,body:i}=await di(t,r,n.headers),a=await e.post("dag/import",{signal:o,headers:s,body:i,searchParams:pi({"pin-roots":n.pinRoots})});for await(const{Root:e}of a.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:n}=e;yield{root:{cid:Be.TO.parse(t),pinErrorMsg:n}}}}finally{o.clear()}}()}catch(n){return Promise.reject(n)}}}function fa(e,t){return async function(n){const r={storeCodec:"dag-cbor",hashAlg:"sha2-256",...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};let o;if(null!=r.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");o=n}else{o=(await t.getCodec(r.storeCodec??"dag-cbor")).encode(n),r.inputCodec=r.storeCodec}const s=new AbortController,i=Os([s.signal,r.signal]);try{const t=await e.post("dag/put",{timeout:r.timeout,signal:i,searchParams:pi(r),...await di([o],s,r.headers)}),n=await t.json();return Be.TO.parse(n.Cid["/"])}finally{i.clear()}}}function da(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("dag/resolve",{signal:n.signal,searchParams:pi({arg:`${t}${null!=n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers}),o=await r.json();return{cid:Be.TO.parse(o.Cid["/"]),remainderPath:o.RemPath}}}function ha(e){if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:zi(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:zi(t),multiaddrs:n.map((e=>(0,a.HZ)(e))),protocols:[]}})),providers:(e.Responses??[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:zi(t),multiaddrs:n.map((e=>(0,a.HZ)(e))),protocols:[]}}))};if(2===e.Type){let t={id:e.ID??zi(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:zi(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>(0,a.HZ)(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((e=>{let{ID:t,Addrs:n}=e;return{id:zi(t),multiaddrs:n.map((e=>(0,a.HZ)(e))),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:ji(e.Extra,"base64pad")};if(6===e.Type){const t=e.Responses.map((e=>{let{ID:t}=e;return zi(t)}));if(0===t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:zi(e.ID)};throw new Error("Unknown DHT event type")}function pa(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dht/query",{signal:n.signal,searchParams:pi({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield ha(e)}()}catch(n){return Promise.reject(n)}}}var ga,ya;function wa(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/cmds",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()}}function ma(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/net",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()}}function ba(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/sys",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()}}function va(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Array.isArray(t)?t:[t],s=await e.post("files/cp",{signal:r.signal,searchParams:pi({arg:o.concat(n).map((e=>null!=Be.TO.asCID(e)?`/ipfs/${e}`:e)),...r}),headers:r.headers});await s.text()}}function Ea(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const r=await e.post("files/flush",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),o=await r.json();return Be.TO.parse(o.Cid)}}function ka(e){const t=hi(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function Aa(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){if(null==t)throw new Error("ipfs.files.ls requires a path");const r=await e.post("files/ls",{signal:n.signal,searchParams:pi({arg:null!=Be.TO.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const e of r.ndjson())if("Entries"in e)for(const t of e.Entries??[])yield Ca(ka(t));else yield Ca(ka(e))}()}catch(n){return Promise.reject(n)}}}function Ca(e){return null!=e.hash&&(e.cid=Be.TO.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}function Ta(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/mkdir",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers});await r.text()}}function $a(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);const o=await e.post("files/mv",{signal:r.signal,searchParams:pi({arg:t.concat(n),...r}),headers:r.headers});await o.text()}}function Ia(e){if(t=e,"function"===typeof t?.getReader)return async function*(){const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)return;yield n}}finally{t.releaseLock()}}();var t;if(function(e){return null!=e[Symbol.asyncIterator]}(e))return e;throw new Error("unknown stream")}function Sa(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("files/read",{signal:n.signal,searchParams:pi({arg:t,count:n.length,...n}),headers:n.headers});if(null==r.body)throw new Error("Invalid response body");yield*Ia(r.body)}()}catch(n){return Promise.reject(n)}}}!function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"}(ga||(ga={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(ya||(ya={}));Error;Error;class Pa extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}function Na(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/rm",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),o=await r.text();if(""!==o){const e=new Pa(r);throw e.message=o,e}}}function ja(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/stat",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),o=await r.json();return o.WithLocality=o.WithLocality??!1,(s=ka(o)).cid=Be.TO.parse(s.hash),delete s.hash,s;var s}}function Ba(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new AbortController,s=Os([o.signal,r.signal]);try{const i=await e.post("files/write",{signal:s,searchParams:pi({arg:t,streamChannels:!0,count:r.length,...r}),...await di([{content:n,path:"arg",mode:li(r.mode),mtime:oi(r.mtime)}],o,r.headers)});await i.text()}finally{s.clear()}}}function xa(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("id",{signal:t.signal,searchParams:pi({arg:null!=t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),r={...hi(await n.json())};return r.id=zi(r.id),null!=r.addresses&&(r.addresses=r.addresses.map((e=>(0,a.HZ)(e)))),r}}const Ua={type:"ed25519"};function _a(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua;const r=await e.post("key/gen",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers});return hi(await r.json())}}function Da(e){return async function(t,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=await e.post("key/import",{signal:o.signal,searchParams:pi({arg:t,pem:n,password:r,...o}),headers:o.headers});return hi(await s.json())}}function Ra(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("key/list",{signal:t.signal,searchParams:pi(t),headers:t.headers});return((await n.json()).Keys??[]).map((e=>hi(e)))}}function Oa(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await e.post("key/rename",{signal:r.signal,searchParams:pi({arg:[t,n],...r}),headers:r.headers});return hi(await o.json())}}function La(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("key/rm",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers});return hi((await r.json()).Keys[0])}}var Fa=n(1610);const za=1e3,Ma=60*za,Ha=60*Ma,Va=24*Ha,Ga=7*Va,Wa=365.25*Va;const Ka=function(e,t){try{if("string"===typeof e&&e.length>0)return function(e){if((e=String(e)).length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;const n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Wa;case"weeks":case"week":case"w":return n*Ga;case"days":case"day":case"d":return n*Va;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ha;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ma;case"seconds":case"second":case"secs":case"sec":case"s":return n*za;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error(`The unit ${r} was matched, but no matching case exists.`)}}(e);if("number"===typeof e&&isFinite(e))return t?.long?function(e){const t=Math.abs(e);if(t>=Va)return qa(e,t,Va,"day");if(t>=Ha)return qa(e,t,Ha,"hour");if(t>=Ma)return qa(e,t,Ma,"minute");if(t>=za)return qa(e,t,za,"second");return`${e} ms`}(e):function(e){const t=Math.abs(e);if(t>=Va)return`${Math.round(e/Va)}d`;if(t>=Ha)return`${Math.round(e/Ha)}h`;if(t>=Ma)return`${Math.round(e/Ma)}m`;if(t>=za)return`${Math.round(e/za)}s`;return`${e}ms`}(e);throw new Error("Value is not a string or number.")}catch(n){const t=function(e){return"object"===typeof e&&null!==e&&"message"in e}(n)?`${n.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(t)}};function qa(e,t,n,r){const o=t>=1.5*n;return`${Math.round(e/n)} ${r}${o?"s":""}`}const Ja=function(){try{return localStorage}catch(e){}}();const Za=console.debug??console.log??(()=>{});const Xa=function(e){function t(e){let r,o,s,i=null;function a(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(!a.enabled)return;const s=a,i=Number(new Date),c=i-(r||i);s.diff=c,s.prev=r,s.curr=i,r=i,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const o=t.formatters[r];if("function"===typeof o){const t=n[u];e=o.call(s,t),n.splice(u,1),u--}return e})),t.formatArgs.call(s,n);(s.log||t.log).apply(s,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==t.namespaces&&(o=t.namespaces,s=t.enabled(e)),s),set:e=>{i=e}}),"function"===typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack??e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Ka,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.setupFormatters(t.formatters),t.enable(t.load()),t}({formatArgs:function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ka(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,t)},save:function(e){try{e?Ja?.setItem("debug",e):Ja?.removeItem("debug")}catch(t){}},load:function(){let e;try{e=Ja?.getItem("debug")}catch(t){}return!e&&"undefined"!==typeof globalThis.process&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e},useColors:function(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||null==navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement?.style?.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&null!=navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/))},setupFormatters:function(e){e.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],storage:Ja,log:Za}),Qa=Xa;function Ya(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return Qa.enabled(`${e}:trace`)&&null!=Qa.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=Qa(`${e}:trace`)),Object.assign(Qa(e),{error:Qa(`${e}:error`),trace:t})}Qa.formatters.b=e=>null==e?"undefined":Ai.base58btc.baseEncode(e),Qa.formatters.t=e=>null==e?"undefined":Fa.base32.baseEncode(e),Qa.formatters.m=e=>null==e?"undefined":gn.base64.baseEncode(e),Qa.formatters.p=e=>null==e?"undefined":e.toString(),Qa.formatters.c=e=>null==e?"undefined":e.toString(),Qa.formatters.k=e=>null==e?"undefined":e.toString(),Qa.formatters.a=e=>null==e?"undefined":e.toString();var ec=n(8355);const tc=n.n(ec)();let nc=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function rc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms";var n=null;e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2");var r="-"===e[0];return e.replace(nc,(function(e,t,r){(r=oc(r))&&(n=(n||0)+Math.abs(parseFloat(t,10))*r)})),n&&n/(oc(t)||1)*(r?-1:1)}function oc(e){return rc[e]||rc[e.toLowerCase().replace(/s$/,"")]}rc.nanosecond=rc.ns=1e-6,rc["\xb5s"]=rc["\u03bcs"]=rc.us=rc.microsecond=.001,rc.millisecond=rc.ms=rc[""]=1,rc.second=rc.sec=rc.s=1e3*rc.ms,rc.minute=rc.min=rc.m=60*rc.s,rc.hour=rc.hr=rc.h=60*rc.m,rc.day=rc.d=24*rc.h,rc.week=rc.wk=rc.w=7*rc.d,rc.month=rc.b=30.4375*rc.d,rc.year=rc.yr=rc.y=365.25*rc.d;const sc=rc;var ic=n(1505);class ac extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out"),this.name="TimeoutError"}}class cc extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted."),this.name="AbortError"}}class uc extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}const lc=globalThis.fetch,fc=globalThis.Headers,dc=globalThis.Request,hc=globalThis.Response,pc=lc,gc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new XMLHttpRequest;n.open(t.method??"GET",e.toString(),!0);const{timeout:r,headers:o}=t,s=Number(r);if(!isNaN(s)&&s>0&&s<1/0&&(n.timeout=s),null!=t.overrideMimeType&&n.overrideMimeType(t.overrideMimeType),null!=o)for(const[i,a]of new fc(o))n.setRequestHeader(i,a);return null!=t.signal&&(t.signal.onabort=()=>{n.abort()}),null!=t.onUploadProgress&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise(((e,r)=>{const o=t=>{switch(t.type){case"error":e(hc.error());break;case"load":e(new wc(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:yc(n.getAllResponseHeaders())}));break;case"timeout":r(new ac);break;case"abort":r(new cc)}};n.onerror=o,n.onload=o,n.ontimeout=o,n.onabort=o,n.send(t.body)}))}(e,t):pc(e,t)},yc=e=>{const t=new fc;for(const n of e.trim().split(/[\r\n]+/)){const e=n.indexOf(": ");e>0&&t.set(n.slice(0,e),n.slice(e+1))}return t};class wc extends hc{constructor(e,t,n){super(t,n),Object.defineProperty(this,"url",{value:e})}}const mc=tc.bind({ignoreUndefined:!0}),bc=Ya("kubo-rpc-client:fetch"),vc={throwHttpErrors:!0,credentials:"same-origin"};class Ec{static HTTPError=(()=>uc)();static TimeoutError=(()=>ac)();static post=async(e,t)=>new Ec(t).post(e,t);static get=async(e,t)=>new Ec(t).get(e,t);static put=async(e,t)=>new Ec(t).put(e,t);static delete=async(e,t)=>new Ec(t).delete(e,t);static options=async(e,t)=>new Ec(t).options(e,t);opts;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=mc({},vc,e)}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=mc({},this.opts,t),r=new fc(n.headers);if("string"!==typeof e&&!(e instanceof ic.URL||e instanceof dc))throw new TypeError("`resource` must be a string, URL, or Request");const o=new ic.URL(e.toString(),n.base),{searchParams:s,transformSearchParams:i,json:a}=n;null!=s&&(o.search="function"===typeof i?i(new ic.URLSearchParams(n.searchParams)):new ic.URLSearchParams(n.searchParams).toString()),null!=a&&(n.body=JSON.stringify(n.json),r.set("content-type","application/json"));const c=[n.signal];null!=n.timeout&&isNaN(n.timeout)&&n.timeout>0&&c.push(AbortSignal.timeout(n.timeout));const u=Os(c);try{null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(Hs||Ws)&&(n.body=new Blob(await ii(Ks(n.body)))),bc.trace("outgoing headers",n.headers),bc.trace("%s %s",n.method,o);const e=await gc(o.toString(),{...n,signal:n.signal,timeout:void 0,headers:r,duplex:"half"});if(bc("%s %s %d",n.method,o,e.status),bc.trace("incoming headers",e.headers),!e.ok&&!0===n.throwHttpErrors)throw null!=n.handleError&&await n.handleError(e),new uc(e);return e.iterator=async function*(){yield*Ac(e.body)},e.ndjson=async function*(){for await(const n of kc(e.iterator()))null!=t.transform?yield t.transform(n):yield n},e}finally{u.clear()}}async post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"POST"})}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"GET"})}async put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"PUT"})}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"DELETE"})}async options(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"OPTIONS"})}}const kc=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const e=n.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const n=e[t].trim();n.length>0&&(yield JSON.parse(n))}n=e[e.length-1]}n+=t.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))},Ac=e=>{if(Cc(e))return e;if($c(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:n=>(e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:n}))})}}if(Tc(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:e,value:n}=await t.read();if(e)return;null!=n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},Cc=e=>null!==e&&"function"===typeof e[Symbol.asyncIterator],Tc=e=>null!=e&&"function"===typeof e.getReader,$c=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),Ic=[(0,a.WH)("tcp").code,(0,a.WH)("dns").code,(0,a.WH)("dnsaddr").code,(0,a.WH)("dns4").code,(0,a.WH)("dns6").code];function Sc(e){return Nc("sni",e)?.[1]}function Pc(e){const t=Nc("tcp",e)?.[1];return null==t?"":`:${t}`}function Nc(e,t){let n;try{n=(0,a.WH)(e).code}catch(r){return}for(const[o,s]of t)if(o===n&&null!=s)return[o,s]}function jc(e){return e.some((([e,t])=>e===(0,a.WH)("tls").code))}function Bc(e,t,n){const r=xc[(0,a.WH)(e).name];if(null==r)throw new Error(`Can't interpret protocol ${(0,a.WH)(e).name}`);const o=r(t,n);return e===(0,a.WH)("ip6").code?`[${o}]`:o}const xc={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`tcp://${Bc(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`udp://${Bc(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=jc(t),r=Sc(t),o=Pc(t);if(n&&null!=r)return`https://${r}${o}`;const s=n?"https://":"http://",i=t.pop();if(null==i)throw new Error("Unexpected end of multiaddr");let a=Bc(i[0],i[1]??"",t);return a=a.replace("tcp://",""),`${s}${a}`},"http-path":(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/${decodeURIComponent(e)}`},tls:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return Bc(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return Bc(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");let r=Bc(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=jc(t),r=Sc(t),o=Pc(t);if(n&&null!=r)return`wss://${r}${o}`;const s=n?"wss://":"ws://",i=t.pop();if(null==i)throw new Error("Unexpected end of multiaddr");let a=Bc(i[0],i[1]??"",t);return a=a.replace("tcp://",""),`${s}${a}`},wss:(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");let r=Bc(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(null==n)throw new Error("Unexpected end of multiaddr");return`${Bc(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};function Uc(e){try{e=function(e,t){const n=(0,a.HZ)(e).stringTuples(),r=n.pop();if(null==r)throw new Error("Unexpected end of multiaddr");const o=(0,a.WH)(r[0]),s=xc[o.name];if(null==s)throw new Error(`No interpreter found for ${o.name}`);let i=s(r[1]??"",n);return!1!==t?.assumeHttp&&Ic.includes(r[0])&&(i=i.replace(/^.*:\/\//,""),i="443"===r[1]?`https://${i}`:`http://${i}`),(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("ws://")||i.startsWith("wss://"))&&(i=new URL(i).toString(),i.endsWith("/")&&(i=i.substring(0,i.length-1))),i}((0,a.HZ)(e))}catch{}return e=e.toString()}const _c=Ya("js-kubo-rpc-client:lib:error-handler"),Dc=tc.bind({ignoreUndefined:!0}),Rc=Hs||Ws?location.protocol:"http",Oc=Hs||Ws?location.hostname:"localhost",Lc=Hs||Ws?location.port:"5001",Fc=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();_c(n),t=n.Message??n.message}else t=await e.text()}catch(r){_c("Failed to parse error response",r),t=r.message}let n=new Ec.HTTPError(e);throw null!=t&&(t.includes("deadline has elapsed")&&(n=new Ec.TimeoutError),t.includes("context deadline exceeded")&&(n=new Ec.TimeoutError),t.includes("request timed out")&&(n=new Ec.TimeoutError),n.message=t),n},zc=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Mc=e=>e.replace(zc,(function(e){return"-"+e.toLowerCase()}));class Hc extends Ec{constructor(){var e;const t=function(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if("string"===typeof n||(0,a.R8)(n))e=new URL(Uc(n));else if(n instanceof URL)e=n;else if("string"===typeof n.url||(0,a.R8)(n.url))e=new URL(Uc(n.url)),r=n;else if(n.url instanceof URL)e=n.url,r=n;else{r=n??{};const t=(r.protocol??Rc).replace(":",""),o=(r.host??Oc).split(":")[0],s=r.port??Lc;e=new URL(`${t}://${o}:${s}`)}if(null!=r.apiPath?e.pathname=r.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),Gs){const e=void 0;t=r.agent??new e({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var n;super({timeout:null!=t.timeout?(n=t.timeout,"string"===typeof n?sc(n)??0:n):void 0,headers:t.headers,base:`${t.url}`,handleError:Fc,transformSearchParams:e=>{const t=new URLSearchParams;for(const[n,r]of e)"undefined"!==r&&"null"!==r&&"signal"!==n&&"timeout"!==n&&t.append(Mc(n),r),"timeout"!==n||isNaN(parseInt(r))||t.append(Mc(n),r);return t},agent:t.agent}),e=this,delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=async function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof n||n.startsWith("/")||(n=`${t.url}/${n}`),r.call(e,n,Dc(o,{method:"POST"}))}}}Ec.HTTPError;const Vc=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Gc{_basesByName;_basesByPrefix;_loadBase;constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??Vc;for(const t of e.bases)this.addBase(t)}addBase(e){if(null!=this._basesByName[e.name]&&null!=this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(null!=this._basesByName[e])return this._basesByName[e];if(null!=this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const Wc=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class Kc{_codecsByName;_codecsByCode;_loadCodec;constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??Wc;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(null!=this._codecsByName[e.name]||null!=this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(null!=t[e])return t[e];const n=await this._loadCodec(e);return null==t[e]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const qc=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Jc{_hashersByName;_hashersByCode;_loadHasher;constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??qc;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(null!=this._hashersByName[e.name]||null!=this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(null!=t[e])return t[e];const n=await this._loadHasher(e);return null==t[e]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function Zc(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await e.post("log/level",{signal:r.signal,searchParams:pi({arg:[t,n],...r}),headers:r.headers});return hi(await o.json())}}function Xc(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("log/ls",{signal:t.signal,searchParams:pi(t),headers:t.headers});return(await n.json()).Strings}}function Qc(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("log/tail",{signal:t.signal,searchParams:pi(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function Yc(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}function eu(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/publish",{signal:n.signal,searchParams:pi({arg:`${t}`,...n}),headers:n.headers});return hi(await r.json())}}function tu(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers});return hi(await r.json())}}function nu(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:pi(t),headers:t.headers});return hi(await n.json())}}function ru(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:pi(t),headers:t.headers});return(await n.json()).Strings??[]}}function ou(e){return{cancel:tu(e),state:nu(e),subs:ru(e)}}function su(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("name/resolve",{signal:n.signal,searchParams:pi({arg:t,stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield e.Path}()}catch(n){return Promise.reject(n)}}}function iu(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await e.post("object/patch/add-link",{signal:r.signal,searchParams:pi({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...r}),headers:r.headers}),{Hash:s}=await o.json();return Be.TO.parse(s)}}function au(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await e.post("object/patch/rm-link",{signal:r.signal,searchParams:pi({arg:[`${t}`,n.Name??n.name??null],...r}),headers:r.headers}),{Hash:s}=await o.json();return Be.TO.parse(s)}}function cu(e){return{addLink:iu(e),rmLink:au(e)}}function uu(e){return null!=Be.TO.asCID(e)}async function*lu(e){if(null===e||void 0===e)throw new Qs(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT");const t=Be.TO.asCID(e);if(null==t){if("string"!==typeof e){if(null!=e.cid||null!=e.path)return yield fu(e);if(n=e,Symbol.iterator in n){const t=e[Symbol.iterator](),n=t.next();if(!0===n.done)return t;if(uu(n.value)){yield fu({cid:n.value});for(const e of t)yield fu({cid:e});return}if("string"===typeof n.value){yield fu({path:n.value});for(const e of t)yield fu({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield fu(n.value);for(const e of t)yield fu(e);return}throw new Qs("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}var n;if(function(e){return Symbol.asyncIterator in e}(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(!0===n.done)return t;if(uu(n.value)){yield fu({cid:n.value});for await(const e of t)yield fu({cid:e});return}if("string"===typeof n.value){yield fu({path:n.value});for await(const e of t)yield fu({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield fu(n.value);for await(const e of t)yield fu(e);return}throw new Qs("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}throw new Qs("Unexpected input: "+typeof e,"ERR_UNEXPECTED_INPUT")}yield fu({path:e})}else yield fu({cid:t})}function fu(e){const t=e.cid??`${e.path}`;if(null==t)throw new Qs("Unexpected input: Please path either a CID or an IPFS path","ERR_UNEXPECTED_INPUT");const n={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(n.metadata=e.metadata),n}function du(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:o,metadata:s}of lu(t)){const t=await e.post("pin/add",{signal:n.signal,searchParams:pi({...n,arg:r,recursive:o,metadata:null!=s?JSON.stringify(s):void 0,stream:!0}),headers:n.headers});for await(const e of t.ndjson())if(null==e.Pins)yield Be.TO.parse(e);else for(const t of e.Pins)yield Be.TO.parse(t)}}()}catch(n){return Promise.reject(n)}}}function hu(e){const t=du(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await bi(t([{path:e.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}function pu(e,t,n){const r={type:e,cid:Be.TO.parse(t)};return null!=n&&(r.metadata=n),r}function gu(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let n=[];null!=t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const r=await e.post("pin/ls",{signal:t.signal,searchParams:pi({...t,arg:n.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of r.ndjson()){if(null!=e.Keys){for(const t of Object.keys(e.Keys))yield pu(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield pu(e.Type,e.Cid,e.Metadata)}}()}catch(t){return Promise.reject(t)}}}const yu=e=>{let{Name:t,Status:n,Cid:r}=e;return{cid:Be.TO.parse(r),name:t,status:n}},wu=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},mu=e=>{if(null!=Be.TO.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},bu=e=>{let{service:t,cid:n,name:r,status:o,all:s}=e;const i=pi({service:wu(t),name:r,force:!0===s||void 0});if(null!=n)for(const a of n)i.append("cid",mu(a));if(null!=o)for(const a of o)i.append("status",a);return i},vu=(e,t)=>{let{service:n,background:r,name:o,origins:s}=t;const i=pi({arg:mu(e),service:wu(n),name:o,background:!0===r||void 0});if(null!=s)for(const a of s)i.append("origin",a.toString());return i};function Eu(e){return async function(t,n){let{timeout:r,signal:o,headers:s,...i}=n;const a=await e.post("pin/remote/add",{timeout:r,signal:o,headers:s,searchParams:vu(t,i)});return yu(await a.json())}}function ku(e){return function(t){try{let{timeout:n,signal:r,headers:o,...s}=t;return async function*(){const t=await e.post("pin/remote/ls",{timeout:n,signal:r,headers:o,searchParams:bu(s)});for await(const e of t.ndjson())yield yu(e)}()}catch(n){return Promise.reject(n)}}}function Au(e){return async function(t){let{timeout:n,signal:r,headers:o,...s}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:bu({...s,all:!0})})}}function Cu(e){return async function(t){let{timeout:n,signal:r,headers:o,...s}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:bu({...s,all:!1})})}}function Tu(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function $u(e){const t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return null!=e.Stat&&(t.stat=function(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}(e.Stat)),t}function Iu(e){return async function(t,n){const{endpoint:r,key:o,headers:s,timeout:i,signal:a}=n;await e.post("pin/remote/service/add",{timeout:i,signal:a,searchParams:pi({arg:[t,Tu(r),o]}),headers:s})}}function Su(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:n,headers:r,timeout:o,signal:s}=t,i=await e.post("pin/remote/service/ls",{timeout:o,signal:s,headers:r,searchParams:!0===n?pi({stat:n}):void 0});return(await i.json()).RemoteServices.map($u)}}function Pu(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:pi({arg:t})})}}function Nu(e){return{add:Iu(e),ls:Su(e),rm:Pu(e)}}function ju(e){return{add:Eu(e),ls:ku(e),rm:Cu(e),rmAll:Au(e),service:Nu(e)}}function Bu(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:o}of lu(t)){const t=new URLSearchParams(n.searchParams);t.append("arg",`${r}`),null!=o&&t.set("recursive",String(o));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:pi({...n,arg:`${r}`,recursive:o})});for await(const e of s.ndjson())null==e.Pins?yield Be.TO.parse(e):yield*e.Pins.map((e=>Be.TO.parse(e)))}}()}catch(n){return Promise.reject(n)}}}function xu(e){const t=Bu(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await bi(t([{path:e.toString(),...n}],n));if(null==r)throw new Error("No response received");return r}}const Uu=e=>Bi(_u(e)),_u=e=>gn.base64url.decode(e),Du=e=>BigInt(`0x${Bi(gn.base64url.decode(e),"base16")}`),Ru=e=>gn.base64url.encode(ji(e));function Ou(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json();return r=n,(Array.isArray(r)?r.map(Uu):r)??[];var r}}function Lu(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("pubsub/peers",{signal:n.signal,searchParams:pi({arg:Ru(t),...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function Fu(e){return async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=pi({arg:Ru(t),...r}),s=new AbortController,i=Os([s.signal,r.signal]);try{const t=await e.post("pubsub/pub",{signal:i,searchParams:o,...await di([n],s,r.headers)});await t.text()}finally{i.clear()}}}const zu=Ya("js-kubo-rpc-client:pubsub:subscribe");function Mu(e,t){return async function(n,r){let o,s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.signal=t.subscribe(n,r,i.signal);const a=new Promise(((e,t)=>{o=e,s=t})),c=setTimeout((()=>{o()}),1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:pi({arg:Ru(n),...i}),headers:i.headers}).catch((e=>{t.unsubscribe(n,r),s(e)})).then((e=>{clearTimeout(c),null!=e&&(!async function(e,t){let{onMessage:n,onEnd:r,onError:o}=t;o=o??zu;try{for await(const t of e.ndjson())try{if(null==t.from)continue;null!=t.from&&null!=t.seqno?n({type:"signed",from:zi(t.from),data:_u(t.data),sequenceNumber:Du(t.seqno),topic:Uu(t.topicIDs[0]),key:_u(t.key??"u"),signature:_u(t.signature??"u")}):n({type:"unsigned",data:_u(t.data),topic:Uu(t.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,o(s,!1,t)}}catch(s){Hu(s)||o(s,!0)}finally{r()}}(e,{onMessage:e=>{null!=r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>{t.unsubscribe(n,r)},onError:i.onError}),o())})),a}}const Hu=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}};class Vu{_subs;constructor(){this._subs=new Map}subscribe(e,t,n){const r=this._subs.get(e)??[];if(null!=r.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const o=new AbortController;return this._subs.set(e,[{handler:t,controller:o}].concat(r)),null!=n&&n.addEventListener("abort",(()=>{this.unsubscribe(e,t)})),o.signal}unsubscribe(e,t){const n=this._subs.get(e)??[];let r;null!=t?(this._subs.set(e,n.filter((e=>e.handler!==t))),r=n.filter((e=>e.handler===t))):(this._subs.set(e,[]),r=n),0===(this._subs.get(e)??[]).length&&this._subs.delete(e),r.forEach((e=>{e.controller.abort()}))}}function Gu(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("refs/local",{signal:t.signal,transform:hi,searchParams:pi(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function Wu(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("repo/gc",{signal:t.signal,searchParams:pi(t),headers:t.headers,transform:e=>({err:null!=e.Error?new Error(e.Error):null,cid:null!=e.Key?.["/"]?Be.TO.parse(e.Key["/"]):null})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function Ku(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("repo/stat",{signal:t.signal,searchParams:pi(t),headers:t.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}}}function qu(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(await e.post("repo/version",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()).Version}}function Ju(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findpeer",{signal:n.signal,searchParams:pi({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield ha(e)}()}catch(n){return Promise.reject(n)}}}function Zu(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findprovs",{signal:n.signal,searchParams:pi({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield ha(e)}()}catch(n){return Promise.reject(n)}}}function Xu(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/get",{signal:n.signal,searchParams:pi({arg:t instanceof Uint8Array?Bi(t):t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield ha(e)}()}catch(n){return Promise.reject(n)}}}function Qu(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return async function*(){const r=Array.isArray(t)?t:[t],o=await e.post("routing/provide",{signal:n.signal,searchParams:pi({arg:r.map((e=>e.toString())),...n}),headers:n.headers});for await(const e of o.ndjson())yield ha(e)}()}catch(n){return Promise.reject(n)}}}function Yu(e){return function(t,n){try{let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async function*(){const o=new AbortController,s=Os([o.signal,r.signal]);try{const i=await e.post("routing/put",{signal:s,searchParams:pi({arg:t instanceof Uint8Array?Bi(t):t.toString(),stream:!0,...r}),...await di([n],o,r.headers)});for await(const e of i.ndjson())yield ha(e)}finally{s.clear()}}()}catch(r){return Promise.reject(r)}}}function el(e){return function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("stats/bw",{signal:t.signal,searchParams:pi(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}}function tl(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:pi(t),headers:t.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((e=>({id:zi(e),addrs:(r[e]??[]).map((e=>(0,a.HZ)(e)))})))}}function nl(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/connect",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function rl(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/disconnect",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),{Strings:o}=await r.json();return o??[]}}function ol(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:pi(t),headers:t.headers}),{Strings:r}=await n.json();return(r??[]).map((e=>(0,a.HZ)(e)))}}function sl(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/peers",{signal:t.signal,searchParams:pi(t),headers:t.headers});return((await n.json()).Peers??[]).map((e=>({addr:(0,a.HZ)(e.Addr),peer:zi(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}}class il{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(e){const t=new Hc(e),n={name:Rs.identity.name,code:Rs.identity.code,encode:e=>e,decode:e=>e},a=Object.values(Ds.Fo);(e.ipld?.bases??[]).forEach((e=>a.push(e))),this.bases=new Gc({bases:a,loadBase:e.ipld?.loadBase});const c=Object.values(Ds.qr);[s,r,o,i,n].concat(e.ipld?.codecs??[]).forEach((e=>{c.push(e)})),this.codecs=new Kc({codecs:c,loadCodec:e.ipld?.loadCodec});const u=Object.values(Ds.RY);(e.ipld?.hashers??[]).forEach((e=>u.push(e))),this.hashers=new Jc({hashers:u,loadHasher:e.ipld?.loadHasher}),this.bitswap=function(e){return{wantlist:Vi(e),wantlistForPeer:Hi(e),stat:Mi(e)}}(t),this.block=function(e){return{get:Gi(e),put:Wi(e),rm:Ki(e),stat:Ji(e)}}(t),this.bootstrap=function(e){return{add:Zi(e),list:Xi(e),rm:Qi(e)}}(t),this.config=function(e){return{getAll:Yi(e),get:ea(e),set:oa(e),replace:ra(e),profiles:na(e)}}(t),this.dag=function(e,t){return{export:ia(e),get:ua(e,t),import:la(e),put:fa(e,t),resolve:da(e)}}(t,this.codecs),this.dht=function(e){return{query:pa(e)}}(t),this.diag=function(e){return{cmds:wa(e),net:ma(e),sys:ba(e)}}(t),this.files=function(e){return{cp:va(e),flush:Ea(e),ls:Aa(e),mkdir:Ta(e),mv:$a(e),read:Sa(e),rm:Na(e),stat:ja(e),write:Ba(e)}}(t),this.key=function(e){return{gen:_a(e),import:Da(e),list:Ra(e),rename:Oa(e),rm:La(e)}}(t),this.log=function(e){return{level:Zc(e),ls:Xc(e),tail:Qc(e)}}(t),this.name=function(e){return{publish:eu(e),resolve:su(e),pubsub:ou(e)}}(t),this.object=function(e){return{patch:cu(e)}}(t,this.codecs),this.pin=function(e){return{addAll:du(e),add:hu(e),ls:gu(e),rmAll:Bu(e),rm:xu(e),remote:ju(e)}}(t),this.pubsub=function(e){const t=new Vu;return{ls:Ou(e),peers:Lu(e),publish:Fu(e),subscribe:Mu(e,t),unsubscribe:(n=t,async function(e,t){n.unsubscribe(e,t)})};var n}(t),this.refs=function(e){return Object.assign((function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=Array.isArray(t)?t:[t],o=await e.post("refs",{signal:n.signal,searchParams:pi({arg:r.map((e=>`${e instanceof Uint8Array?Be.TO.decode(e):e}`)),...n}),headers:n.headers,transform:hi});yield*o.ndjson()}()}catch(n){return Promise.reject(n)}}),{local:Gu(e)})}(t),this.repo=function(e){return{gc:Wu(e),stat:Ku(e),version:qu(e)}}(t),this.routing=function(e){return{findPeer:Ju(e),findProvs:Zu(e),get:Xu(e),provide:Qu(e),put:Yu(e)}}(t),this.stats=function(e){return{bitswap:Mi(e),repo:Ku(e),bw:el(e)}}(t),this.swarm=function(e){return{addrs:tl(e),connect:nl(e),disconnect:rl(e),localAddrs:ol(e),peers:sl(e)}}(t),this.add=function(e){const t=gi(e);return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Ei(e),o=t(r,n),s=await bi(o);if(null==s)throw new Error("Invalid body");return s}}(t),this.addAll=gi(t),this.cat=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("cat",{signal:n.signal,searchParams:pi({arg:t.toString(),...n}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}}(t),this.get=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r={arg:`${t instanceof Uint8Array?Be.TO.decode(t):t}`,...n},o=await e.post("get",{signal:n.signal,searchParams:pi(r),headers:n.headers});yield*o.iterator()}()}catch(n){return Promise.reject(n)}}}(t),this.ls=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=`${t instanceof Uint8Array?Be.TO.decode(t):t}`;async function o(t){let n=t.Hash;if(!0===n.includes("/")){const t=!0===n.startsWith("/ipfs/")?n:`/ipfs/${n}`;n=(await ja(e)(t)).cid}else n=Be.TO.parse(n);return{name:t.Name,path:r+(null!=t.Name?`/${t.Name}`:""),size:t.Size,cid:n,type:Yc(t)}}const s=await e.post("ls",{signal:n.signal,searchParams:pi({arg:r,...n}),headers:n.headers});for await(let e of s.ndjson()){if(e=e.Objects,null==e)throw new Error("expected .Objects in results");if(e=e[0],null==e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(0===t.length)return void(yield o(e));yield*t.map(o)}}()}catch(n){return Promise.reject(n)}}}(t),this.id=xa(t),this.version=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("version",{signal:t.signal,searchParams:pi(t),headers:t.headers});return{...hi(await n.json()),"ipfs-http-client":"1.0.0"}}}(t),this.stop=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("shutdown",{signal:t.signal,searchParams:pi(t),headers:t.headers});await n.text()}}(t),this.ping=function(e){return function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("ping",{signal:n.signal,searchParams:pi({arg:`${t}`,...n}),headers:n.headers,transform:hi});yield*r.ndjson()}()}catch(n){return Promise.reject(n)}}}(t),this.resolve=function(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("resolve",{signal:n.signal,searchParams:pi({arg:t,...n}),headers:n.headers}),{Path:o}=await r.json();return o}}(t),this.commands=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("commands",{signal:t.signal,searchParams:pi(t),headers:t.headers})).json()}}(t),this.mount=function(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("dns",{signal:t.signal,searchParams:pi(t),headers:t.headers});return hi(await n.json())}}(t),this.isOnline=function(e){const t=xa(e);return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=await t(e);return Boolean(n?.addresses?.length)}catch{return!1}}}(t),this.getEndpointConfig=function(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}(t)}}n(2672);function al(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return("string"===typeof e||(0,a.R8)(e)||e instanceof URL)&&(e={url:e}),function(e){return new il(e)}(e)}}}]);
//# sourceMappingURL=163.125fd398.chunk.js.map