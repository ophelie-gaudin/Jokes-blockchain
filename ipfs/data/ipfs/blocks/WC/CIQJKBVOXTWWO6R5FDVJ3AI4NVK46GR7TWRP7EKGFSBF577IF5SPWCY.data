n a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(typeof s._bodyInit>"u"?null:s._bodyInit)}))}S.polyfill=!0,n.fetch||(n.fetch=S,n.Headers=h,n.Request=v,n.Response=A),e.Headers=h,e.Request=v,e.Response=A,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),Oe=(e,t,n,r)=>{if("length"===n||"prototype"===n||"arguments"===n||"caller"===n)return;let o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!Be(o,i)&&r||Object.defineProperty(e,n,i)},Be=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},De=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Ne=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Pe=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function Fe(e,t,{ignoreNonConfigurable:n=!1}={}){let{name:r}=e;for(let o of Reflect.ownKeys(t))Oe(e,t,o,n);return((e,t)=>{let n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{let r=""===n?"":`with ${n.trim()}() `,o=De.bind(null,r,t.toString());Object.defineProperty(o,"name",Pe),Object.defineProperty(e,"toString",{...Ne,value:o})})(e,t,r),e}var _e=new WeakMap;var Le=Ae(xe(),1),Re=["string","number","bigint","symbol"],Ue=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Me(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";let t=typeof e;if(Re.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";let n=function(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Ue.includes(t))return t}(e);return n||"Object"}var je=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};je.uint=new je(0,"uint",!0),je.negint=new je(1,"negint",!0),je.bytes=new je(2,"bytes",!0),je.string=new je(3,"string",!0),je.array=new je(4,"array",!1),je.map=new je(5,"map",!1),je.tag=new je(6,"tag",!1),je.float=new je(7,"float",!0),je.false=new je(7,"false",!0),je.true=new je(7,"true",!0),je.null=new je(7,"null",!0),je.undefined=new je(7,"undefined",!0),je.break=new je(7,"break",!0);var $e=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}},He=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,ze=new TextDecoder,Ve=new TextEncoder;function Ge(e){return He&&globalThis.Buffer.isBuffer(e)}var We=He?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Xe(e,t,n):(e,t,n)=>n-t>64?ze.decode(e.subarray(t,n)):Xe(e,t,n),qe=He?e=>e.length>64?globalThis.Buffer.from(e):Je(e):e=>e.length>64?Ve.encode(e):Je(e),Ke=He?(e,t,n)=>Ge(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),Ze=He?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),function(e){return e instanceof Uint8Array?Ge(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}(globalThis.Buffer.concat(e,t))):(e,t)=>{let n=new Uint8Array(t),r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},Ye=He?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Je(e,t=1/0){let n,r=e.length,o=null,i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Xe(e,t,n){let r=[];for(;t<n;){let o=e[t],i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=e[t+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=e[t+1],r=e[t+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),t+=s}return function(e){let t=e.length;if(t<=Qe)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Qe));return n}(r)}var Qe=4096;var et="CBOR decode error:",tt="CBOR encode error:",nt=[];function rt(e,t,n){if(e.length-t<n)throw new Error(`${et} not enough data for type`)}nt[23]=1,nt[24]=2,nt[25]=3,nt[26]=5,nt[27]=9;var ot=[24,256,65536,4294967296,BigInt("18446744073709551616")];function it(e,t,n){rt(e,t,1);let r=e[t];if(!0===n.strict&&r<ot[0])throw new Error(`${et} integer encoded in more bytes than necessary (strict decode)`);return r}function st(e,t,n){rt(e,t,2);let r=e[t]<<8|e[t+1];if(!0===n.strict&&r<ot[1])throw new Error(`${et} integer encoded in more bytes than necessary (strict decode)`);return r}function at(e,t,n){rt(e,t,4);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<ot[2])throw new Error(`${et} integer encoded in more bytes than necessary (strict decode)`);return r}function ut(e,t,n){rt(e,t,8);let r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<ot[3])throw new Error(`${et} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${et} integers outside of the safe integer range are not supported`)}function lt(e,t){return ct(e,0,t.value)}function ct(e,t,n){if(n<ot[0]){let r=Number(n);e.push([t|r])}else if(n<ot[1]){let r=Number(n);e.push([24|t,r])}else if(n<ot[2]){let r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<ot[3]){let r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{let r=BigInt(n);if(!(r<ot[4]))throw new Error(`${et} encountered BigInt larger than allowable range`);{let n=[27|t,0,0,0,0,0,0,0],o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,e.push(n)}}}lt.encodedSize=function(e){return ct.encodedSize(e.value)},ct.encodedSize=function(e){return e<ot[0]?1:e<ot[1]?2:e<ot[2]?3:e<ot[3]?5:9},lt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};var ft=BigInt(-1),ht=BigInt(1);function dt(e,t){let n=t.value,r="bigint"==typeof n?n*ft-ht:-1*n-1;ct(e,t.type.majorEncoded,r)}function pt(e,t,n,r){rt(e,t,n+r);let o=Ke(e,t+n,t+n+r);return new $e(je.bytes,o,n+r)}function gt(e,t,n,r){return pt(e,t,1,n)}function yt(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===je.string?qe(e.value):e.value),e.encodedBytes}function mt(e,t){let n=yt(t);ct(e,t.type.majorEncoded,n.length),e.push(n)}function bt(e,t,n,r,o){let i=n+r;rt(e,t,i);let s=new $e(je.string,We(e,t+n,t+i),i);return!0===o.retainStringBytes&&(s.byteValue=Ke(e,t+n,t+i)),s}function vt(e,t,n,r){return bt(e,t,1,n,r)}dt.encodedSize=function(e){let t=e.value,n="bigint"==typeof t?t*ft-ht:-1*t-1;return n<ot[0]?1:n<ot[1]?2:n<ot[2]?3:n<ot[3]?5:9},dt.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},mt.encodedSize=function(e){let t=yt(e);return ct.encodedSize(t.length)+t.length},mt.compareTokens=function(e,t){return function(e,t){return e.length<t.length?-1:e.length>t.length?1:function(e,t){if(Ge(e)&&Ge(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(e,t)}(yt(e),yt(t))};var wt=mt;function Et(e,t,n,r){return new $e(je.array,r,n)}function At(e,t,n,r){return Et(0,0,1,n)}function Ct(e,t){ct(e,je.array.majorEncoded,t.value)}function St(e,t,n,r){return new $e(je.map,r,n)}function Tt(e,t,n,r){return St(0,0,1,n)}function kt(e,t){ct(e,je.map.majorEncoded,t.value)}function xt(e,t,n,r){return new $e(je.tag,n,1)}function It(e,t){ct(e,je.tag.majorEncoded,t.value)}Ct.compareTokens=lt.compareTokens,Ct.encodedSize=function(e){return ct.encodedSize(e.value)},kt.compareTokens=lt.compareTokens,kt.encodedSize=function(e){return ct.encodedSize(e.value)},It.compareTokens=lt.compareTokens,It.encodedSize=function(e){return ct.encodedSize(e.value)};function Ot(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error(`${et} NaN values are not supported`);if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${et} Infinity values are not supported`)}return new $e(je.float,e,t)}function Bt(e,t,n){let r=t.value;if(!1===r)e.push([20|je.float.majorEncoded]);else if(!0===r)e.push([21|je.float.majorEncoded]);else if(null===r)e.push([22|je.float.majorEncoded]);else if(void 0===r)e.push([23|je.float.majorEncoded]);else{let t,o=!1;(!n||!0!==n.float64)&&(Ft(r),t=_t(Pt,1),r===t||Number.isNaN(r)?(Pt[0]=249,e.push(Pt.slice(0,3)),o=!0):(Lt(r),t=Rt(Pt,1),r===t&&(Pt[0]=250,e.push(Pt.slice(0,5)),o=!0))),o||(function(e){Nt.setFloat64(0,e,!1)}(r),t=Ut(Pt,1),Pt[0]=251,e.push(Pt.slice(0,9)))}}Bt.encodedSize=function(e,t){let n=e.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!t||!0!==t.float64){Ft(n);let e=_t(Pt,1);if(n===e||Number.isNaN(n))return 3;if(Lt(n),e=Rt(Pt,1),n===e)return 5}return 9};var Dt=new ArrayBuffer(9),Nt=new DataView(Dt,1),Pt=new Uint8Array(Dt,0);function Ft(e){if(e===1/0)Nt.setUint16(0,31744,!1);else if(e===-1/0)Nt.setUint16(0,64512,!1);else if(Number.isNaN(e))Nt.setUint16(0,32256,!1);else{Nt.setFloat32(0,e);let t=Nt.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Nt.setUint16(0,31744,!1);else if(0===n)Nt.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{let e=n-127;e<-24?Nt.setUint16(0,0):e<-14?Nt.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Nt.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function _t(e,t){if(e.length-t<2)throw new Error(`${et} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;let r,o=n>>10&31,i=1023&n;return r=0===o?i*2**-24:31!==o?(i+1024)*2**(o-25):0===i?1/0:NaN,32768&n?-r:r}function Lt(e){Nt.setFloat32(0,e,!1)}function Rt(e,t){if(e.length-t<4)throw new Error(`${et} not enough data for float32`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Ut(e,t){if(e.length-t<8)throw new Error(`${et} not enough data for float64`);let n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Mt(e,t,n){throw new Error(`${et} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function jt(e){return()=>{throw new Error(`${et} ${e}`)}}Bt.compareTokens=lt.compareTokens;var $t=[];for(let n=0;n<=23;n++)$t[n]=Mt;$t[24]=function(e,t,n,r){return new $e(je.uint,it(e,t+1,r),2)},$t[25]=function(e,t,n,r){return new $e(je.uint,st(e,t+1,r),3)},$t[26]=function(e,t,n,r){return new $e(je.uint,at(e,t+1,r),5)},$t[27]=function(e,t,n,r){return new $e(je.uint,ut(e,t+1,r),9)},$t[28]=Mt,$t[29]=Mt,$t[30]=Mt,$t[31]=Mt;for(let n=32;n<=55;n++)$t[n]=Mt;$t[56]=function(e,t,n,r){return new $e(je.negint,-1-it(e,t+1,r),2)},$t[57]=function(e,t,n,r){return new $e(je.negint,-1-st(e,t+1,r),3)},$t[58]=function(e,t,n,r){return new $e(je.negint,-1-at(e,t+1,r),5)},$t[59]=function(e,t,n,r){let o=ut(e,t+1,r);if("bigint"!=typeof o){let e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new $e(je.negint,e,9)}if(!0!==r.allowBigInt)throw new Error(`${et} integers outside of the safe integer range are not supported`);return new $e(je.negint,ft-BigInt(o),9)},$t[60]=Mt,$t[61]=Mt,$t[62]=Mt,$t[63]=Mt;for(let n=64;n<=87;n++)$t[n]=gt;$t[88]=function(e,t,n,r){return pt(e,t,2,it(e,t+1,r))},$t[89]=function(e,t,n,r){return pt(e,t,3,st(e,t+1,r))},$t[90]=function(e,t,n,r){return pt(e,t,5,at(e,t+1,r))},$t[91]=function(e,t,n,r){let o=ut(e,t+1,r);if("bigint"==typeof o)throw new Error(`${et} 64-bit integer bytes lengths not supported`);return pt(e,t,9,o)},$t[92]=Mt,$t[93]=Mt,$t[94]=Mt,$t[95]=jt("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)$t[n]=vt;$t[120]=function(e,t,n,r){return bt(e,t,2,it(e,t+1,r),r)},$t[121]=function(e,t,n,r){return bt(e,t,3,st(e,t+1,r),r)},$t[122]=function(e,t,n,r){return bt(e,t,5,at(e,t+1,r),r)},$t[123]=function(e,t,n,r){let o=ut(e,t+1,r);if("bigint"==typeof o)throw new Error(`${et} 64-bit integer string lengths not supported`);return bt(e,t,9,o,r)},$t[124]=Mt,$t[125]=Mt,$t[126]=Mt,$t[127]=jt("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)$t[n]=At;$t[152]=function(e,t,n,r){return Et(0,0,2,it(e,t+1,r))},$t[153]=function(e,t,n,r){return Et(0,0,3,st(e,t+1,r))},$t[154]=function(e,t,n,r){return Et(0,0,5,at(e,t+1,r))},$t[155]=function(e,t,n,r){let o=ut(e,t+1,r);if("bigint"==typeof o)throw new Error(`${et} 64-bit integer array lengths not supported`);return Et(0,0,9,o)},$t[156]=Mt,$t[157]=Mt,$t[158]=Mt,$t[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${et} indefinite length items not allowed`);return Et(0,0,1,1/0)};for(let n=160;n<=183;n++)$t[n]=Tt;$t[184]=function(e,t,n,r){return St(0,0,2,it(e,t+1,r))},$t[185]=function(e,t,n,r){return St(0,0,3,st(e,t+1,r))},$t[186]=function(e,t,n,r){return St(0,0,5,at(e,t+1,r))},$t[187]=function(e,t,n,r){let o=ut(e,t+1,r);if("bigint"==typeof o)throw new Error(`${et} 64-bit integer map lengths not supported`);return St(0,0,9,o)},$t[188]=Mt,$t[189]=Mt,$t[190]=Mt,$t[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${et} indefinite length items not allowed`);return St(0,0,1,1/0)};for(let n=192;n<=215;n++)$t[n]=xt;$t[216]=function(e,t,n,r){return new $e(je.tag,it(e,t+1,r),2)},$t[217]=function(e,t,n,r){return new $e(je.tag,st(e,t+1,r),3)},$t[218]=function(e,t,n,r){return new $e(je.tag,at(e,t+1,r),5)},$t[219]=function(e,t,n,r){return new $e(je.tag,ut(e,t+1,r),9)},$t[220]=Mt,$t[221]=Mt,$t[222]=Mt,$t[223]=Mt;for(let n=224;n<=243;n++)$t[n]=jt("simple values are not supported");$t[244]=Mt,$t[245]=Mt,$t[246]=Mt,$t[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error(`${et} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new $e(je.null,null,1):new $e(je.undefined,void 0,1)},$t[248]=jt("simple values are not supported"),$t[249]=function(e,t,n,r){return Ot(_t(e,t+1),3,r)},$t[250]=function(e,t,n,r){return Ot(Rt(e,t+1),5,r)},$t[251]=function(e,t,n,r){return Ot(Ut(e,t+1),9,r)},$t[252]=Mt,$t[253]=Mt,$t[254]=Mt,$t[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error(`${et} indefinite length items not allowed`);return new $e(je.break,void 0,1)};var Ht=[];for(let n=0;n<24;n++)Ht[n]=new $e(je.uint,n,1);for(let n=-1;n>=-24;n--)Ht[31-n]=new $e(je.negint,n,1);Ht[64]=new $e(je.bytes,new Uint8Array(0),1),Ht[96]=new $e(je.string,"",1),Ht[128]=new $e(je.array,0,1),Ht[160]=new $e(je.map,0,1),Ht[244]=new $e(je.false,!1,1),Ht[245]=new $e(je.true,!0,1),Ht[246]=new $e(je.null,null,1);(function(){let e=[];e[je.uint.major]=lt,e[je.negint.major]=dt,e[je.bytes.major]=mt,e[je.string.major]=wt,e[je.array.major]=Ct,e[je.map.major]=kt,e[je.tag.major]=It,e[je.float.major]=Bt})(),new class{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){let e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Ye(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Ke(n,0,this.cursor)}else t=Ze(this.chunks,this.cursor);return e&&this.reset(),t}};var zt=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${tt} object contains circular references`);return new zt(t,e)}},Vt={null:new $e(je.null,null),undefined:new $e(je.undefined,void 0),true:new $e(je.true,!0),false:new $e(je.false,!1),emptyArray:new $e(je.array,0),emptyMap:new $e(je.map,0)},Gt={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new $e(e>=0?je.uint:je.negint,e):new $e(je.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new $e(je.uint,e):new $e(je.negint,e),Uint8Array:(e,t,n,r)=>new $e(je.bytes,e),string:(e,t,n,r)=>new $e(je.string,e),boolean:(e,t,n,r)=>e?Vt.true:Vt.false,null:(e,t,n,r)=>Vt.null,undefined:(e,t,n,r)=>Vt.undefined,ArrayBuffer:(e,t,n,r)=>new $e(je.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new $e(je.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[Vt.emptyArray,new $e(je.break)]:Vt.emptyArray;r=zt.createCheck(r,e);let o=[],i=0;for(let s of e)o[i++]=Wt(s,n,r);return n.addBreakTokens?[new $e(je.array,e.length),o,new $e(je.break)]:[new $e(je.array,e.length),o]},Object(e,t,n,r){let o="Object"!==t,i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return!0===n.addBreakTokens?[Vt.emptyMap,new $e(je.break)]:Vt.emptyMap;r=zt.createCheck(r,e);let a=[],u=0;for(let l of i)a[u++]=[Wt(l,n,r),Wt(o?e.get(l):e[l],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new $e(je.map,s),a,new $e(je.break)]:[new $e(je.map,s),a]}};Gt.Map=Gt.Object,Gt.Buffer=Gt.Uint8Array;for(let n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Gt[`${n}Array`]=Gt.DataView;function Wt(e,t={},n){let r=Me(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||Gt[r];if("function"==typeof o){let i=o(e,r,t,n);if(null!=i)return i}let i=Gt[r];if(!i)throw new Error(`${tt} unsupported type: ${r}`);return i(e,r,t,n)}var qt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Kt=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=Ht[e];if(void 0===t){let n=$t[e];if(!n)throw new Error(`${et} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let r=31&e;t=n(this.data,this.pos,r,this.options)}return this.pos+=t.encodedLength,t}},Zt=Symbol.for("DONE"),Yt=Symbol.for("BREAK");function Jt(e,t){if(e.done())return Zt;let n=e.next();if(n.type===je.break)return Yt;if(n.type.terminal)return n.value;if(n.type===je.array)return function(e,t,n){let r=[];for(let o=0;o<e.value;o++){let i=Jt(t,n);if(i===Yt){if(e.value===1/0)break;throw new Error(`${et} got unexpected break to lengthed array`)}if(i===Zt)throw new Error(`${et} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}(n,e,t);if(n.type===je.map)return function(e,t,n){let r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){let a=Jt(t,n);if(a===Yt){if(e.value===1/0)break;throw new Error(`${et} got unexpected break to lengthed map`)}if(a===Zt)throw new Error(`${et} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof a)throw new Error(`${et} non-string keys not supported (got ${typeof a})`);let u=Jt(t,n);if(u===Zt)throw new Error(`${et} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(a,u):o[a]=u}return r?i:o}(n,e,t);if(n.type===je.tag){if(t.tags&&"function"==typeof t.tags[n.value]){let r=Jt(e,t);return t.tags[n.value](r)}throw new Error(`${et} tag not supported (${n.value})`)}throw new Error("unsupported")}var Xt=function e(t,n,r){n=n||[];for(var o=r=r||0;t>=tn;)n[r++]=255&t|Qt,t/=128;for(;t&en;)n[r++]=255&t|Qt,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},Qt=128,en=-128,tn=Math.pow(2,31);var nn=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&on)<<i:(r&on)*Math.pow(2,i),i+=7}while(r>=rn);return e.bytes=s-n,o},rn=128,on=127;var sn=Math.pow(2,7),an=Math.pow(2,14),un=Math.pow(2,21),ln=Math.pow(2,28),cn=Math.pow(2,35),fn=Math.pow(2,42),hn=Math.pow(2,49),dn=Math.pow(2,56),pn=Math.pow(2,63),gn={encode:Xt,decode:nn,encodingLength:function(e){return e<sn?1:e<an?2:e<un?3:e<ln?4:e<cn?5:e<fn?6:e<hn?7:e<dn?8:e<pn?9:10}},yn=(e,t=0)=>[gn.decode(e,t),gn.decode.bytes],mn=(e,t,n=0)=>(gn.encode(e,t,n),t),bn=e=>gn.encodingLength(e),vn=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),wn=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}};var En=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,u=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===u;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var c=n[e.charCodeAt(t)];if(255===c)return;for(var f=0,h=i-1;(0!==c||f<o)&&-1!==h;h--,f++)c+=a*s[h]>>>0,s[h]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var d=i-o;d!==i&&0===s[d];)d++;for(var p=new Uint8Array(r+(i-d)),g=r;d!==i;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*c+1>>>0,l=new Uint8Array(s);o!==i;){for(var f=t[o],h=0,d=s-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=u.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}},An=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Cn=class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Tn(this,e)}},Sn=class{constructor(e){this.decoders=e}or(e){return Tn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Tn=(e,t)=>new Sn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),kn=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new An(e,t,n),this.decoder=new Cn(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},xn=({name:e,prefix:t,encode:n,decode:r})=>new kn(e,t,n,r),In=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:o}=En(n,t);return xn({prefix:e,name:t,encode:r,decode:e=>vn(o(e))})},On=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>xn({prefix:t,name:e,encode:e=>((e,t,n)=>{let r="="===t[t.length-1],o=(1<<n)-1,i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{let o={};for(let c=0;c<t.length;++c)o[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*n/8|0),a=0,u=0,l=0;for(let c=0;c<i;++c){let t=o[e[c]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);u=u<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),Bn=In({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dn=(In({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),On({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Nn=(On({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),On({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),On({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),On({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),On({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),On({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),On({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),On({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),class{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:$n,byteLength:$n,code:jn,version:jn,multihash:jn,bytes:jn,_baseCache:$n,asCID:$n})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==Ln)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Rn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Nn.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=((e,t)=>{let n=t.byteLength,r=bn(e),o=r+bn(n),i=new Uint8Array(o+n);return mn(e,i,0),mn(n,i,r),i.set(t,o),new wn(e,n,t,i)})(e,t);return Nn.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&((e,t)=>e===t||e.code===t.code&&e.size===t.size&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,t.bytes))(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?Fn(t,r,e||Bn.encoder):_n(t,r,e||Dn.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Hn(/^0\.0/,zn),!(!e||!e[Mn]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Nn)return e;if(null!=e&&e.asCID===e){let{version:t,code:n,multihash:r,bytes:o}=e;return new Nn(t,n,r,o||Un(t,n,r.bytes))}if(null!=e&&!0===e[Mn]){let{version:t,multihash:n,code:r}=e,o=(e=>{let t=vn(e),[n,r]=yn(t),[o,i]=yn(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new wn(n,o,s,t)})(n);return Nn.create(t,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==Ln)throw new Error(`Version 0 CID must use dag-pb (code: ${Ln}) block encoding`);return new Nn(e,t,n,n.bytes);case 1:{let r=Un(e,t,n.bytes);return new Nn(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Nn.create(0,Ln,e)}static createV1(e,t){return Nn.create(1,e,t)}static decode(e){let[t,n]=Nn.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Nn.inspectBytes(e),n=t.size-t.multihashSize,r=vn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=r.subarray(t.multihashSize-t.digestSize),i=new wn(t.multihashCode,t.digestSize,o,r);return[0===t.version?Nn.createV0(i):Nn.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=yn(e.subarray(t));return t+=r,n},r=n(),o=Ln;if(18===r?(r=0,t=0):1===r&&(o=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){let[n,r]=Pn(e,t),o=Nn.decode(r);return o._baseCache.set(n,e),o}}),Pn=(e,t)=>{switch(e[0]){case"Q":{let n=t||Bn;return[Bn.prefix,n.decode(`${Bn.prefix}${e}`)]}case Bn.prefix:{let n=t||Bn;return[Bn.prefix,n.decode(e)]}case Dn.prefix:{let n=t||Dn;return[Dn.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Fn=(e,t,n)=>{let{prefix:r}=n;if(r!==Bn.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o},_n=(e,t,n)=>{let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o},Ln=112,Rn=18,Un=(e,t,n)=>{let r=bn(e),o=r+bn(t),i=new Uint8Array(o+n.byteLength);return mn(e,i,0),mn(t,i,r),i.set(n,o),i},Mn=Symbol.for("@ipld/js-cid/CID"),jn={writable:!1,configurable:!1,enumerable:!0},$n={writable:!1,enumerable:!1,configurable:!1},Hn=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},zn="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";var Vn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Vn.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Nn.decode(e.subarray(1))};var Gn=e=>function(e,t){if(!(e instanceof Uint8Array))throw new Error(`${et} data to decode must be a Uint8Array`);let n=(t=Object.assign({},qt,t)).tokenizer||new Kt(e,t),r=Jt(n,t);if(r===Zt)throw new Error(`${et} did not find any content to decode`);if(r===Yt)throw new Error(`${et} got unexpected break`);if(!n.done())throw new Error(`${et} too many terminals, data makes no sense`);return r}(e,Vn);var Wn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,u=e.charAt(0),l=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===u;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var c=n[e.charCodeAt(t)];if(255===c)return;for(var f=0,h=i-1;(0!==c||f<o)&&-1!==h;h--,f++)c+=a*s[h]>>>0,s[h]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var d=i-o;d!==i&&0===s[d];)d++;for(var p=new Uint8Array(r+(i-d)),g=r;d!==i;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*c+1>>>0,l=new Uint8Array(s);o!==i;){for(var f=t[o],h=0,d=s-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=u.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:f,decode:function(e){var n=f(e);if(n)return n;throw new Error(`Non-${t} character`)}}},qn=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),Kn=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Zn=class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Jn(this,e)}},Yn=class{constructor(e){this.decoders=e}or(e){return Jn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Jn=(e,t)=>new Yn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Xn=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Kn(e,t,n),this.decoder=new Zn(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Qn=({name:e,prefix:t,encode:n,decode:r})=>new Xn(e,t,n,r),er=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:o}=Wn(n,t);return Qn({prefix:e,name:t,encode:r,decode:e=>qn(o(e))})},tr=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Qn({prefix:t,name:e,encode:e=>((e,t,n)=>{let r="="===t[t.length-1],o=(1<<n)-1,i="",s=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{let o={};for(let c=0;c<t.length;++c)o[t[c]]=c;let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*n/8|0),a=0,u=0,l=0;for(let c=0;c<i;++c){let t=o[e[c]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);u=u<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),nr=tr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rr=(tr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),er({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"})),or=(er({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),function e(t,n,r){n=n||[];for(var o=r=r||0;t>=ar;)n[r++]=255&t|ir,t/=128;for(;t&sr;)n[r++]=255&t|ir,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n}),ir=128,sr=-128,ar=Math.pow(2,31);var ur=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&cr)<<i:(r&cr)*Math.pow(2,i),i+=7}while(r>=lr);return e.bytes=s-n,o},lr=128,cr=127;var fr=Math.pow(2,7),hr=Math.pow(2,14),dr=Math.pow(2,21),pr=Math.pow(2,28),gr=Math.pow(2,35),yr=Math.pow(2,42),mr=Math.pow(2,49),br=Math.pow(2,56),vr=Math.pow(2,63),wr={encode:or,decode:ur,encodingLength:function(e){return e<fr?1:e<hr?2:e<dr?3:e<pr?4:e<gr?5:e<yr?6:e<mr?7:e<br?8:e<vr?9:10}},Er=(e,t=0)=>[wr.decode(e,t),wr.decode.bytes],Ar=(e,t,n=0)=>(wr.encode(e,t,n),t),Cr=e=>wr.encodingLength(e),Sr=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}},Tr=(e,t)=>{let{bytes:n,version:r}=e;return 0===r?Br(n,xr(e),t||rr.encoder):Dr(n,xr(e),t||nr.encoder)},kr=new WeakMap,xr=e=>{let t=kr.get(e);if(null==t){let t=new Map;return kr.set(e,t),t}return t},Ir=class{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Nr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Pr)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ir.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=((e,t)=>{let n=t.byteLength,r=Cr(e),o=r+Cr(n),i=new Uint8Array(o+n);return Ar(e,i,0),Ar(n,i,r),i.set(t,o),new Sr(e,n,t,i)})(e,t);return Ir.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ir.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&((e,t)=>{if(e===t)return!0;{let n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,n.bytes)}})(e.multihash,n.multihash)}toString(e){return Tr(this,e)}toJSON(){return{"/":Tr(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;let t=e;if(t instanceof Ir)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){let{version:e,code:n,multihash:r,bytes:o}=t;return new Ir(e,n,r,o||Fr(e,n,r.bytes))}if(!0===t[_r]){let{version:e,multihash:n,code:r}=t,o=(e=>{let t=qn(e),[n,r]=Er(t),[o,i]=Er(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Sr(n,o,s,t)})(n);return Ir.create(e,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Nr)throw new Error(`Version 0 CID must use dag-pb (code: ${Nr}) block encoding`);return new Ir(e,t,n,n.bytes);case 1:{let r=Fr(e,t,n.bytes);return new Ir(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Ir.create(0,Nr,e)}static createV1(e,t){return Ir.create(1,e,t)}static decode(e){let[t,n]=Ir.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=Ir.inspectBytes(e),n=t.size-t.multihashSize,r=qn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=r.subarray(t.multihashSize-t.digestSize),i=new Sr(t.multihashCode,t.digestSize,o,r);return[0===t.version?Ir.createV0(i):Ir.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=Er(e.subarray(t));return t+=r,n},r=n(),o=Nr;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);let i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){let[n,r]=Or(e,t),o=Ir.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return xr(o).set(n,e),o}},Or=(e,t)=>{switch(e[0]){case"Q":{let n=t||rr;return[rr.prefix,n.decode(`${rr.prefix}${e}`)]}case rr.prefix:{let n=t||rr;return[rr.prefix,n.decode(e)]}case nr.prefix:{let n=t||nr;return[nr.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Br=(e,t,n)=>{let{prefix:r}=n;if(r!==rr.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let o=t.get(r);if(null==o){let o=n.encode(e).slice(1);return t.set(r,o),o}return o},Dr=(e,t,n)=>{let{prefix:r}=n,o=t.get(r);if(null==o){let o=n.encode(e);return t.set(r,o),o}return o},Nr=112,Pr=18,Fr=(e,t,n)=>{let r=Cr(e),o=r+Cr(t),i=new Uint8Array(o+n.byteLength);return Ar(e,i,0),Ar(t,i,r),i.set(n,o),i},_r=Symbol.for("@ipld/js-cid/CID"),Lr=Ae(Ie(),1);var Rr=Ir.parse("bafyreif3tfdpr5n4jdrbielmcapwvbpcthepfkwq2vwonmlhirbjmotedi"),Ur=["https://ipfs.io","https://dweb.link"];async function Mr(e,t,n=1){try{let n=await async function(e,t){if("function"==typeof e)return e(t);if("function"==typeof e?.block?.get)return e.block.get(t);let n=Array.isArray(e)?e:[e];for(let o of n){let e=new URL(o);e.pathname=`/ipfs/${t.toString()}`,e.search="?format=raw";try{let t=await(0,Lr.default)(e,{headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"});if(!t.ok)throw t;return new Uint8Array(await t.arrayBuffer())}catch(r){throw new Error(`unable to fetch raw block for CID ${t}`,{cause:r})}}}(e,t);return{obj:await Gn(n),block:n}}catch(r){if(n<3)return await Mr(e,t,n+1);throw r}}var jr=function(e,{cacheKey:t=([e])=>e,cache:n=new Map}={}){let r=new Map,o=function(...o){let i=t(o);if(r.has(i))return r.get(i);let s=(async()=>{try{if(n&&await n.has(i))return await n.get(i);let t=await e.apply(this,o);try{return t}finally{n&&await n.set(i,t)}}finally{r.delete(i)}})();return r.set(i,s),s};return Fe(o,e,{ignoreNonConfigurable:!0}),_e.set(o,n),o}((async function(e,t,n){let r,o;try{({obj:r,block:o}=await Mr(e,t))}catch(s){throw({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"6785409",REACT_APP_VERSION:"4.4.1"}?.DEBUG||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"6785409",REACT_APP_VERSION:"4.4.1"}?.TEST)&&console.error(o?`[ipfs-geoip] failed to parse DAG-CBOR behind CID '${t}'`:`[ipfs-geoip] failed to get raw block for CID '${t}'`,s),s}let i=0;if(!("data"in r)){for(;r.mins[i]&&r.mins[i]<=n;)i++;let t=r.links[i-1];if(!t)throw new Error("Failed to lookup node");let o=function(e){return e?Ir.asCID(e):null}(t);if(!o)throw new Error("Failed to lookup node");return jr(e,o,n)}if("data"in r){for(;r.data[i]&&r.data[i].min<=n;)i++;let e=r.data[i-1];if(!e)throw new Error("Failed to lookup leaf node");if(!e.data)throw new Error("Unmapped range");return function(e){return{country_name:e[0],country_code:e[1],region_code:e[2],city:e[3],postal_code:e[4],latitude:e[5],longitude:e[6],planet:"Earth"}}(e.data)}}),{cachePromiseRejection:!1,cacheKey:e=>{let[,t,n]=e;return`${t}.${n}`}});function $r(e=Ur,t){return jr(e,Rr,Le.default.toLong(t))}var Hr=n(7283),zr=n.n(Hr);class Vr extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Gr extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const Wr=e=>void 0===globalThis.DOMException?new Gr(e):new DOMException(e),qr=e=>{const t=void 0===e.reason?Wr("This operation was aborted."):e.reason;return t instanceof Error?t:Wr(t)};var Kr,Zr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Kr=new WeakMap;const Yr=class{constructor(){Kr.set(this,[])}enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&Zr(this,Kr,"f")[this.size-1].priority>=t.priority)return void Zr(this,Kr,"f").push(n);const r=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=Math.trunc(o/2);let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}(Zr(this,Kr,"f"),n,((e,t)=>t.priority-e.priority));Zr(this,Kr,"f").splice(r,0,n)}dequeue(){const e=Zr(this,Kr,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return Zr(this,Kr,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return Zr(this,Kr,"f").length}};var Jr,Xr,Qr,eo,to,no,ro,oo,io,so,ao,uo,lo,co,fo,ho,po,go,yo,mo,bo,vo,wo,Eo,Ao,Co,So=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},To=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class ko extends Error{}class xo extends(zr()){constructor(e){var t,n,r,o;if(super(),Jr.add(this),Xr.set(this,void 0),Qr.set(this,void 0),eo.set(this,0),to.set(this,void 0),no.set(this,void 0),ro.set(this,0),oo.set(this,void 0),io.set(this,void 0),so.set(this,void 0),ao.set(this,void 0),uo.set(this,0),lo.set(this,void 0),co.set(this,void 0),fo.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Yr,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);So(this,Xr,e.carryoverConcurrencyCount,"f"),So(this,Qr,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),So(this,to,e.intervalCap,"f"),So(this,no,e.interval,"f"),So(this,so,new e.queueClass,"f"),So(this,ao,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,So(this,fo,!0===e.throwOnTimeout,"f"),So(this,co,!1===e.autoStart,"f")}get concurrency(){return To(this,lo,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);So(this,lo,e,"f"),To(this,Jr,"m",Eo).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t={timeout:this.timeout,throwOnTimeout:To(this,fo,"f"),...t},new Promise(((n,r)=>{To(this,so,"f").enqueue((async()=>{var o,i,s;So(this,uo,(i=To(this,uo,"f"),++i),"f"),So(this,eo,(s=To(this,eo,"f"),++s),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new ko("The task was aborted.");let r=e({signal:t.signal});t.timeout&&(r=function(e,t,n,r){let o;const i=new Promise(((i,s)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((r={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...r}).signal){const{signal:e}=r;e.aborted&&s(qr(e)),e.addEventListener("abort",(()=>{s(qr(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof n){try{i(n())}catch(o){s(o)}return}const r=n instanceof Error?n:new Vr("string"===typeof n?n:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),s(r)}),t),(async()=>{try{i(await e)}catch(t){s(t)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else i(e)}));return i.clear=()=>{clearTimeout(o),o=void 0},i}(Promise.resolve(r),t.timeout)),t.signal&&(r=Promise.race([r,To(this,Jr,"m",Ao).call(this,t.signal)]));const i=await r;n(i),this.emit("completed",i)}catch(a){if(a instanceof Vr&&!t.throwOnTimeout)return void n();r(a),this.emit("error",a)}finally{To(this,Jr,"m",go).call(this)}}),t),this.emit("add"),To(this,Jr,"m",bo).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return To(this,co,"f")?(So(this,co,!1,"f"),To(this,Jr,"m",Eo).call(this),this):this}pause(){So(this,co,!0,"f")}clear(){So(this,so,new(To(this,ao,"f")),"f")}async onEmpty(){0!==To(this,so,"f").size&&await To(this,Jr,"m",Co).call(this,"empty")}async onSizeLessThan(e){To(this,so,"f").size<e||await To(this,Jr,"m",Co).call(this,"next",(()=>To(this,so,"f").size<e))}async onIdle(){0===To(this,uo,"f")&&0===To(this,so,"f").size||await To(this,Jr,"m",Co).call(this,"idle")}get size(){return To(this,so,"f").size}sizeBy(e){return To(this,so,"f").filter(e).length}get pending(){return To(this,uo,"f")}get isPaused(){return To(this,co,"f")}}Xr=new WeakMap,Qr=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,ro=new WeakMap,oo=new WeakMap,io=new WeakMap,so=new WeakMap,ao=new WeakMap,uo=new WeakMap,lo=new WeakMap,co=new WeakMap,fo=new WeakMap,Jr=new WeakSet,ho=function(){return To(this,Qr,"f")||To(this,eo,"f")<To(this,to,"f")},po=function(){return To(this,uo,"f")<To(this,lo,"f")},go=function(){var e;So(this,uo,(e=To(this,uo,"f"),--e),"f"),To(this,Jr,"m",bo).call(this),this.emit("next")},yo=function(){To(this,Jr,"m",wo).call(this),To(this,Jr,"m",vo).call(this),So(this,io,void 0,"f")},mo=function(){const e=Date.now();if(void 0===To(this,oo,"f")){const t=To(this,ro,"f")-e;if(!(t<0))return void 0===To(this,io,"f")&&So(this,io,setTimeout((()=>{To(this,Jr,"m",yo).call(this)}),t),"f"),!0;So(this,eo,To(this,Xr,"f")?To(this,uo,"f"):0,"f")}return!1},bo=function(){if(0===To(this,so,"f").size)return To(this,oo,"f")&&clearInterval(To(this,oo,"f")),So(this,oo,void 0,"f"),this.emit("empty"),0===To(this,uo,"f")&&this.emit("idle"),!1;if(!To(this,co,"f")){const e=!To(this,Jr,"a",mo);if(To(this,Jr,"a",ho)&&To(this,Jr,"a",po)){const t=To(this,so,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&To(this,Jr,"m",vo).call(this),!0)}}return!1},vo=function(){To(this,Qr,"f")||void 0!==To(this,oo,"f")||(So(this,oo,setInterval((()=>{To(this,Jr,"m",wo).call(this)}),To(this,no,"f")),"f"),So(this,ro,Date.now()+To(this,no,"f"),"f"))},wo=function(){0===To(this,eo,"f")&&0===To(this,uo,"f")&&To(this,oo,"f")&&(clearInterval(To(this,oo,"f")),So(this,oo,void 0,"f")),So(this,eo,To(this,Xr,"f")?To(this,uo,"f"):0,"f"),To(this,Jr,"m",Eo).call(this)},Eo=function(){for(;To(this,Jr,"m",bo).call(this););},Ao=async function(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(new ko("The task was aborted."))}),{once:!0})}))},Co=async function(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))};const Io=xo;var Oo=n(101),Bo=n.n(Oo),Do=n(7504),No=n.n(Do),Po=n(5649),Fo=n.n(Po),_o=n(8330);const{El:Lo}=_o,Ro=Z().seconds(1),Uo=Lo["ipfs-geoip"];const Mo=e=>4===e[0]&&"127.0.0.1"!==e[1],jo=e=>{if(!e)return null;const{country_name:t,city:n}=e;return n&&t?`${t}, ${n}`:t},$o=e=>e.protoNames().join(" \u2022 "),Ho=e=>{if("n/a"===e)return;let t=parseInt(e);return t="s"===/(s|ms)/.exec(e)[0]?1e3*t:t,t},zo=Fo()((e=>{if(e)for(const n of e.addresses)try{const e=(0,ee.HZ)(n).nodeAddress();if((No().isV4Format(e.address)||No().isV6Format(e.address))&&!No().isPrivate(e.address))return e.address}catch(t){}})),Vo=async(e,t)=>{const n=await zo(t);let r,o=!1,i=!1;try{r=e.nodeAddress()}catch(s){return{isPrivate:o,isNearby:i}}return o=No().isPrivate(r.address),n&&(No().isV4Format(r.address)?i=No().cidrSubnet(`${n}/24`).contains(r.address):No().isV6Format(r.address)&&(i=No().cidrSubnet(`${n}/48`).contains(r.address)&&!No().cidrSubnet("fc00::/8").contains(r.address))),{isPrivate:o,isNearby:i}};class Go{constructor(e){this.geoipCache=pe({name:"geoipCache",version:Uo,maxAge:Z().weeks(1),...e.cache}),this.failedAddrs=Bo()(500),this.queue=new Io({concurrency:e.concurrency,autoStart:!0}),this.geoipLookupPromises=new Map,this.pass=0}async findLocations(e,t){const n={};for(const r of this.optimizedPeerSet(t)){const t=r.peer,o=r.addr.stringTuples().find(Mo);if(!o)continue;const i=o[1];if(this.failedAddrs.has(i))continue;const s=await this.geoipCache.get(i);s?n[t]=s:this.geoipLookupPromises.has(i)||this.geoipLookupPromises.set(i,this.queue.add((async()=>{try{const t=await $r(e,i);await this.geoipCache.set(i,t)}catch(t){this.failedAddrs.set(i,!0)}finally{this.geoipLookupPromises.delete(i)}})))}return n}optimizedPeerSet(e){if(this.pass<3){const t=e=>Ho(e.latency)||9999,n=e.concat().sort(((e,n)=>t(e)-t(n)));switch(this.pass=this.pass+1,this.pass-1){case 0:return n.slice(0,10);case 1:return n.slice(0,100);default:return n.slice(0,200)}}return e}}const Wo=function(e){(e=e||{}).concurrency=e.concurrency||4,e.cache=e.cache||{};const t=new Go(e),n=(0,H.re)({name:"peerLocations",actionBaseType:"PEER_LOCATIONS",getPromise:e=>{let{store:n}=e;return t.findLocations(n.selectAvailableGatewayUrl(),n.selectPeers())},staleAfter:Ro,retryAfter:Ro,persist:!1,checkIfOnline:!1});return n.reactPeerLocationsFetch=(0,H.Mz)("selectRouteInfo","selectPeerLocationsShouldUpdate","selectIpfsConnected",((e,t,n)=>{if("/peers"===e.url&&t&&n)return{actionCreator:"doFetchPeerLocations"}})),n.selectPeerLocationsForSwarm=(0,H.Mz)("selectPeers","selectPeerLocations","selectBootstrapPeers","selectIdentity",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>3?arguments[3]:void 0;return e&&Promise.all(e.map((async e=>{const r=e.peer,o=t?t[r]:null,i=jo(o),s=o&&o.country_code,a=o&&[o.longitude,o.latitude],u=$o(e.addr),l=e.addr.toString(),c=Ho(e.latency),f=e.direction,{isPrivate:h,isNearby:d}=await Vo(e.addr,n);return{peerId:r,location:i,flagCode:s,coordinates:a,connection:u,address:l,protocols:(Array.isArray(e.streams)?Array.from(new Set(e.streams.map((e=>e.Protocol)).map((e=>null!==e&&void 0!==e&&e.trim()?e:"[unnamed]")))).sort():[]).join(", "),direction:f,latency:c,isPrivate:h,isNearby:d}})))})),n.selectPeersCoordinates=(0,H.Mz)("selectPeerLocationsForSwarm",(async e=>{if(!e)return[];return(await e).reduce(((e,t)=>{let{peerId:n,coordinates:r}=t;if(!r)return e;let o=!1;const i=e.map((e=>{if(!e||o)return e;const[t,i]=e.coordinates,[s,a]=r;return t-4<=s&&t+4>=s&&(i-4<=a&&i+4>=a)&&(e.peerIds.push(n),o=!0),e}));return o?i:[...i,{peerIds:[n],coordinates:r}]}),[])})),n};var qo=n(1388),Ko=n(6053),Zo=n(2135),Yo=n.n(Zo),Jo=n(5982);const Xo=e=>e.split(":").at(-1),Qo=e=>[...new Set(e)],ei=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.every((t=>!t.some((t=>t===e))))},ti=(e,t)=>{if(e.length!==t.length)return t;return e.filter((e=>!t.includes(e))).length>0?t:e},ni=async(e,t,n)=>{var r,o,i;const s=t.find((t=>e.endpoint.toString()===t.apiEndpoint.toString())),a=null===s||void 0===s?void 0:s.icon,u=null===s||void 0===s?void 0:s.visitServiceUrl,l={...e,name:e.service,icon:a,visitServiceUrl:u};if("invalid"===(null===e||void 0===e||null===(r=e.stat)||void 0===r?void 0:r.status))return{...l,numberOfPins:-1,online:!1};const c=null===(o=e.stat)||void 0===o||null===(i=o.pinCount)||void 0===i?void 0:i.pinned,f="number"===typeof c,h=f?await ri(e.service,n):void 0;return{...l,numberOfPins:c,online:f,autoUpload:h}},ri=Fo()((async(e,t)=>{try{return await t.config.get(`Pinning.RemoteServices.${e}.Policies.MFS.Enable`)}catch(r){var n;if(null!==(n=r.message)&&void 0!==n&&n.includes("key has no attribute"))try{return await t.config.get(`Pinning.RemoteServices["${e}"].Policies.MFS.Enable`)}catch(o){}console.error(`unexpected config.get error for "${e}": ${r.message}`)}return!1}),{maxAge:3e3}),oi=(e,t)=>{const n=(0,Jo.L)("remotesServicesBackoffs")||{},{service:r}=t,{lastTry:o,tryAfter:i}=n[r]||{lastTry:0,tryAfter:3e4};if(o+i>(new Date).getTime())throw new Error("still within back-off period");try{return e.pin.remote.ls(t)}catch(s){throw s.toString().includes("429 Too Many Requests")&&(n[r]={lastTry:(new Date).getTime(),tryAfter:3*i},(0,Jo.c)("remotesServicesBackoffs",n)),s}},ii={name:"pinning",persistActions:["UPDATE_REMOTE_PINS","DISMISS_REMOTE_PINS","CANCEL_PENDING_PINS"],init:e=>{(e=>{const t=setInterval((()=>{e.selectIpfsReady()&&(clearTimeout(t),e.selectPendingPins().forEach((t=>{var n;const[r,o]=t.split(":");e.doSetPinning({cid:null!==(n=Ko.TO.asCID(o))&&void 0!==n?n:Ko.TO.parse(o)},[r],!1)})))}),1e3)})(e),(e=>{setInterval((()=>{const t=[...e.selectPendingPins(),...e.selectFailedPins()].map((e=>({cid:e.split(":")[1]})));e.doFetchRemotePins(t,!0)}),3e4)})(e)},reducer:(e,t)=>{var n,r,o,i,s,a,u,l,c;if("UPDATE_REMOTE_PINS"===t.type){const{adds:n=[],removals:r=[],pending:o=[],failed:i=[]}=t.payload,s=ti(e.remotePins,Qo([...e.remotePins,...n].filter(ei(r,o,i)))),a=ti(e.notRemotePins,Qo([...e.notRemotePins,...r].filter(ei(n,o,i)))),u=ti(e.pendingPins,Qo([...e.pendingPins,...o].filter(ei(n,r,i)))),l=ti(e.failedPins,Qo([...e.failedPins,...i].filter(ei(n,r,o)))),c=ti(e.completedPins,Qo([...e.completedPins,...n].filter((t=>e.pendingPins.some((e=>e===t))))));return{...e,remotePins:s,notRemotePins:a,pendingPins:u,failedPins:l,completedPins:c}}if("DISMISS_REMOTE_PINS"===t.type){const{failed:n=[],completed:r=[]}=t.payload,o=e.failedPins.filter(ei(n)),i=e.completedPins.filter(ei(r));return{...e,failedPins:o,completedPins:i}}if("SET_LOCAL_PINS_STATS"===t.type){const{localPinsSize:n,localNumberOfPins:r}=t.payload;return{...e,localNumberOfPins:r,localPinsSize:n}}if("SET_REMOTE_PINNING_SERVICES"===t.type){const n=e.pinningServices,r=t.payload;if((null===n||void 0===n?void 0:n.length)===(null===r||void 0===r?void 0:r.length)){const t=e=>e&&"undefined"!==typeof e.numberOfPins,o=n.some(t),i=r.some(t);if(o&&!i)return e}return{...e,pinningServices:r}}return"SET_REMOTE_PINNING_SERVICES_AVAILABLE"===t.type?{...e,arePinningServicesSupported:t.payload}:{...e,pinningServices:null!==(n=null===e||void 0===e?void 0:e.pinningServices)&&void 0!==n?n:[],remotePins:null!==(r=null===e||void 0===e?void 0:e.remotePins)&&void 0!==r?r:[],pendingPins:null!==(o=null===e||void 0===e?void 0:e.pendingPins)&&void 0!==o?o:[],failedPins:null!==(i=null===e||void 0===e?void 0:e.failedPins)&&void 0!==i?i:[],completedPins:null!==(s=null===e||void 0===e?void 0:e.completedPins)&&void 0!==s?s:[],notRemotePins:null!==(a=null===e||void 0===e?void 0:e.notRemotePins)&&void 0!==a?a:[],localPinsSize:null!==(u=null===e||void 0===e?void 0:e.localPinsSize)&&void 0!==u?u:0,localNumberOfPins:null!==(l=null===e||void 0===e?void 0:e.localNumberOfPins)&&void 0!==l?l:0,arePinningServicesSupported:null!==(c=null===e||void 0===e?void 0:e.arePinningServicesSupported)&&void 0!==c&&c}},doFetchRemotePins:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async n=>{var r,o;let{dispatch:i,store:s,getIpfs:a}=n;const u=s.selectPinningServices();if(null===u||void 0===u||!u.length)return;const l=a();if(!l||null!==s&&void 0!==s&&null!==(r=s.ipfs)&&void 0!==r&&null!==(o=r.ipfs)&&void 0!==o&&o.ready||!l.pin.remote)return;const c=e?e.map((e=>e.cid.toString())):[],f=s.selectRemotePins(),h=s.selectNotRemotePins(),d=((e,t)=>{const n=[...new Set(e)],r=[];for(let o=0;o<n.length;o+=t){const e=n.slice(o,o+t);r.push(e)}return r})(c,10),p=[],g=[],y=[],m=[];await Promise.allSettled(u.map((async e=>{try{const r=t?new Set:new Set([...f,...h].filter((t=>t.startsWith(e.name))).map(Xo));for(const t of d){const o=t.filter((e=>!r.has(e.toString())));if(!o.length)continue;const i=new Set(o.map((e=>e.toString())));try{const t=oi(l,{service:e.name,cid:o.map((e=>{var t;return null!==(t=Ko.TO.asCID(e))&&void 0!==t?t:Ko.TO.parse(e)})),status:["queued","pinning","pinned","failed"]});for await(const n of t){const t=n.cid.toString();i.delete(t),"queued"===n.status||"pinning"===n.status?m.push(`${e.name}:${t}`):"failed"===n.status?y.push(`${e.name}:${t}`):p.push(`${e.name}:${t}`)}}catch(n){console.error(`Error: pin.remote.ls service=${e.name} cid=${o}: ${n.toString()}`)}for(const t of i)g.push(`${e.name}:${t}`)}}catch(n){console.error("unexpected error during doFetchRemotePins",n)}}))),i({type:"UPDATE_REMOTE_PINS",payload:{adds:p,removals:g,pending:m,failed:y}})}},selectRemotePins:e=>e.pinning.remotePins||[],selectNotRemotePins:e=>e.pinning.notRemotePins||[],selectPendingPins:e=>e.pinning.pendingPins||[],selectFailedPins:e=>e.pinning.failedPins||[],selectCompletedPins:e=>e.pinning.completedPins||[],selectLocalPinsSize:e=>e.pinning.localPinsSize,selectLocalNumberOfPins:e=>e.pinning.localNumberOfPins,doSelectRemotePinsForFile:e=>t=>{let{store:n}=t;const r=n.selectPinningServices().map((e=>e.name));return Qo([...n.selectPendingPins(),...n.selectRemotePins()]).filter((t=>Xo(t)===e.cid.toString())).map((e=>e.split(":").at(0))).filter((e=>r.includes(e)))},doFetchLocalPinsStats:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t();if(!r)return null;n({type:"SET_LOCAL_PINS_STATS",payload:{localPinsSize:-1,localNumberOfPins:(await Yo()(r.pin.ls({type:"recursive"}))).length}})},doFetchPinningServices:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;const a=(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name));if(i({type:"SET_REMOTE_PINNING_SERVICES_AVAILABLE",payload:a}),!a)return null;const u=o.selectRemoteServiceTemplates(),l=await s.pin.remote.service.ls();i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(l.map((e=>ni(e,u,s))))})},doFetchPinningServicesStats:()=>async e=>{var t,n;let{getIpfs:r,store:o,dispatch:i}=e;const s=r();if(!s||null!==o&&void 0!==o&&null!==(t=o.ipfs)&&void 0!==t&&null!==(n=t.ipfs)&&void 0!==n&&n.ready||!s.pin.remote)return null;if(!(await s.commands()).Subcommands.find((e=>"pin"===e.Name)).Subcommands.some((e=>"remote"===e.Name)))return null;const a=o.selectRemoteServiceTemplates(),u=await s.pin.remote.service.ls({stat:!0});i({type:"SET_REMOTE_PINNING_SERVICES",payload:await Promise.all(u.map((e=>ni(e,a,s))))})},selectPinningServices:e=>e.pinning.pinningServices||[],selectRemoteServiceTemplates:()=>qo.E,selectArePinningServicesSupported:e=>e.pinning.arePinningServicesSupported,selectPinningServicesDefaults:()=>qo.E.reduce(((e,t)=>({...e,[t.name]:{...t,nickname:t.name}})),{}),doDismissCompletedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{completed:t}})}},doDismissFailedPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{dispatch:n}=e;n({type:"DISMISS_REMOTE_PINS",payload:{failed:t}})}},doCancelPendingPin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return async e=>{let{getIpfs:n,dispatch:r}=e;const o=n();for(const s of t){var i;const[e,t]=s.split(":");await o.pin.remote.rm({cid:[null!==(i=Ko.TO.asCID(t))&&void 0!==i?i:Ko.TO.parse(t)],service:e})}r({type:"UPDATE_REMOTE_PINS",payload:{removals:t}})}},doSetPinning:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return async o=>{let{getIpfs:i,store:s,dispatch:a}=o;const u=i(),{cid:l,name:c}=e,f=t.includes("local");if(n!==f)try{const e={serviceName:"Local node"};f?(await u.pin.add(l),a({type:"IPFS_PIN_SUCCEED",msgArgs:e})):(await u.pin.rm(l),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:e}))}catch(g){console.error(`unexpected local pin error for ${l} (${c})`,g);const e={serviceName:"local",errorMsg:g.toString()};a({type:"IPFS_PIN_FAILED",msgArgs:e})}const h=[],d=[],p=[];s.selectPinningServices().forEach((async e=>{const n=t.includes(e.name);if(r.includes(e.name)===n)return;const o=`${e.name}:${l}`;try{const t={serviceName:e.name};n?(h.push(o),await u.pin.remote.add(l,{service:e.name,name:c,background:!0}),a({type:"IPFS_PIN_SUCCEED",msgArgs:t})):(p.push(o),await u.pin.remote.rm({cid:[l],service:e.name}),a({type:"IPFS_UNPIN_SUCCEED",msgArgs:t}))}catch(g){console.error(`ipfs.pin.remote error for ${l}@${e.name}`,g);const n={serviceName:e.name,errorMsg:g.toString()};d.push(o),a({type:"IPFS_PIN_FAILED",msgArgs:n})}})),a({type:"UPDATE_REMOTE_PINS",payload:{adds:[],removals:p,pending:h,failed:d}}),await s.doPinsFetch()}},doAddPinningService:e=>{let{apiEndpoint:t,nickname:n,secretApiKey:r}=e;return async e=>{let{getIpfs:o}=e;const i=o();n=n.replaceAll(".","_"),await i.pin.remote.service.add(n,{endpoint:t,key:r})}},doRemovePinningService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.pin.remote.service.rm(e),r.doFetchPinningServices()},doSetAutoUploadForService:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n(),i=`Pinning.RemoteServices.${e}.Policies.MFS.Enable`,s=await o.config.get(i);await o.config.set(i,!s),r.doFetchPinningServices()}};var si=n(644),ai=n(5285),ui=n(2720),li=n(8298),ci=n(219),fi=n.n(ci);function hi(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}var di=e.createContext();var pi={initialChunks:{}},gi="PENDING",yi="REJECTED";var mi=function(e){return e};function bi(t){var n=t.defaultResolveComponent,r=void 0===n?mi:n,o=t.render,i=t.onLoad;function s(t,n){void 0===n&&(n={});var s=function(e){return"function"===typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(t),a={};function u(e){return n.cacheKey?n.cacheKey(e):s.resolve?s.resolve(e):"static"}function l(e,t,o){var i=n.resolveComponent?n.resolveComponent(e,t):r(e);return fi()(o,i,{preload:!0}),i}var c=function(e){var t=u(e),n=a[t];return n&&n.status!==yi||((n=s.requireAsync(e)).status=gi,a[t]=n,n.then((function(){n.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:s.resolve(e),chunkName:s.chunkName(e),error:t?t.message:t}),n.status=yi}))),n},f=function(t){var n=function(n){return e.createElement(di.Consumer,null,(function(r){return e.createElement(t,Object.assign({__chunkExtractor:r},n))}))};return t.displayName&&(n.displayName=t.displayName+"WithChunkExtractor"),n}(function(e){function t(t){var r;return(r=e.call(this,t)||this).state={result:null,error:null,loading:!0,cacheKey:u(t)},hi(!t.__chunkExtractor||s.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),t.__chunkExtractor?(!1===n.ssr||(s.requireAsync(t).catch((function(){return null})),r.loadSync(),t.__chunkExtractor.addChunk(s.chunkName(t))),(0,ui.A)(r)):(!1!==n.ssr&&(s.isReady&&s.isReady(t)||s.chunkName&&pi.initialChunks[s.chunkName(t)])&&r.loadSync(),r)}(0,li.A)(t,e),t.getDerivedStateFromProps=function(e,t){var n=u(e);return(0,ai.A)({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===yi&&this.setCache(),this.state.loading&&this.loadAsync()},r.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},r.componentWillUnmount=function(){this.mounted=!1},r.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},r.getCacheKey=function(){return u(this.props)},r.getCache=function(){return a[this.getCacheKey()]},r.setCache=function(e){void 0===e&&(e=void 0),a[this.getCacheKey()]=e},r.triggerOnLoad=function(){var e=this;i&&setTimeout((function(){i(e.state.result,e.props)}))},r.loadSync=function(){if(this.state.loading)try{var e=l(s.requireSync(this.props),this.props,h);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:s.resolve(this.props),chunkName:s.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},r.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=l(t,e.props,h);e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},r.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,(0,si.A)(e,["__chunkExtractor","forwardedRef"]));return c(t)},r.render=function(){var e=this.props,t=e.forwardedRef,r=e.fallback,i=(e.__chunkExtractor,(0,si.A)(e,["forwardedRef","fallback","__chunkExtractor"])),s=this.state,a=s.error,u=s.loading,l=s.result;if(n.suspense&&(this.getCache()||this.loadAsync()).status===gi)throw this.loadAsync();if(a)throw a;var c=r||n.fallback||null;return u?c:o({fallback:c,result:l,options:n,props:(0,ai.A)({},i,{ref:t})})},t}(e.Component)),h=e.forwardRef((function(t,n){return e.createElement(f,Object.assign({forwardedRef:n},t))}));return h.displayName="Loadable",h.preload=function(e){h.load(e)},h.load=function(e){return c(e)},h}return{loadable:s,lazy:function(e,t){return s(e,(0,ai.A)({},t,{suspense:!0}))}}}var vi=bi({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(t){var n=t.result,r=t.props;return e.createElement(n,r)}}),wi=vi.loadable,Ei=vi.lazy,Ai=bi({onLoad:function(e,t){e&&t.forwardedRef&&("function"===typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),Ci=Ai.loadable,Si=Ai.lazy;var Ti=wi;Ti.lib=Ci,Ei.lib=Si;const ki=Ti,xi=ki((()=>Promise.all([n.e(139),n.e(435)]).then(n.bind(n,3435))),{fallback:e.createElement(x.A,null)}),Ii=ki((()=>Promise.all([n.e(868),n.e(959),n.e(658)]).then(n.bind(n,3658))),{fallback:e.createElement(x.A,null)}),Oi=ki((()=>n.e(904).then(n.bind(n,5904))),{fallback:e.createElement(x.A,null)}),Bi=ki((()=>Promise.all([n.e(868),n.e(124),n.e(853)]).then(n.bind(n,3853))),{fallback:e.createElement(x.A,null)}),Di=ki((()=>Promise.all([n.e(868),n.e(996),n.e(380)]).then(n.bind(n,7380))),{fallback:e.createElement(x.A,null)});var Ni=n(930),Pi=n(8535),Fi=n(91),_i=n(9858);const Li=(0,a.CI)("settings")((t=>{let{t:n}=t;return e.createElement("div",{"data-id":"AnalyticsPage",className:"mw9 center"},e.createElement(Ni.mg,null,e.createElement("title",null,n("title")," | IPFS")),e.createElement(Fi.A,null,e.createElement(Pi.A,null,n("analytics")),e.createElement(_i.A,{t:n,open:!0})))})),Ri=ki((()=>n.e(984).then(n.bind(n,4984))),{fallback:e.createElement(x.A,null)}),Ui=()=>e.createElement("div",{"data-id":"BlankPage"}),Mi=ki((()=>Promise.all([n.e(603),n.e(325)]).then(n.bind(n,8325))),{fallback:e.createElement(x.A,null)}),ji=ki((()=>Promise.all([n.e(603),n.e(504)]).then(n.bind(n,2504))),{fallback:e.createElement(x.A,null)}),$i=(0,r.N)("selectRouteInfo",(t=>{let{routeInfo:n}=t;const{pattern:r,url:o}=n,{setExplorePath:i}=(0,L.Nh)(),{doInitHelia:s,helia:a}=(0,L.pP)();return(0,e.useEffect)((()=>{null==a&&s()}),[a]),(0,e.useEffect)((()=>{i(window.location.hash)}),[o]),"/explore"===r?e.createElement(ji,null):e.createElement(Mi,null)})),Hi=(0,H.iF)({"/explore":$i,"/explore*":$i,"/files*":Ii,"/ipfs*":Ii,"/ipns*":Ii,"/pins*":Oi,"/peers":Bi,"/settings/analytics":Li,"/settings*":Di,"/welcome":Ri,"/blank":Ui,"/status*":xi,"/":xi,"":xi},{routeInfoSelector:"selectHash"}),zi={name:"redirects",reactToEmptyHash:(0,H.Mz)("selectHash",(e=>{if(""===e)return{actionCreator:"doUpdateHash",args:["#/"]}})),reactToIpfsConnectionFail:(0,H.Mz)("selectIpfsInitFailed","selectHash",((e,t)=>{if(e&&"/welcome"!==t&&!t.startsWith("/settings"))return{actionCreator:"doUpdateHash",args:["#/welcome"]}}))};var Vi=n(1184);function Gi(e){let t;try{t=(0,ee.WH)("sni").code}catch(n){return null}for(const[r,o]of e)if(r===t&&void 0!==o)return o;return null}function Wi(e){return e.some((([e,t])=>e===(0,ee.WH)("tls").code))}function qi(e,t,n){const r=Ki[(0,ee.WH)(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${(0,ee.WH)(e).name}`);const o=r(t,n);return e===(0,ee.WH)("ip6").code?`[${o}]`:o}const Ki={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${qi(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${qi(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qi(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qi(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=Wi(t),r=Gi(t);if(n&&null!==r)return`https://${r}`;const o=n?"https://":"http://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=qi(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return qi(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return qi(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=qi(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=Wi(t),r=Gi(t);if(n&&null!==r)return`wss://${r}`;const o=n?"wss://":"ws://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=qi(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=qi(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qi(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qi(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${qi(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};var Zi=n(6382).Buffer;const Yi=["127.0.0.1","[::1]","0.0.0.0","[::]"],Ji=(0,H.re)({name:"config",staleAfter:6e4,persist:!1,checkIfOnline:!1,getPromise:async e=>{let{getIpfs:t,store:n}=e;const r=await t().config.getAll();let o;o=Zi.isBuffer(r)?r.toString():JSON.stringify(r,null,"\t");const i=JSON.parse(o),s=n.selectPublicGateway(),a=Xi("Gateway",i)||s,u=new URL(a);if(Yi.includes(u.hostname)){u.hostname="localhost";const e=u.toString().replace(/\/+$/,"");if(await es(e))return n.doSetAvailableGateway(e),o}return await Qi(a)||n.doSetAvailableGateway(s),o}});function Xi(e,t){if(!t)return null;try{const n=function(e,t){const n=(0,ee.HZ)(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const o=(0,ee.WH)(r[0]),i=Ki[o.name];if(null==i)throw new Error(`No interpreter found for ${o.name}`);let s=i(r[1]??"",n);return!1!==t?.assumeHttp&&r[0]===(0,ee.WH)("tcp").code&&(s=s.replace("tcp://","http://"),"443"!==r[1]&&"80"!==r[1]||("443"===r[1]&&(s=s.replace("http://","https://")),s=s.substring(0,s.lastIndexOf(":")))),s}((Array.isArray(t.Addresses[e])?t.Addresses[e][0]:t.Addresses[e]).replace(/\/0\.0\.0\.0\//,"/127.0.0.1/").replace(/\/::\//,"/::1/"),{assumeHttp:!0});if(0===new URL(n).port)throw Error("port set to 0, not deterministic");return n}catch(n){return console.log(`Failed to get url from config at Addresses.${e}`,n),null}}Ji.selectConfigObject=(0,H.Mz)("selectConfig",(e=>JSON.parse(e))),Ji.selectApiUrl=(0,H.Mz)("selectConfigObject","selectPublicGateway",((e,t)=>Xi("API",e)||t)),Ji.selectGatewayUrl=(0,H.Mz)("selectConfigObject","selectPublicGateway",((e,t)=>Xi("Gateway",e)||t)),Ji.selectAvailableGatewayUrl=(0,H.Mz)("selectAvailableGateway","selectGatewayUrl",((e,t)=>e||t)),Ji.selectBootstrapPeers=(0,H.Mz)("selectConfigObject",(e=>e&&e.Bootstrap)),Ji.reactConfigFetch=(0,H.Mz)("selectConfigShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchConfig"}}));const Qi=Fo()((async e=>{try{const{status:t}=await fetch(`${e}/ipfs/bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss`);return 200===t}catch(t){return console.error(`Unable to use the gateway at ${e}. The public gateway will be used as a fallback`,t),!1}})),es=Fo()((async e=>{try{(e=new URL(e)).hostname=`bafkqae2xmvwgg33nmuqhi3zajfiemuzahiwss.ipfs.${e.hostname}`;const{status:t}=await fetch(e.toString());return 200===t}catch(t){return console.error(`Unable to use the subdomain gateway at ${e}. Regular gateway will be used as a fallback`,t),!1}})),ts=Ji;var ns=n(2742),rs=n(9156);const os={doSaveConfig:e=>async t=>{let{store:n}=t;n.selectConfigIsSaving()?console.log("doSaveConfig skipped, config save already in progress"):await n.doPerformSaveConfig(e)},doPerformSaveConfig:e=>(0,rs.y)("CONFIG_SAVE",(async t=>{const n=await is((async()=>{const n=JSON.parse(e),r=t.getIpfs();if(null==r)throw Error("IPFS node is not found");await r.config.replace(n)}));if(!n.ok)throw n.error;await t.store.doMarkConfigAsOutdated()}))},is=async e=>{try{return{ok:!0,value:await e()}}catch(t){return{ok:!1,error:t}}},ss=ns.H(["CONFIG_SAVE"]),as={name:"config_save",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSaving:!1},t=arguments.length>1?arguments[1]:void 0;if(t.type===ss.CONFIG_SAVE){const{task:n}=t;switch(n.status){case"Init":return{...e,isSaving:!0};case"Exit":{const{result:t}=n;if(t.ok)return{...e,isSaving:!1,lastSuccess:Date.now()};{const{error:n}=t,r=n&&n.message||String(n);return{...e,isSaving:!1,lastError:Date.now(),errorMessage:r}}}default:return e}}return e},selectConfigIsSaving:e=>e.config_save.isSaving,selectConfigSaveLastSuccess:e=>e.config_save.lastSuccess,selectConfigSaveLastError:e=>e.config_save.lastError,...os};var us=n(5094),ls=n.n(us);const cs={name:"tours",init:e=>{ls().localStorage.getItem("tourTooltip")&&e.doDisableTooltip()},reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1,tooltip:!0},t=arguments.length>1?arguments[1]:void 0;return"TOURS_ENABLE"===t.type?{...e,enabled:!0}:"TOURS_DISABLE"===t.type?{...e,enabled:!1}:"TOURS_TOOLTIP_DISABLE"===t.type?{...e,tooltip:!1}:e},doDisableTooltip:()=>e=>{let{dispatch:t}=e;ls().localStorage.setItem("tourTooltip",!1),t({type:"TOURS_TOOLTIP_DISABLE"})},doEnableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_ENABLE"})},doDisableTours:()=>e=>{let{dispatch:t}=e;t({type:"TOURS_DISABLE"})},selectTours:e=>e.tours,selectToursEnabled:e=>e.tours.enabled,selectShowTooltip:e=>e.tours.tooltip},fs=ns.H(["EXPERIMENTS_TOGGLE","EXPERIMENTS_UPDATE_STATE"]),hs=[],ds=(e,t)=>({...e,[t]:{...e[t],blocked:!1}}),ps={selectExperimentsState:e=>e.experiments,selectExperiments:(0,H.Mz)("selectExperimentsState",(e=>hs.map((t=>({...t,...e[t.key]})))))},gs={doExpToggleAction:e=>t=>{let{dispatch:n}=t;e&&n({type:fs.EXPERIMENTS_TOGGLE,task:{status:"Init",id:Symbol(fs.EXPERIMENTS_TOGGLE),init:{key:e}}})}},ys={name:"experiments",persistActions:[fs.EXPERIMENTS_TOGGLE,fs.EXPERIMENTS_UPDATE_STATE],reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fs.EXPERIMENTS_TOGGLE:{const{task:n}=t;switch(n.status){case"Init":return((e,t)=>({...e,[t]:{...e[t],blocked:!0}}))(e,n.init.key);case"Exit":{const{result:t}=n;return t.ok?((e,t)=>ds({...e,[t]:{...e[t],enabled:!(e&&e[t]&&e[t].enabled)}},t))(e,t.value.key):ds(e,t.error.key)}default:return e}}case fs.EXPERIMENTS_UPDATE_STATE:return((e,t)=>Object.keys(t).reduce(((n,r)=>({...n,[r]:{...e[r],...t[r]}})),e))(e,t.payload);default:return e}},...ps,...gs},ms={show:!1,error:!1,eventId:null,code:null},bs={name:"notify",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms,t=arguments.length>1?arguments[1]:void 0;return"NOTIFY_DISMISSED"===t.type?{...e,show:!1}:"STATS_FETCH_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:t.type.match(/^FILES_\w+_FAILED$/)?{...e,show:!0,error:!0,eventId:"FILES_EVENT_FAILED",code:t.payload.error.code}:"STATS_FETCH_FINISHED"===t.type&&"STATS_FETCH_FAILED"===e.eventId?{...e,error:!1,eventId:"STATS_FETCH_FINISHED",lastSuccess:Date.now()}:"SWARM_CONNECT_FAILED"===t.type||"SWARM_CONNECT_FINISHED"===t.type?{...e,show:!0,error:"SWARM_CONNECT_FAILED"===t.type,eventId:t.type}:t.type===fs.EXP_TOGGLE_FAILED?{...e,show:!0,error:!0,eventId:`experimentsErrors.${t.payload.key}`}:"IPFS_PIN_FAILED"===t.type?{...e,show:!0,error:!0,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_PIN_SUCCEED"===t.type||"IPFS_UNPIN_SUCCEED"===t.type?{...e,show:!0,error:!1,msgArgs:t.msgArgs,eventId:t.type}:"IPFS_CONNECT_FAILED"===t.type?{...e,show:!0,error:!0,eventId:t.type}:"IPFS_CONNECT_SUCCEED"===t.type?{...e,show:!0,error:!1,eventId:t.type}:"IPFS_API_ADDRESS_INVALID"===t.type?{...e,show:!0,error:!0,eventId:t.type}:e},selectNotify:e=>e.notify,selectNotifyI18nKey:(0,H.Mz)("selectNotify","selectIpfsProvider",((e,t)=>{const{eventId:n,code:r}=e;if("STATS_FETCH_FAILED"===n)return"ipfsApiRequestFailed";if("IPFS_CONNECT_FAILED"===n)return"ipfsConnectFail";if("IPFS_CONNECT_SUCCEED"===n)return"ipfsConnectSuccess";if("IPFS_API_ADDRESS_INVALID"===n)return"ipfsInvalidApiAddress";if("IPFS_PIN_FAILED"===n)return"ipfsPinFailReason";if("IPFS_PIN_SUCCEED"===n)return"ipfsPinSucceedReason";if("IPFS_UNPIN_SUCCEED"===n)return"ipfsUnpinSucceedReason";if("FILES_EVENT_FAILED"===n){switch(r?r.replace(/^(ERR_)/,""):""){case"FOLDER_EXISTS":return"folderExists";case Vi.kl.WRITE:case Vi.kl.ADD_BY_PATH:case"API_RESPONSE":return"filesAddFailed";case Vi.kl.FETCH:return"filesFetchFailed";case Vi.kl.MOVE:return"filesRenameFailed";case Vi.kl.MAKE_DIR:return"filesMakeDirFailed";case Vi.kl.COPY:return"filesCopyFailed";case Vi.kl.DELETE:return"filesRemoveFailed";default:return"filesEventFailed"}}return"STATS_FETCH_FINISHED"===n?"ipfsIsBack":"SWARM_CONNECT_FAILED"===n?"couldntConnectToPeer":"SWARM_CONNECT_FINISHED"===n?"connectedToPeer":n})),doNotifyDismiss:()=>e=>{let{dispatch:t}=e;return t({type:"NOTIFY_DISMISSED"})},reactNotifyOkDismiss:(0,H.Mz)("selectAppTime","selectNotify",((e,t)=>{if("STATS_FETCH_FINISHED"===t.eventId&&t.show&&e-t.lastSuccess>3e3)return{type:"NOTIFY_DISMISSED"}}))},vs={name:"connected",reducer:(e,t)=>{switch(e=e||{lastError:0,isNodeInfoOpen:!1},t.type){case"STATS_FETCH_FAILED":return{...e,lastError:Date.now()};case"NODE_INFO_OPEN":return{...e,isNodeInfoOpen:t.payload};default:return e}},doSetIsNodeInfoOpen:e=>t=>{let{dispatch:n}=t;return n({type:"NODE_INFO_OPEN",payload:e})},...{selectConnectedLastError:e=>e.connected.lastError,selectIpfsConnected:(0,H.Mz)("selectIpfsReady","selectNodeBandwidthLastSuccess","selectNodeBandwidthLastError",((e,t,n)=>e&&null!=t&&t>n)),selectIsNodeInfoOpen:e=>e.connected.isNodeInfoOpen}},ws={name:"retryInit",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RETRY_INIT_DISABLE":return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};case z.kl.IPFS_INIT:{const{task:n}=t;switch(n.status){case"Init":{const t=Date.now();return{...e,currentlyTrying:!0,startedAt:t,tryCount:(e.tryCount||0)+1}}case"Exit":if(n.result.ok)return{tryCount:0,needToRetry:!0,startedAt:void 0,failedAt:void 0,currentlyTrying:!1,needToRetry:!1};{const t=Date.now();return{...e,failedAt:t,currentlyTrying:!1}}default:return e}}default:return e}},doDisableRetryInit:()=>e=>{e.dispatch({type:"RETRY_INIT_DISABLE"})},selectRetryInitState:e=>e.retryInit,reactConnectionInitRetry:(0,H.Mz)("selectAppTime","selectIpfsReady","selectRetryInitState",((e,t,n)=>{let{failedAt:r,tryCount:o,needToRetry:i,currentlyTrying:s}=n;return!s&&(!!e&&(!!i&&(null!=o&&o>5||t?{actionCreator:"doDisableRetryInit"}:!(!r||e-r<2500)&&{actionCreator:"doTryInitIpfs"})))}))},Es=(0,H.re)({name:"identity",actionBaseType:"IDENTITY",getPromise:e=>{let{getIpfs:t}=e;return t().id().catch((e=>{console.error("Failed to get identity",e)}))},staleAfter:1/0,persist:!1,checkIfOnline:!1});Es.selectIdentityLastSuccess=e=>e.identity.lastSuccess,Es.reactIdentityFetch=(0,H.Mz)("selectIpfsConnected","selectIdentityIsLoading","selectIdentityLastSuccess","selectConnectedLastError",((e,t,n,r)=>{if(e&&!t&&(!n||r>n))return{actionCreator:"doFetchIdentity"}}));const As=Es,Cs=pe({name:"bundle-cache",version:1,maxAge:1/0}),Ss=window,Ts={selectIsIpfsDesktop:()=>!!Ss.ipfsDesktop,selectDesktopCountlyActions:()=>[]},ks={...Ts,selectDesktopVersion:()=>{var e;return null===(e=Ss.ipfsDesktop)||void 0===e?void 0:e.version},selectDesktopCountlyDeviceId:()=>{var e;return null===(e=Ss.ipfsDesktop)||void 0===e?void 0:e.countlyDeviceId},selectDesktopCountlyActions:()=>{var e;return null===(e=Ss.ipfsDesktop)||void 0===e?void 0:e.countlyActions}},xs={doDesktopAddConsent:e=>()=>{var t;return null===(t=Ss.ipfsDesktop)||void 0===t?void 0:t.addConsent(e)},doDesktopRemoveConsent:e=>()=>{var t;return null===(t=Ss.ipfsDesktop)||void 0===t?void 0:t.removeConsent(e)},doDesktopUpdateLanguage:e=>()=>{var t;return null===(t=Ss.ipfsDesktop)||void 0===t?void 0:t.updateLanguage(e)}},Is={name:"ipfsDesktop",reducer:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},...Ss.ipfsDesktop?ks:Ts,...Ss.ipfsDesktop?xs:{}},Os=(0,H.re)({name:"repoStats",getPromise:async e=>{let{getIpfs:t}=e;return t().repo.stat()},staleAfter:6e4,persist:!1,checkIfOnline:!1});Os.selectRepoSize=(0,H.Mz)("selectRepoStats",(e=>{if(e&&e.repoSize)return e.repoSize.toString()})),Os.selectRepoNumObjects=(0,H.Mz)("selectRepoStats",(e=>{if(e&&e.numObjects)return e.numObjects.toString()})),Os.reactRepoStatsFetch=(0,H.Mz)("selectRepoStatsShouldUpdate","selectIpfsReady",((e,t)=>{if(e&&t)return{actionCreator:"doFetchRepoStats"}}));const Bs=Os;var Ds=n(3724),Ns=n(2333);const Ps=/webui[-.]ipfs/,Fs=/(?:localhost|127.0.0.1)/,_s=/ipfs/;function Ls(e){if("function"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a function");return!1}function Rs(e){if("number"===typeof e)return!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])throw new TypeError("Expected a number");return!1}const Us=!0,Ms=ns.H(["DESKTOP_SETTING_TOGGLE"]),js=ns.H(["ANALYTICS_ENABLED","ANALYTICS_DISABLED","ANALYTICS_ADD_CONSENT","ANALYTICS_REMOVE_CONSENT","SET_SHOW_ANALYTICS_BANNER"]),$s=[z.kl.IPFS_INIT,ss.CONFIG_SAVE,Ns.kl.MAKE_DIR,Ns.kl.WRITE,Ns.kl.ADD_BY_PATH,Ns.kl.MOVE,Ns.kl.DELETE,Ns.kl.DOWNLOAD_LINK,fs.EXPERIMENTS_TOGGLE,Ms.DESKTOP_SETTING_TOGGLE];async function Hs(){var e;if(null!==(e=ls().ipfsDesktop)&&void 0!==e&&e.countlyAppKey)return ls().ipfsDesktop.countlyAppKey;return"kubo"===await async function(){const{origin:e}=globalThis.location;if(Ps.test(e))return Fs.test(e)?"local":"webui.ipfs";try{const e=await fetch("/webui",{method:"HEAD"}),{pathname:t}=new URL(e.url);if(e.redirected&&_s.test(t))return"kubo"}catch{}return Fs.test(e)?"local":"webui.ipfs"}()?"c4524cc93fed92a5838d4ea27c5a65526b4e7558":"8fa213e6049bff23b08e5f5fbac89e7c27397612"}const zs={all:["sessions","events","views","location","crashes"],safe:["sessions","events","views","location"]};function Vs(e,t){ls().Countly.q.push(["add_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopAddConsent(e)}function Gs(e,t){ls().Countly.q.push(["remove_consent",e]),t.selectIsIpfsDesktop()&&t.doDesktopRemoveConsent(e)}function Ws(e){let{id:t,duration:n}=e;ls().Countly.q.push(["add_event",{key:t,count:1,dur:n}])}const qs=new Map([["IPFS_INIT_FAILED",(Ks=Ws,Zs=5,Ls(Ks)&&Rs(Zs),((e,t)=>{Ls(e)&&Rs(t);let n=0;return function(){if(n++,n>=t)return e(...arguments)}})((e=>{Ls(e);let t,n=!1;return function(){return n||(t=e(...arguments),n=!0),t}})(Ks),Zs))]]);var Ks,Zs;const Ys={selectAnalytics:e=>e.analytics,selectAnalyticsConsent:e=>e.analytics.consent,selectAnalyticsEnabled:e=>e.analytics.consent.length>0,selectAnalyticsOptedOutPriorToDefaultOptIn:e=>!e.analytics.optedOut&&0===e.analytics.consent.length&&e.analytics.lastDisabledAt>e.analytics.lastEnabledAt,selectAnalyticsOptedOut:e=>e.analytics.optedOut,selectShowAnalyticsComponents:e=>e.analytics.showAnalyticsComponents,selectShowAnalyticsBanner:e=>e.analytics.showAnalyticsBanner,selectAnalyticsActionsToRecord:(0,H.Mz)("selectIsIpfsDesktop","selectDesktopCountlyActions",((e,t)=>e?t.concat($s).sort():Array.from($s).sort()))},Js={doToggleAnalytics:()=>e=>{let{store:t}=e;!t.selectAnalyticsEnabled()?t.doEnableAnalytics():t.doDisableAnalytics()},doDisableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;ls().Countly.opt_out(),Gs(zs.all,n),t({type:"ANALYTICS_DISABLED",payload:{consent:[]}})},doEnableAnalytics:()=>e=>{let{dispatch:t,store:n}=e;Gs(zs.all,n),ls().Countly.opt_in(),Vs(zs.safe,n),t({type:"ANALYTICS_ENABLED",payload:{consent:zs.safe}})},doToggleConsent:e=>t=>{let{store:n}=t;n.selectAnalyticsConsent().includes(e)?n.doRemoveConsent(e):n.doAddConsent(e)},doRemoveConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().filter((t=>t!==e)).length&&ls().Countly.opt_out(),Gs(e,r),n({type:"ANALYTICS_REMOVE_CONSENT",payload:{name:e}})},doAddConsent:e=>t=>{let{dispatch:n,store:r}=t;0===r.selectAnalyticsConsent().length&&ls().Countly.opt_in(),Vs(e,r),n({type:"ANALYTICS_ADD_CONSENT",payload:{name:e}})},doToggleShowAnalyticsBanner:e=>t=>{let{dispatch:n}=t;n({type:"SET_SHOW_ANALYTICS_BANNER",payload:{shouldShow:e}})}},Xs=e=>{switch(e.type){case Ns.kl.MAKE_DIR:case Ns.kl.WRITE:case Ns.kl.ADD_BY_PATH:case Ns.kl.MOVE:case Ns.kl.DELETE:case Ns.kl.DOWNLOAD_LINK:case z.kl.IPFS_INIT:case ss.CONFIG_SAVE:return Qs(e.task,e.type);case fs.EXPERIMENTS_TOGGLE:return ea(e.task,"EXPERIMENTS");case Ms.DESKTOP_SETTING_TOGGLE:return ea(e.task,"DESKTOP_SETTING");default:return null}},Qs=(e,t)=>{if("Exit"===e.status){const{duration:n,result:r}=e;return{id:r.ok?t:`${t}_FAILED`,duration:n,error:r.ok?null:r.error}}return null},ea=(e,t)=>{if("Exit"===e.status){const{result:n,duration:r}=e,{key:o}=n.ok?n.value:n.error,i=n.ok?null:n.error,s=n.ok?n.value.value?"ENABLED":"DISABLED":"FAILED";return{id:`${t}_${Ds.constantCase(o)}_${s}`,duration:r,error:i}}return null},ta=e=>{let{countlyUrl:t="https://countly.ipfs.tech",appVersion:r="4.4.1",appGitRevision:o="6785409",debug:i=!1}=e;return{name:"analytics",persistActions:[js.ANALYTICS_ENABLED,js.ANALYTICS_DISABLED,js.ANALYTICS_DISABLED,js.ANALYTICS_ADD_CONSENT,js.ANALYTICS_REMOVE_CONSENT,js.SET_SHOW_ANALYTICS_BANNER],init:async e=>{ls().Countly||(ls().Countly={},ls().Countly.q=[],await n.e(994).then(n.t.bind(n,3994,23)));const o=ls().Countly;o.require_consent=!0,o.url=t;const s=Hs();if(s.then((e=>{o.app_key=e})),o.app_version=r,o.debug=i,e.selectIsIpfsDesktop()&&(o.app_version=e.selectDesktopVersion(),o.q.push(["change_id",e.selectDesktopCountlyDeviceId(),!0])),o.q.push(["track_sessions"]),o.q.push(["track_errors"]),e.selectAnalyticsEnabled()){Vs(e.selectAnalyticsConsent(),e)}else e.selectAnalyticsOptedOut()||(e.selectAnalyticsOptedOutPriorToDefaultOptIn()&&e.doToggleShowAnalyticsBanner(!0),e.doEnableAnalytics());e.subscribeToSelectors(["selectRouteInfo"],(e=>{let{routeInfo:t}=e;ls().location&&ls().location.hash&&ls().Countly.q.push(["track_pageview",t.pattern])})),"function"===typeof o.init&&(await s,o.init())},getMiddleware:()=>()=>e=>t=>{const n=Xs(t);if(n){const{id:e,duration:r,error:o}=n;!function(e){let{id:t,duration:n}=e;const r=qs.get(t);r?r({id:t,duration:n}):Ws({id:t,duration:n})}({id:e,duration:r}),o&&(ls().Countly.q.push(["add_log",t.type]),ls().Countly.q.push(["log_error",o]))}return e(t)},reducer:(e,t)=>{switch(e=e||{lastEnabledAt:0,lastDisabledAt:0,showAnalyticsComponents:!1,showAnalyticsBanner:!1,optedOut:Us,consent:[]},t.type){case js.ANALYTICS_ENABLED:return{...e,lastEnabledAt:Date.now(),consent:t.payload.consent,optedOut:!1};case js.ANALYTICS_DISABLED:return{...e,lastDisabledAt:Date.now(),consent:t.payload.consent,optedOut:!0,showAnalyticsBanner:!1};case js.ANALYTICS_ADD_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)).concat(t.payload.name);return{...e,lastEnabledAt:Date.now(),consent:n,optedOut:!1}}case js.ANALYTICS_REMOVE_CONSENT:{const n=e.consent.filter((e=>e!==t.payload.name)),r=0===n.length?Date.now():e.lastDisabledAt,o=0===n.length;return{...e,lastDisabledAt:r,consent:n,optedOut:o,showAnalyticsBanner:!1}}case js.SET_SHOW_ANALYTICS_BANNER:{var n;const r=(null===(n=t.payload)||void 0===n?void 0:n.shouldShow)||!1;return{...e,showAnalyticsBanner:r}}default:return e.consent?e:e.lastEnabledAt>e.lastDisabledAt?{...e,consent:zs.safe}:{...e,consent:[]}}},...Ys,...Js}},na=(0,H.re)({name:"cliTutorMode",actionBaseType:"CLI_TUTOR_MODE_TOGGLE",persist:!0,checkIfOnline:!1,getPromise:()=>{}});na.reactIsCliTutorModeEnabled=(0,H.Mz)("selectIsCliTutorModeEnabled",(e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));void 0!==e&&e!==t&&localStorage.setItem("isCliTutorModeEnabled",e)})),na.selectIsCliTutorModeEnabled=e=>e.cliTutorMode.isCliTutorModeEnabled,na.selectIsCliTutorModalOpen=e=>!!e.cliTutorMode.showCliTutorModal,na.selectCliOptions=e=>e.cliTutorMode.cliOptions,na.reducer=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"CLI_TUTOR_MODE_TOGGLE"===t.type?{...e,isCliTutorModeEnabled:t.payload}:"CLI_TUTOR_MODAL_ENABLE"===t.type?{...e,showCliTutorModal:t.payload}:"CLI_OPTIONS"===t.type?{...e,cliOptions:t.payload}:e},na.doToggleCliTutorMode=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODE_TOGGLE",payload:e})},na.doSetCliOptions=e=>t=>{let{dispatch:n}=t;n({type:"CLI_OPTIONS",payload:e})},na.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},na.doOpenCliTutorModal=e=>t=>{let{dispatch:n}=t;n({type:"CLI_TUTOR_MODAL_ENABLE",payload:e})},na.init=e=>{const t=Boolean(JSON.parse(localStorage.getItem("isCliTutorModeEnabled")));return e.doToggleCliTutorMode(t)};const ra=na;var oa=n(555);const ia={name:"ipns",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keys:[],expectedPublishTime:(0,Jo.L)("expectedPublishTime")||60},t=arguments.length>1?arguments[1]:void 0;return"CACHE_IPNS_KEYS"===t.type?{...e,keys:t.payload}:"SET_EXPECTED_PUBLISH_TIME"===t.type?{...e,expectedPublishTime:t.payload}:e},selectIpnsKeys:e=>e.ipns.keys||[],selectExpectedPublishTime:e=>e.ipns.expectedPublishTime,doFetchIpnsKeys:()=>async e=>{let{getIpfs:t,dispatch:n}=e;const r=t(),o=await r.key.list(),i=[];for(const{id:s,name:a}of o){const e=(await Yo()(r.name.resolve(`/ipns/${s}`,{offline:!0}))).length>0;i.push({id:s,name:a,published:e})}n({type:"CACHE_IPNS_KEYS",payload:i})},doGenerateIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.gen(e),r.doFetchIpnsKeys()},doRemoveIpnsKey:e=>async t=>{let{getIpfs:n,store:r}=t;const o=n();await o.key.rm(e),r.doFetchIpnsKeys()},doRenameIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.key.rename(e,t),o.doFetchIpnsKeys()},doPublishIpnsKey:(e,t)=>async n=>{let{getIpfs:r,store:o}=n;const i=r();await i.name.publish(e,{key:t})},doUpdateExpectedPublishTime:e=>async t=>{let{store:n,dispatch:r}=t;const o=n.selectExpectedPublishTime(),i=Math.floor((1.5*e+o)/2);await(0,Jo.c)("expectedPublishTime",i),r({type:"SET_EXPECTED_PUBLISH_TIME",payload:i})}},sa=(0,H.QP)((0,H.xq)({cacheFn:Cs.set}),W({idleTimeout:5e3}),z.Ay,As,Hi,zi,cs,(0,Vi.Ay)(),ts,as,oa.Ay,Q,q(),oe,Wo(),ii,bs,vs,ws,ys,Is,Bs,ra,ta({}),ia);var aa=n(4004),ua=n(785);function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fa(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ha=0,da=(0,e.memo)((function(t){var n=t.children,r=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=t;o[pa]||(o[pa]=(0,ua.s)(e,t,n,r));return o[pa]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(fa(t,["children"])),o=la(r,2),i=o[0],s=o[1];return e.useEffect((function(){return s&&ha++,function(){s&&(0===--ha&&(ga()[pa]=null))}}),[]),e.createElement(ua.M.Provider,{value:i},n)}));da.displayName="DndProvider";var pa=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function ga(){return"undefined"!==typeof n.g?n.g:window}var ya=n(5729);function ma(e){var t=null;return function(){return null==t&&(t=e()),t}}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var o=[];return n.forEach((function(e){return o.push(e)})),o}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&ba(t.prototype,n),r&&ba(t,r),e}(),wa=ma((function(){return/firefox/i.test(navigator.userAgent)})),Ea=ma((function(){return Boolean(window.safari)}));function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ca,Sa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,o=[],i=0;i<r;i++)o.push(i);o.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var s,a,u=[],l=[],c=[],f=0;f<r-1;f++)s=t[f+1]-t[f],a=n[f+1]-n[f],l.push(s),u.push(a),c.push(a/s);for(var h=[c[0]],d=0;d<l.length-1;d++){var p=c[d],g=c[d+1];if(p*g<=0)h.push(0);else{s=l[d];var y=l[d+1],m=s+y;h.push(3*m/((m+y)/p+(m+s)/g))}}h.push(c[c.length-1]);for(var b,v=[],w=[],E=0;E<h.length-1;E++){b=c[E];var A=h[E],C=1/l[E],S=A+h[E+1]-b-b;v.push((b-A-S)*C),w.push(S*C*C)}this.xs=t,this.ys=n,this.c1s=h,this.c2s=v,this.c3s=w}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,o=this.c2s,i=this.c3s,s=t.length-1;if(e===t[s])return n[s];for(var a,u=0,l=i.length-1;u<=l;){var c=t[a=Math.floor(.5*(u+l))];if(c<e)u=a+1;else{if(!(c>e))return n[a];l=a-1}}var f=e-t[s=Math.max(0,l)],h=f*f;return n[s]+r[s]*f+o[s]*h+i[s]*f*h}}])&&Aa(t.prototype,n),r&&Aa(t,r),e}();function Ta(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function ka(e){return{x:e.clientX,y:e.clientY}}function xa(e,t,n,r,o){var i=function(e){var t;return"IMG"===e.nodeName&&(wa()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),s=Ta(i?e:t),a={x:n.x-s.x,y:n.y-s.y},u=e.offsetWidth,l=e.offsetHeight,c=r.anchorX,f=r.anchorY,h=function(e,t,n,r){var o=e?t.width:n,i=e?t.height:r;return Ea()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}(i,t,u,l),d=h.dragPreviewWidth,p=h.dragPreviewHeight,g=o.offsetX,y=o.offsetY,m=0===y||y;return{x:0===g||g?g:new Sa([0,.5,1],[a.x,a.x/u*d,a.x+d-u]).interpolate(c),y:m?y:function(){var e=new Sa([0,.5,1],[a.y,a.y/l*p,a.y+p-l]).interpolate(f);return Ea()&&i&&(e+=(window.devicePixelRatio-1)*p),e}()}}function Ia(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ba=(Oa(Ca={},c.FILE,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),Oa(Ca,c.URL,{exposeProperties:{urls:function(e,t){return Ia(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),Oa(Ca,c.TEXT,{exposeProperties:{text:function(e,t){return Ia(e,t,"")}},matchesTypes:["Text","text/plain"]}),Ca);function Da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&Da(t.prototype,n),r&&Da(t,r),e}();function Pa(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(Ba).filter((function(e){return Ba[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function Fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&Fa(t.prototype,n),r&&Fa(t,r),e}();function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){Ua(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ja=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&Ta(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=ka(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var o=e.dataTransfer,i=Pa(o);if(r.monitor.isDragging()){if(o&&"function"===typeof o.setDragImage){var s=r.monitor.getSourceId(),a=r.sourceNodes.get(s),u=r.sourcePreviewNodes.get(s)||a;if(u){var l=r.getCurrentSourcePreviewNodeOptions(),c=xa(a,u,n,{anchorX:l.anchorX,anchorY:l.anchorY},{offsetX:l.offsetX,offsetY:l.offsetY});o.setDragImage(u,c.x,c.y)}}try{null===o||void 0===o||o.setData("application/json",{})}catch(f){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(i)r.beginDragNativeItem(i);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=Pa(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,wa()||r.actions.hover(t,{clientOffset:ka(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:ka(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:ka(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new _a(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new va(this.isNodeInDocument)}var t,n,r;return t=e,(n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return r.handleDragStart(t,e)},i=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",i),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},i=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",o),t.addEventListener("drop",i),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",o),t.removeEventListener("drop",i)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Ra({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return Ra({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new Na(Ba[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&Ma(t.prototype,n),r&&Ma(t,r),e}();const $a=e=>{const t=function(e,t){return new ja(e,t)}(e),n=t.handleTopDropCapture;return t.handleTopDropCapture=e=>{if(n.call(t,e),t.currentNativeSource&&e.dataTransfer.items){if([...e.dataTransfer.items].every((e=>{let{kind:t}=e;return"string"===t})))return;const n=(0,ya.getFilesFromDataTransferItems)(e.dataTransfer.items);t.currentNativeSource.item.filesPromise=n}},t};console.log("IPFS Web UI - v4.4.1 - https://github.com/ipfs-shipyard/ipfs-webui/commit/6785409"),async function(){const n=await Cs.getAll(),o=sa(n);t.render(e.createElement(r.K,{store:o},e.createElement(a.xC,{i18n:aa.A},e.createElement(da,{backend:$a},e.createElement(L.Fc,null,e.createElement(L.l4,null,e.createElement($,null)))))),document.getElementById("root"))}()})()})();
//# sourceMappingURL=main.a150c815.js.map